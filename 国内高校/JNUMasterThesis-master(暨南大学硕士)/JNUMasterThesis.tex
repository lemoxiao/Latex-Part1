%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Author: Yongtao Zhou <y.t.zhou@foxmail.com>                            %%
%% Time: 2015-4-8                                                         %%
%% Note: 请保留原作者Yongtao Zhou信息，非官方模板。                       %%
%%       最终解释权和所有权力归原作者和数据存储与集群计算实验室所有。     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,oneside,12pt]{book}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amscd}
\usepackage{amsfonts,eucal}
\usepackage{amsthm}
\usepackage{cite}
\usepackage{bm}
\usepackage{ccmap}
%\usepackage{CJKu,CJKnumb,CJKulem}
%\usepackage{ctex}
\usepackage{CJK}
%\usepackage{CJKpunct}
\usepackage{ctexcap}
\usepackage{times}
%% 默认算法环境
\usepackage[linesnumbered,ruled,vlined,boxed,commentsnumbered]{algorithm2e}
%% 常用包
\usepackage{graphicx}
\usepackage{url}
\usepackage{multirow}
\usepackage{subfigure}
\usepackage{float}
\usepackage{subfig}
\usepackage{array}
\usepackage{amsmath}%equation mutilrow align
\usepackage{amsthm}
\usepackage{makecell}

\usepackage{algorithm2e}
%\usepackage{mathtime}
%% 用geometry宏包设置页边距
\usepackage[top=2.5cm,bottom=2.0cm,left=2.5cm,right=2.0cm]{geometry}
%% 用titlesec宏包设置章节标题
%% 用titletoc宏包设置章页眉页脚和目录的格式
\usepackage[indentafter,pagestyles]{titlesec}
\usepackage{titletoc}

%% 目录设置
\setcounter{tocdepth}{1}
\titlecontents{chapter}[0pt]{\vspace{-15pt}\song\xiaosi}
    {\thecontentslabel\ }{}
    {\hspace{.5em}\titlerule*[3pt]{$\cdot$}\contentspage}
\titlecontents{section}[0pt]{\vspace{-15pt}\hspace{0em}\song\xiaosi}
    {\thecontentslabel\hspace{3em}}{}
    {\hspace{.5em}\titlerule*[3pt]{$\cdot$}\contentspage}
\titlecontents{subsection}[4em]{\vspace{-15pt}\song\xiaosi}
    {\thecontentslabel\ }{}
    {\hspace{.5em}\titlerule*[3pt]{$\cdot$}\contentspage}

%% 用\titleformat命令设置章标题的格式
\titleformat{\chapter}[hang]{\centering\xiaosan\hei}{\thechapter}{1em}{}
\titleformat{\section}[hang]{\sihao\hei}{\thesection}{0.5em}{}
\titleformat{\subsection}[hang]{\xiaosi\hei}{\thesubsection}{0.5em}{}

%% 用\titlespacing或\titlespacing*命令设置标题与四周的距离
\titlespacing{\chapter}{0pt}{*0}{*5}
\titlespacing{\section}{0pt}{*1}{*1}
\titlespacing{\subsection}{0pt}{*0.5}{*0.5}

%% 将文献引用作为上标出现
\makeatletter
\def\@cite#1#2{\textsuperscript{[{#1\if@tempswa , #2\fi}]}}
\makeatother

%% 行距倍数
%\linespread{1.5}
\renewcommand{\baselinestretch}{1.5}
%% 段落间距
\setlength{\parskip}{0.3\baselineskip}
%% 汉字字距
\renewcommand{\CJKglue}{\hskip 1pt plus 0.08\baselineskip}
\newcommand{\song}{\CJKfamily{song}}     %% 宋体
\newcommand{\hei}{\CJKfamily{hei}}       %% 黑体
\newcommand{\fs}{\CJKfamily{fs}}         %% 仿宋
\newcommand{\kai}{\CJKfamily{kai}}       %% 楷体
\newcommand{\li}{\CJKfamily{li}}         %% 隶书
\newcommand{\you}{\CJKfamily{you}}       %% 幼圆
\newcommand{\wuhao}{\fontsize{10.5pt}{12.6pt}\selectfont}        %% 五号字体
\newcommand{\xiaosi}{\fontsize{12pt}{18pt}\selectfont}           %% 小四字体
\newcommand{\sihao}{\fontsize{14pt}{21pt}\selectfont}            %% 四号字体
\newcommand{\xiaosan}{\fontsize{15pt}{22.5pt}\selectfont}        %% 小三字体
\newcommand{\sanhao}{\fontsize{16pt}{24pt}\selectfont}           %% 三号字体
\newcommand{\xiaoer}{\fontsize{18pt}{27pt}\selectfont}           %% 小二字体
\newcommand{\erhao}{\fontsize{21pt}{30pt}\selectfont}            %% 二号字体

%%-------------------这里定义论文相关信息--------------------
%% 作者名字
\newcommand{\authorName}{作者姓名（若是同等学力人员请注明“同等学力申请”，若是港澳台侨及海外留学生请注明申请人生源地）}
%% 论文题目
\newcommand{\titleCn}{暨南大学硕士学位论文LaTex模板v0.0.1}
\newcommand{\titleEn}{论文英文题目}
%% 导师及其职称
\newcommand{\tutor}{导师姓名\ 导师学位\ 导师职称}
%% 学科、专业名称
\newcommand{\disciplineName}{学科\ 专业}
%% 学位类型
\newcommand{\degreeType}{(学术学位/专业学位)}
%% 论文提交时间
\newcommand{\commitDate}{2015\ 年\ 6\ 月}
%% 论文答辩时间
\newcommand{\replyDate}{2015\ 年\ 6\ 月}
%% 答辩委员会主席
\newcommand{\programCoChairs}{委员会主席\ 职称}
%% 论文评阅人
\newcommand{\Reviewer}{评阅人名字\ 职称}
%% 学位论文授予单位日期
\newcommand{\grantDate}{2015\ 年\ 6\ 月}
\newcommand{\schoolName}{暨南大学}
\newcommand{\pageHeaderTitle}{暨南大学硕士学位论文}

%% 设置页眉页脚
\newpagestyle{main}[\wuhao]{
\sethead{}{\pageHeaderTitle}{}
\setfoot{}{\thepage}{} \setheadrule{0.05pt}}\pagestyle{main}

\renewcommand{\contentsname}{目\qquad 录}
\renewcommand{\bibname}{参\ 考\ 文\ 献}

%% 算法环境的重置
\renewcommand{\algorithmcfname}{算法}
\SetKwInput{KwData}{输入}
\SetKwInput{KwResult}{输出}

%% 图标重置
\def\figurename{图 }
\def\tablename{表 }

%% 中文和英文之间加入波浪符“~”，或“ \ ”
%% 例如：中文~abc~中文
%% 中英文混排的时候是用中文标点还是英文标点呢？
%% 这并没有统一的规范。不过比较合理也比较通行的做法是
%% 中文后用中文标点，英文后用英文标点
%% 一般数学文章习惯用全角的实心句点作为中文句号
%% 全角的中文括号看起来不太好看，可以统一使用英文的括号
%% 左括号前面和右括号后面最好加上波浪符“~”
%% 在缩写词后面加上波浪符“~”，如 pp.~100, cf.~something
%% 定义符合中文习惯的定理环境
\newtheoremstyle{mythm}{1.5ex plus 1ex minus .2ex}{1.5ex plus 1ex minus .2ex}{\kai}{\parindent}{\song\bfseries}{}{1em}{}
\theoremstyle{mythm}
\newtheorem{thm}{定理~}[chapter]
\newtheorem{lem}{引理~}
\newtheorem{prop}{命题~}
\newtheorem{cor}{推论~}
\newtheorem{defn}{定义~}
\newtheorem{conj}{猜想~}
\newtheorem{exmp}{例~}
\newtheorem{rem}{注~}
\newtheorem{notation}{记号~}

\newtheoremstyle{specthm}{1.5ex plus 1ex minus .2ex}{1.5ex plus 1ex minus
    .2ex}{\kai}{\parindent}{\song\bfseries}{}{1em}{\thmnote{#3}}
\theoremstyle{specthm}
\newtheorem{sthm}[thm]{}
%% 例如：
%% \begin{sthm}[定理~\thethm~(存在性定理)]
%% 定理内容
%% \end{sthm}
%% 定义符合中文习惯的证明环境
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
    \pushQED{\qed}%
    \normalfont \topsep6\p@\@plus6\p@ \labelsep1em\relax
    \trivlist
    \item[\hskip\labelsep\indent
        \bfseries #1]\ignorespaces
}{%
    \popQED\endtrivlist\@endpefalse
}
\makeatother

\renewcommand{\proofname}{证明}
%% proof环境会自动在证明最后一行的最右边加上一个证明结束符
%% 默认为空心方块，可以重新定义 \qedsymbol 来修改它
%% 需要注意的是，当证明以一个独立公式结束时
%% 证明结束符会出现在下一行的最右边，而不是在公式的同一行上
%% 这不合乎习惯。这时只要在公式环境内加上 \qedhere 即可

\begin{document}
%\begin{CJK*}{GBK}{song}
%% 参考文献格式重置
\def\thebibliography#1{\chapter*{\bibname}
    \addcontentsline{toc}{chapter}{\bibname}
    \thispagestyle{main}
    \list
    {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
    \advance\leftmargin\labelsep
    \usecounter{enumi}}
    \def\newblock{\hskip .11em plus .33em minus .07em}
    \sloppy\clubpenalty4000\widowpenalty4000
    \sfcode`\.=1000\relax
}
%% 修改参考文献条目之间的竖直方向上的距离
\patchcmd{\thebibliography}{\leftmargin\labelwidth}{\leftmargin\labelwidth\addtolength\itemsep{-8pt}}{}{}

\CJKindent                               %% 将段首缩进设为两个中文字符的宽度
\CJKtilde                                %% 解决中英文混排的美观问题
%% 前言
\include{chapter/declaration}
\include{chapter/abstract}

%% 生成目录
\tableofcontents
\thispagestyle{main}

%% 正文
\mainmatter
%% 章标题样式重置
\CTEXsetup[format+={\zihao{-3}\songti\flushleft},name={第,章},number={\chinese{chapter}},beforeskip={0pt}]{chapter}
\titleformat{\chapter}[hang]{\flushleft\xiaosan\hei}{第\chinese{chapter}章}{1em}{}
\include{chapter/chap1}
\include{chapter/chap2}
\include{chapter/conclusion}
\include{chapter/paperList}

%% 参考文献引入
\bibliographystyle{unsrt}
\bibliography{bib/texe}

%% 致谢
\include{chapter/acknowledgement}
%% 加入\newpage能使最后一页也有页眉
\newpage
%\end{CJK*}
\end{document}

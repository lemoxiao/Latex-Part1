%% edu Documentclass for typesetting educational documents
%%
%% Copyright (C) 2012-2018 by Daniel Wunderlich <code@wu-web.de>
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The current maintainer of this work is Daniel Wunderlich.
%% 
%% This work consists of the file edu.tex and the derived files:
%%  * edu.cls
%%  * edu-styles-wu.sty
%%  * edu-colors-wu.sty
%%  * edu.pdf
%%  * edu-de.pdf
\documentclass{skdoc}

\usepackage[T1]{fontenc} 
\usepackage[utf8]{inputenc}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{booktabs}
\usepackage{cancel}
\usepackage{datetime}
\usepackage{enumitem}
\usepackage{esvect}
\usepackage{etoolbox}
\usepackage{eurosym}
\usepackage{fancyvrb}
\usepackage{filecontents}
\usepackage{geometry}
\usepackage[notcomma, notperiod, notquote, notquery]{hanging}
%\usepackage{listings}
\usepackage{multicol}
\usepackage{polynom}
\usepackage{tabularx}
\usepackage{tikz}
\usepackage{units}
\usepackage{xspace}
\usepackage[only, lightning]{stmaryrd}
\usepackage[newcommands]{ragged2e}
\usepackage{hyperref}

\let\SI\relax
\usepackage{siunitx}
\DeclareSIUnit\point{pt}
\usepackage{hologo,booktabs,xcoffins,calc}
\usepackage[style=authoryear]{biblatex}
\usepackage{csquotes}
\usepackage{varioref,cleveref}
%\usepackage{chslacite}

\usetikzlibrary{positioning}

\ExplSyntaxOn
\cs_set_protected_nopar:Npn\ExplHack{
    \char_set_catcode_letter:n{ 58 }
    \char_set_catcode_letter:n{ 95 }
}
\ExplSyntaxOff

% Geometry
\geometry{left=4cm, top=2.5cm, right=2.5cm, bottom=2.5cm, includefoot}

% Fancyvrb
\fvset{frame=single, rulecolor=\color{coderule}}

% Font
\usepackage{sourcesanspro}

% Fontsize
\KOMAoption{fontsize}{10}

% Colors

% Original colors of skdoc:
%\definecolorset{RGB}{}{}{
%    section,145,0,0;
%    intlink,140,35,24;
%    keydesc,140,35,24;
%    scriptcolor,140,35,24;
%    sharp,250,105,0;
%    bright,198,229,217;
%    extlink,2,10,61;
%    macrodesc,73,10,61;
%    macroimpl,73,10,61;
%    optioncolor,73,10,61;
%    opt,73,10,61;
%    meta,11,72,107
%}

\definecolor{section}{RGB}{145,0,0}

\definecolor{extlink}{RGB}{145,0,0}
\definecolor{intlink}{RGB}{145,0,0}

\definecolor{macrodesc}{RGB}{145,0,0}
\definecolor{macroimpl}{RGB}{145,0,0}

\definecolor{opt}{RGB}{145,0,0}
\definecolor{optioncolor}{RGB}{145,0,0}

\definecolor{meta}{RGB}{120,120,120}

% New colors (not used in skdoc)
\definecolor{itemize}{RGB}{145,0,0}
\definecolor{csref}{RGB}{145,0,0}     % used by \cs
\definecolor{envref}{RGB}{145,0,0}    % used by \env
\definecolor{optref}{RGB}{145,0,0}    % used by \opt
\definecolor{pkgref}{RGB}{145,0,0}    % used by \pkg
\definecolor{coderule}{RGB}{145,0,0}  % used by fancyvrb
\definecolor{previewrule}{RGB}{140,140,140}  % used by \pdfinput


% Multilanguage support
\ExplSyntaxOn
\tl_gset:Nn \locale {de}

\tl_new:N \g_edu_warningname
\tl_gset:Nn \g_edu_warningname {Warning}

\cs_generate_variant:Nn \tl_if_eq:nnT { xnT }
\cs_generate_variant:Nn \tl_if_eq:nnTF { xnTF }

\tl_if_eq:xnT {\locale} {de} {
  \usepackage{ngerman}
  \AtBeginDocument{
    \cs_gset:Npn\abstractname{Zusammenfassung}
    \cs_gset:Npn\appendixname{Anhang}
    \cs_gset:Npn\bibname{Bibliographie}
    \cs_gset:Npn\contentsname{Inhalt}
    \cs_gset:Npn\figurename{Abbildung}
    \cs_gset:Npn\glossaryname{Abbildung}
    \cs_gset:Npn\refname{Referenzen}
    \cs_gset:Npn\tablename{Tabelle}
    \tl_gset:Nn \partname {Teil}
    \tl_gset:Nn \g_edu_bugname {Bug}
    \tl_gset:Nn \g_edu_noticename {Bemerkung}
    \tl_gset:Nn \g_edu_todoname {Todo}
    \tl_gset:Nn \g_edu_warningname {Warnung}
  }
}

\cs_new:Npn \__edu_use_language:nn #1 #2 {
  \tl_if_eq:xnT {\locale} {#1} {
	  #2}
}

\DeclareExpandableDocumentCommand \localeDE { +m } {
  \__edu_use_language:nn {de} {#1}
}


\DeclareDocumentCommand \localeEN { +m } {
  \__edu_use_language:nn {en} {#1}
}

\DeclareDocumentCommand \endcode { } {
  \relax
}

\DeclareDocumentCommand \skipcode { +u \endcode } {
  \relax
}

\DeclareDocumentCommand \startcode { m } {
  \bool_if:nT {!\str_if_eq_p:nV {#1} {\locale}} {\skipcode}
}

\DeclareDocumentCommand \codeinput { m } {
  \vspace{0.75\baselineskip}
	\noindent \begin{minipage}{\linewidth}
	\VerbatimInput{#1.tex}
	
	\vspace{-\baselineskip}
	\vspace{-4.5pt}
  \setlength{\fboxsep}{1.5pt}
  \noindent
  \colorbox{coderule}{\textcolor{white}{
    \scriptsize\texttt{\LaTeX}
  }}
	\end{minipage}
}

\DeclareDocumentCommand \pdfinput { O{\linewidth-2\fboxsep} m } {
  \par
  \IfFileExists{#2.pdf}{
	  \noindent
	  \begin{minipage}{\linewidth}
		  \setlength{\fboxsep}{1.5pt}
		  \hspace*{0pt}\hfill
		  \colorbox{previewrule}{\textcolor{white}{
		    \scriptsize\texttt{PDF}}
		  }
		  \hspace*{-2\fboxrule}%\hspace*{-0.5em}
		  
		  \par
		  \vspace*{-2.5\fboxrule}
		  \setlength{\fboxsep}{5pt}
		  \noindent\fcolorbox{previewrule}{white}{
		    \makebox[\linewidth-2\fboxsep][l]{
  	  	  \includegraphics[width=#1]{#2.pdf}
  	  	}
		  }
	  \end{minipage}
		\vspace{\baselineskip}
  }{
    \Warning{Die~Graphik~\texttt{#2.pdf}~ist~nicht~vorhanden.~Erzeuge~die~ Graphiken~der~Dokumentation~durch~\texttt{make~all}.}
  }
}



\DeclareDocumentEnvironment {codefilecontent} { s O{\linewidth-2\fboxsep} m } {
  \IfBooleanTF{#1} {
    \VerbatimOut{#3-nopreview.tex}
  }{
    \VerbatimOut{#3.tex}
  }
} {
  \endVerbatimOut
  
  \IfBooleanTF{#1} {
    \codeinput{#3-nopreview}
  }{
    \codeinput{#3}
  }
  
  \par
  \IfBooleanTF{#1} {
    \vspace{0.5\baselineskip}
  }{
	  \pdfinput[#2]{#3}
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {codefilecontent*} {\codefilecontent*}
\cs_new_eq:cN {endcodefilecontent*} \endcodefilecontent


% Git support
\tl_new:N \g_edu_gitrepo
\tl_gset:Nn \g_edu_gitrepo {wunderlich/edu}

\tl_new:N \g_edu_gitrepourl
\tl_gset:Nn \g_edu_gitrepourl {https://github.com/wunderlich/edu/}

\DeclareDocumentCommand \gitIssue { m } {
  {\ttfamily \href{\tl_use:N \g_edu_gitrepourl issues/#1.html}{\g_edu_gitrepo / \# #1}}\xspace
}

% Reimplementing inline referencing concerning color
\makeatletter

\DeclareDocumentCommand \cs { s m } {
    \IfBooleanTF{#1}{
      \texttt{\char`\\#2}
    }{
      \textcolor{csref}{\texttt{\char`\\#2}}
    }
    \bool_if:NF\g__skdoc_no_index_bool{
        \IfBooleanTF{#1}{}{\index@macro{#2}}
    }
}

\DeclareDocumentCommand \env { s m } {
    \IfBooleanTF{#1}{
      \texttt{#2}
    }{
      \textcolor{envref}{\texttt{#2}}
    }
    \bool_if:NF\g__skdoc_no_index_bool{
        \IfBooleanTF{#1}{}{\index@environment{#2}}
    }
}

\DeclareDocumentCommand \opt { s m } {
    \IfBooleanTF{#1}{
      \texttt{#2}
    }{
      \textcolor{optref}{\texttt{#2}}
    }
    \bool_if:NF\g__skdoc_no_index_bool{
        \IfBooleanTF{#1}{}{\index@option{#2}}
    }
}

\DeclareDocumentCommand \pkg { s m } {
    \IfBooleanTF{#1}{
      \textsf{#2}
    }{
      \textcolor{pkgref}{\texttt{#2}}
    }
    \bool_if:NF\g__skdoc_no_index_bool{
        \IfBooleanTF{#1}{}{\index@package{#2}}
    }
}

\makeatother

% New Commands:
\DeclareDocumentCommand \fpbox { O{\linewidth-2\fboxsep-2\fboxrule} m } {
  \noindent\fbox{\parbox{#1}{#2}}
}

\DeclareDocumentCommand \Bug { +m } {
  \vspace{\baselineskip}
  \par\noindent
  \group_begin:
  \color{section}
  \fbox{
    \begin{minipage}[c]{\linewidth-2\fboxsep-2\fboxrule}
      \textsf{\textbf{\g_edu_bugname{}:}}~
      #1
    \end{minipage}
  }
  \vspace{\baselineskip}
  \group_end:
  \par
}


\DeclareDocumentCommand \BugGit { +m } {
  \Bug{\gitIssue{#1}}
}

\DeclareDocumentCommand \Notice { +m } {
  \textsf{\textbf{\g_edu_noticename{}:}}~ 
  \itshape
    #1
  \upshape
}

\DeclareDocumentCommand \Todo { +m } {
  \vspace{\baselineskip}
  \par\noindent
  \group_begin:
  \color{lightgray}
  \fbox{
    \begin{minipage}[c]{\linewidth-2\fboxsep-2\fboxrule}
      \textsf{\textbf{\g_edu_todoname{}:}}~
      #1
    \end{minipage}
  }
  \vspace{\baselineskip}
  \group_end:
  \par
}

\DeclareDocumentCommand \Warning { +m } {
  \vspace{\baselineskip}
  \par\noindent
  \fbox{
    \begin{minipage}[c]{\linewidth-2\fboxsep-2\fboxrule}
      \textsf{\textbf{\g_edu_warningname{}:}}~
      #1
    \end{minipage}
  }
  \vspace{\baselineskip}
  \par
}

\ExplSyntaxOff

\DeclareDocumentCommand \WarningStylethemeDE { s } {
  \IfBooleanTF {#1} {
    \Warning{Obige Optionen können durch Styletheme überschrieben werden.}
  }{
    \Warning{Obige Option kann durch Styletheme überschrieben werden.}
  }
}

\DeclareDocumentCommand \WarningColorthemeDE { s } {
  \IfBooleanTF {#1} {
    \Warning{Obige Optionen können durch Colortheme überschrieben werden.}
  }{
    \Warning{Obige Option kann durch Colortheme überschrieben werden.}
  }
}

% Lists
\setlist{%
  partopsep=0ex,
  topsep=0.5\baselineskip - \parskip,
  itemsep=0.5\baselineskip - \parskip,
  parsep=\parskip,
  leftmargin=1.5em,
	}
	
\setlist[itemize, 1]{label=\color{itemize}\rule[0.3ex]{0.7ex}{0.7ex}}
\setlist[itemize, 2]{label=\color{itemize}\rule[0.5ex]{0.7ex}{0.4ex}}
\setlist[itemize, 3]{label=\color{itemize}\rule[0.55ex]{0.7ex}{0.2ex}}


% Hide the implementation
\OnlyDescription

% Bibliography entries
\begin{filecontents}{edu.bib}
    @online{koma,
        author = {Markus Kohm},
        title = {koma-script -- A bundle of versatile classes and packages},
        year = {2012},
        url = {http://www.ctan.org/pkg/koma-script}
    }
    @online{fonts,
        author = {Walter Schmidt},
        title = {Using common PostScript fonts with LaTeX},
        year = {2004},
        url = {http://mirrors.ctan.org/macros/latex/required/psnfss/psnfss2e.pdf}
    }
    @online{fontcatalogue,
        author = {Palle J{\o}rgensen},
        title = {The LaTeX Font Catalogue},
        year = {2012},
        url = {http://www.tug.dk/FontCatalogue}
    }
    @online{tikz,
        author = {Till Tantau},
        title = {pgf -- Create PostScript and PDF graphics in \TeX},
        year = {2008},
        url = {http://www.ctan.org/pkg/pgf}
    }
%        @article{kpfonts,
%        author = {Christophe Caignaert},
%        title = {KP-Fonts 3.31},
%        year = {2010},
%        url = {http://www.tex.ac.uk/tex-archive/fonts/kpfonts/doc/kpfonts.pdf}
%    }
%    @standard{ISO216,
%        title = {ISO 216:2007},
%        subtitle = {Writing paper and certain classes of printed matter -- Trimmed sizes -- A and B series, and indication of machine direction},
%        author = {{International Organization for Standardization, Technical Committee 6}},
%        year = {2007}
%    }
%    @standard{ISO8601,
%        title = {ISO 8601:2004},
%        subtitle = {Data elements and interchange formats -- Information interchange -- Representation of dates and times},
%        author = {{International Organization for Standardization, Technical Committee 154}},
%        year = {2004}
%    }
\end{filecontents}
\addbibresource{edu.bib}

% Declare the target files
\SelfPreambleTo{\mypreamble}
\DeclareFile[key=class,preamble=\mypreamble]{edu.cls}




% This is where the documentation begins

\usepackage[scaled=0.8]{beramono}


% Change & version info
\version{0.5 (Build: \pdfdate)}
\changes{0.5}{%
  \localeEN{Initial version}%
  \localeDE{Initiale Version}%
}

% Metadata
\package[ctan=edu,vcs=https://github.com/wunderlich/edu]{edu}

\localeEN{\title{The \textbf{\thepackage} document class}}%
\localeDE{\title{Die \textbf{\thepackage} Dokumentenklasse}}%

\author{Daniel Wunderlich}
\email{code@wu-web.de}


\begin{document}

% First page
\maketitle
\begin{abstract}
\localeEN{This documentclass provides the easy typesetting of documents for educational use, like worksheets, exams, summaries, lecture notes or scheduling lessons. It loads many useful packages and allows the easy setup of documents (e.\,g. font/-size, margins, header and footer with metadata). It also defines a lot of macros for creating exercises, solutions, questions and for scheduling lessons. At the moment it focuses on mathematics and german schools.

\color{red} \textbf{Warning:} The \thepackage\ document class is currently under development. All functionality, settings and macros as well as file names can change in later versions and may be incomplete! It is experimental and not ready for production use.}
\localeDE{Diese Dokumentenklasse dient dem Satz von Dokumenten im Kontext der Bildung wie Arbeitsblättern, Klassenarbeiten/Klausuren, Zusammenfassungen, Skripten oder zur Unterrichtsplanung. Sie lädt viele gebräuchliche Packages, erlaubt eine erleichterte Einrichtung der Dokumente (z.\,B. Schriftarten, Seitenränder, Kopf- und Fußzeilen mit Metadaten). Außerdem stellt sie diverse Makros zur Verfügung, u.\,A. zur Erstellung von Aufgaben, Lösungen, Fragen oder der Unterrichtsplanung. Zur Zeit liegt der Schwerpunkt auf Mathematik und deutschen Gegebenheiten.

\medskip
\color{red} \textbf{Warnung:} Die \thepackage\ Dokumentenklasse befindet sich in der Entwicklung. Alle 
Funktionen, Einstellungen und Makros sowie Dateinamen können sich in späteren 
Versionen ändern oder können unvollständig sein. Sie ist noch nicht für den 
produktiven Einsatz bereit.
}
\end{abstract}

\tableofcontents

\newpage

\localeDE{\part{Einleitung}}

\localeDE{\section{Über \thepackage}}

\localeDE{
Das komfortable Erstellen von Arbeitsblättern, Klassenarbeiten/Klausuren oder ähnlichen Dokumentenmit \LaTeX\ Standard-Dokumentenklassen erweist sich für Lehrende je nach Anspruch als umständliches Unterfangen. Diese Dokumentenklasse stellt eine Vielzahl von Makros zur Verfügung, die das effiziente Erstellen solcher Dokumente ermöglicht. Sie erlaubt außerdem das Ändern vieler gängiger \LaTeX{}-Optionen, die in diesem Kontext relevant sind.

Hierzu erweitert \thepackage\ die herausragende Dokumentenklasse \pkg{scrartcl} des \emph{KOMA-Scripts} von \textsc{Michael Kohm} \footcite{koma} um die gewünschte Funktionalität und passt entsprechende Parameter (nach Meinung des Autors) sinnvoll an. Außerdem werden in diesem Kontext häufig verwendete Packages geladen und konfiguriert.

% Abschnitt~\ref{verwendung} dieser Dokumentation stellt neben den neuen Befehlen der \textsf{edu}-Klasse auch viele der geladenen und dem Benutzer eventuell unbekannte Packages vor, welche für Lehrende von Interesse sein könnten und erläutert deren grundlegende Verwendung. Die Funktionen dieser Packages werden in den meisten Fällen jedoch nur angeschnitten -- bei Interesse empfiehlt sich ein Blick in die jeweiligen Dokumentationen. Auch grundlegende Aspekte von \LaTeX\ und Typographie im Allgemeinen werden an wenigen Stellen thematisiert. Ein Beispieldokument, welches die Funktionalität der Dokumentenklasse in deutscher Sprache demonstriert, stellt |edu-demo-de.sty| mit dem zugehörigen PDF |edu-demo-de.pdf| dar.
%
% Die Implementierung des Packages in Abschnitt~\ref{implementierung} enthällt den Code der Klasse und ist im Allgemeinen nur für Autoren von Klassen oder Packages interessant. Benutzer können diesen Abschnitt im Normalfall vernachlässigen.
}

\localeDE{
\section{Über diese Dokumentation}

Diese Dokumentation verwendet verschiedene Schriftarten und -stile zur Auszeichnung unterschiedlicher Komponenten. Tabelle~\ref{tab:components} zeigt diese Arten der Auszeichnungen.

\begin{table}[h!tp]
  \centering
  \caption{Auszeichnung durch Schriftarten und -stile dieser Dokumentation.}{Auszeichnung durch Schriftarten und -stile dieser Dokumentation.}
  \label{tab:components}
  \medskip
  \begin{tabular}{ll} \toprule
    \textsf{Schrift} & \textsf{Beschreibung} \\ \midrule
    \pkg*{package} & Package \\
    \opt*{option} & Option \\
    \cs*{macro} & Makro\footnotemark \\
    \env*{umgebung} & Umgebung \\
    \meta{argument} & Argument (allgemein) \\
    \marg{argument} & Notwendiges Argument \\
    \oarg{argument} & Optionales Argument \\
    \bottomrule
  \end{tabular}
\end{table}

\footnotetext{{Es wird versucht, in dieser Dokumentation ausschließlich den Begriff \emph{Makro} zu verwenden. Die Begriffe \emph{Befehl}, \emph{Funktion} und \emph{Kommando} sind -- sollten sie wider Erwarten doch verwendet werden -- als Synonyme zu verstehen.}}

An einem Beispiel sei an dieser Stelle kurz der Unterschied zwischen notwendigen und optionalen Argumenten erläutert: Wir betrachten das Makro \Macro\fpbox[<Breite>=\cs*{linewidth}]{<Inhalt>} erzeugt einen umrahmten Absatz. Das Argument \meta{Inhalt} ist \emph{notwendig} und \emph{muss} angegeben werden. (Was wäre ein Absatz ohne Inhalt?). Der Aufruf \Macro\fpbox{Dies ist ein umrahmter Absatz.} erzeugt einen umrahmten Absatz, der sich über die gesamte Breite der aktuellen Zeile erstreckt:


\medskip
\fpbox{Dies ist ein umrahmter Absatz.}

\medskip

\noindent Das Argument \meta{Breite} ist \emph{optional}, es \emph{kann} angegeben werden. Im obigen Beispiel war dies nicht der Fall. Das Makro greift dann ggf. auf einen Standardwert, in diesem Fall \cs*{linewidth} (Breite der aktuellen Zeile), zurück. Der Aufruf \Macro\fpbox[3cm]{Dies ist ein umrahmter Absatz.} hingegen erzeugt einen umrahmten Absatz der Breite 5\,cm:

\medskip
\fpbox[3cm]{Dies ist ein umrahmter Absatz.}

}

\newpage
\localeDE{\part{Installation}}

\localeDE{\section{Voraussetzungen}}

\localeDE{
Die \thepackage-Klasse benötigt neben Standard-\LaTeX-Packages die Dokumentenklasse \pkg{scrartcl} des \emph{KOMA-Scripts} \footcite{koma} und die folgenden Packages:


\begin{multicols}{5}\raggedcolumns
{\sffamily 
\noindent beramono*\\
bibgerm\\
booktabs\\
calc\\
ccicons\\
datetime\\
enumitem\\
etoolbox\\
eurosym\\
expdlist\\
expl3\\
fontawesome\\
geometry\\
graphicx\\
hanging\\
hyperref\\
l3keys2e\\
lastpage\\
lato*\\
listings\\
menukeys\\
multicol\\
multirow\\
pdflscape\\
roboto*\\
rotating\\
ragged2e\\
scrpage2\\
setspace\\
siunitx\\
sourcecodepro*\\
sourcesanspro*\\
struktex\\
subfig\\
tabularx\\
textcomp\\
tikz\\
tikzsymbols\\
tikz-qtree\\
titlesec\\
ulem\\
verse*\\
xcolor\\
xparse\\
xsim\\
xspace}
\end{multicols}
\noindent\textsf{* optional}
 
\bigskip
Werden weitere \thepackage\ Packages geladen, gelten entsprechend deren Voraussetzungen.

Alle Packages sind über \emph{CTAN} erhältlich -- sie können unter Linux über \emph{TeX Live}, unter Windows über \emph{MiKTeX} und unter MacOSX über \emph{MacTeX} bezogen werden.
}


%\section{Installation}
% 
%Die manuelle Installation von Packages bzw. Dokumentenklassen wird an vielen Stellen im Internet erläutert. Deshalb wird sie hier nur sehr kompakt beschrieben. Bei Problemen bieten diverse Websiten Hilfestellung.
% 
%\subsection{Linux (Ubuntu 12.04/Linux Mint 13)}
%
%\begin{enumerate}
%  \item Per Kommandozeile in den Ordner navigieren, indem sich die heruntergeladene Datei \verb+edu.cls+ befindet.
%  \item Einen Ordner für die Dokumentenklasse im \TeX-Verzeichnisbaum erstellen:
%  \begin{verbatim}
%sudo mkdir /usr/share/texmf/tex/latex/edu
%  \end{verbatim}\vspace{-\baselineskip}
%  \item Nun wird die Datei \verb+edu.cls+ in den neuen Ordner kopiert:
%  \begin{verbatim}
%sudo cp edu.cls /usr/share/texmf/tex/latex/edu/
%  \end{verbatim}\vspace{-\baselineskip}
%    \item Abschließend muss der \TeX-Verzeichnisbaum neu aufgebaut werden:
%  \begin{verbatim}
%sudo mktexlsr
%  \end{verbatim}\vspace{-\baselineskip}
%\end{enumerate}
%
% 
%\subsection{Windows\,7}
%
%\begin{enumerate}
%  \item Bei einer Standardinstalltion von MiKTeX~2.9 unter Windows\,7 zuerst den Ordner
%  \begin{verbatim}
%C:\Program Files (x86)\MiKTeX 2.9\tex\latex\edu
%  \end{verbatim}
%  \vspace{-\baselineskip}
%  erstellen.
%  \item Dann die Datei \verb+edu.cls+ in diesen Ordner verschieben.
%  \item Das Programm \verb+Settings+ von MiKTeX öffnen:
%  \begin{center}
%    \itshape Startmenü $\rightarrow$ Alle Programme $\rightarrow$ MiKTeX 2.9 $\rightarrow$ Maintenance $\rightarrow$ Settings
%  \end{center}
%  \item Über die Schaltfläche \emph{Refresh~FNDB} wird die neue Datei eingelesen.
% \end{enumerate}

\newpage
\localeDE{\part{Allgemeines zum Textsatz in der Schule}}

\localeDE{\section{Kopf- und Fußzeilen}\label{sec:allg:kopfzeile}}

\localeDE{\section{Absatzauszeichnung}}

\localeDE{
 Es gibt zwei gängige Möglichkeiten, Absätze auszuzeichnen (d.\,h. kenntlich zu machen). Zum einen kann vor einem Absatz ein Abstand eingefügt werden. Diese Methode hat jedoch den gravierenden Nachteil, dass Absatzumbrüche an Seitenenden, Gleitobjekten (z.\,B. durch \env*{figure}- oder \env*{table}- Umgebungen) und abgesetzten Formeln nicht zu erkennen sind. Auch die Tatsache, dass in der letzten Zeile eines Absatzes kein Blocksatz erzwungen wird und sie somit "`linksbündig"' erscheint, beseitigt diesen Nachteil nicht zufriedenstellend: Da je nach Beschaffung eines Absatzes auch die letzte Zeile als Blocksatz erkannt werden kann (wenn sie "`komplett gefüllt"' ist), genügt dieses Kriterium im Allgemeinen nicht. Außerdem ist zu Beginn einer neuen Seite die letzte Zeile des letzten Absatzes nicht zu erkennen und erfordert ggf. ein Umblättern.

Deshalb ist die zweite Methode \emph{grundsätzlich} vorzuziehen: In jedem Absatz wird die erste Zeile eingerückt. Hierdurch werden alle Nachteile beseitigt und man erkennt beim Lesen unmittelbar den Beginn eines neuen Absatzes. In vielen gedruckten Büchern wird diese Art der Absatzauszeichnung deshalb verwendet.

\emph{Im Kontext der Schule}, insbesondere bei Dokumenten wie Arbeitsblättern und Klausuren im naturwissenschaftlichen Bereich, werden jedoch überwiegend sehr kurze "`Absätze"' verwendet. Häufige Absatzeinrückungen sind die Folge. Diese stören das Gesamtbild des Dokuments in diesem Fall jedoch stark. Aus diesem Grund wird in \thepackage\ standardmäßig Absatzabstand zur Auszeichnung von Absätzen verwendet. Es sei jedoch noch einmal darauf hingewiesen, dass dies eine Ausnahme darstellt, welche der Beschaffenheit von Dokumenten in der Schule geschuldet ist.
}

\newpage
\input{edu-tut.tex}


\newpage
\localeDE{
  \part{Dokumentation}
  \label{sec:doc}
}

\localeDE{\subsection{Allgemeines}}

\localeDE{\subsubsection{Farben}}

\localeDE{
\subsection{Optionen}

Die Optionen von \thepackage\ werden thematisch gruppiert beschrieben. Der Standardwert ist rechtsbündig in Klammern angegeben.
}

\localeDE{\subsubsection{Medienarten}\label{sec:doc:medienarten}}

\localeDE{
\thepackage\ verfügt über Modi für spezielle Medienarten. Diese Modi führen zu einer Anpassung insbesondere der Schriftgröße und der Seitenränder. In manchen fällen kann außerdem die Schriftfamilie geändert werden.

\Warning{Diese Optionen werden mit hoher Priorität verarbeitet. D.\,h. andere Optionen (z.\,B. \opt{fontsize}) werden gegebenenfalls überschrieben und habe keine Wirkung mehr.}
}

\localeDE{
\Option{twoup}\WithValues{true, false}\AndDefault{false}
Diese Option dient zum Ausdruck einer DIN-A4-Seite, die nach oder vor dem Druck auf DIN-A5 herunter skaliert wird. Dies dient insbesondere dem Druck von zwei DIN-A5-Seiten auf ein DIN-A4-Blatt. Hierzu wird die Schrift vergrößert und die Seitenränder angepasst.

Im Folgenden wird dieser Zustand als \opt*{twoup}-Modus bezeichnet.
}

\localeDE{
\Option{transparency}\WithValues{true, false}\AndDefault{false}
Möchte man Folien für Overhead-Projektoren erstellen, sollten einige Eigenschaften des Dokuments angepasst werden: Die Schrift muss (drastisch) vergrößert werden, Seitenränder können hingegen minimiert werden. Außerdem sollte serifenlose Schrift als Standardschrift verwendet werden, da sie die Lesbarkeit auf größerer Entfernung verbessert. Silbentrennung wird überdies deaktiviert. Diese Anpassungen werden durch die Option \opt*{transparency} vorgenommen.

Im Folgenden wird dieser Zustand als \opt*{transparency}-Modus bezeichnet.
}

\localeDE{
\Option{glue}\WithValues{true, false}\AndDefault{false}
In niedrigeren Klassenstufen werden Ausdrucke häufig in ein Heft geklebt. Um dies zu vereinfachen, kann man das Blatt rechts und unten etwas beschneiden. Die Option \opt*{glue} passt die Seitenränder so an, dass der untere und rechte Seitenrand 5\,mm größer als der obere und linke Seitenrand sind. Nach dem Beschneiden besitzt der Inhalt ungefähr den gleichen Abstand zu allen Rändern des Blattes.

Im Folgenden wird dieser Zustand als \opt*{glue}-Modus bezeichnet.
}


\localeDE{\subsubsection{Schriftarten}}

\localeDE{
\Option{sfdefault}\WithValues{true, false}\AndDefault{false}
Mit dieser Option kann als Standardschriftart serifenlose Schrift gewählt werden.
}

%\medskip
%
%\localeDE{
%\Option{beramono}\WithValues{true, false}\AndDefault{true}
%Mit dieser Option wird \emph{Bera Mono} mithilfe des Packages \pkg*{bera} als Standardschriftart für nichtproportionale Schrift gewählt.
%}
%
%\medskip
%
%\localeDE{
%\Option{lato}\WithValues{true, false}\AndDefault{false}
%Mit dieser Option wird \emph{Lato} mithilfe des Packages \pkg*{lato} als Standardschriftart für serifenlose Schrift gewählt.
%}
%
%\medskip
%
%\localeDE{
%\Option{palatino}\WithValues{true, false}\AndDefault{true}
%Mit dieser Option wird \emph{Palatino} mithilfe des Packages \pkg*{mathpazo} als Standardschriftart für serifenlose Schrift gewählt. Dies umfasst auch die Mathemik-Schriftarten.
%}
%
%\medskip
%
%\localeDE{
%\Option{sourcecodepro}\WithValues{true, false}\AndDefault{false}
%Mit dieser Option wird \emph{Source Code Pro} mithilfe des Packages \pkg*{sourcecodepro} als Standardschriftart für serifenlose Schrift gewählt.
%}
%
%\medskip
%
%\localeDE{
%\Option{sourcesanspro}\WithValues{true, false}\AndDefault{true}
%Mit dieser Option wird \emph{Source Sans Pro} mithilfe des Packages \pkg*{sourcesanspro} als Standardschriftart für serifenlose Schrift gewählt.
%}


\localeDE{\subsubsection{Schriftgrößen}}

\localeDE{
\Option{fontsize}\WithValues{\meta{Schriftgröße}}\AndDefault{11pt}
Gibt die Schriftgröße des Fließtextes im Dokument an.
}

\medskip

\localeDE{
\Option{twoupfontsize}\WithValues{\meta{Schriftgröße}}\AndDefault{14}
Gibt die Schriftgröße des Fließtextes im Dokument an, falls der \opt{twoup}-Modus gewählt wurde.
}

\medskip

\localeDE{
\Option{transparencyfontsize}\WithValues{\meta{Schriftgröße}}\AndDefault{20pt}
Gibt die Schriftgröße des Fließtextes im Dokument an, falls der \opt{transparency}-Modus gewählt wurde.
}


\localeDE{\subsubsection{Absatzauszeichnung}}

\localeDE{
\Option{parindent}\WithValues{true, false}\AndDefault{false}
Absatzeinzug kann (de-)aktiviert werden.
}

\medskip

\localeDE{
\Option{parskip}\WithValues{true, false}\AndDefault{true}
Absatzabstand kann (de-)aktiviert werden.
}


\localeDE{\subsubsection{Seitenränder}}

\localeDE{
\Option{top}\WithValues{\meta{Oberer Seitenrand}}\AndDefault{15mm}
\Option{right}\WithValues{\meta{Rechter Seitenrand}}\AndDefault{15mm}
\Option{bottom}\WithValues{\meta{Unterer Seitenrand}}\AndDefault{15mm}
\Option{left}\WithValues{\meta{Linker Seitenrand}}\AndDefault{22.5mm}
Diese Optionen dienen der Anpassung der Seitenränder. Sie beziehen sich auf den gesamten Inhalt der Seite, inklusive Kopf- und Fußzeile.
}

\medskip

\localeDE{
\Option{twouptop}\WithValues{\meta{Oberer Seitenrand}}\AndDefault{20mm}
\Option{twoupright}\WithValues{\meta{Rechter Seitenrand}}\AndDefault{20mm}
\Option{twoupbottom}\WithValues{\meta{Unterer Seitenrand}}\AndDefault{20mm}
\Option{twoupleft}\WithValues{\meta{Linker Seitenrand}}\AndDefault{25mm}
Diese Optionen dienen der Anpassung der Seitenränder im \opt{twoup}-Modus. Sie beziehen sich auf den gesamten Inhalt der Seite, inklusive Kopf- und Fußzeile.
}

\medskip

\localeDE{
\Option{transparencytop}\WithValues{\meta{Oberer Seitenrand}}\AndDefault{10mm}
\Option{transparencyright}\WithValues{\meta{Rechter Seitenrand}}\AndDefault{10mm}
\Option{transparencybottom}\WithValues{\meta{Unterer Seitenrand}}\AndDefault{10mm}
\Option{transparencyleft}\WithValues{\meta{Linker Seitenrand}}\AndDefault{22.5mm}
Diese Optionen dienen der Anpassung der Seitenränder im \opt{transparency}-Modus. Sie beziehen sich auf den gesamten Inhalt der Seite, inklusive Kopf- und Fußzeile.
}

\medskip

\localeDE{
\Option{gluetop}\WithValues{\meta{Oberer Seitenrand}}\AndDefault{10mm}
\Option{glueright}\WithValues{\meta{Rechter Seitenrand}}\AndDefault{15mm}
\Option{gluebottom}\WithValues{\meta{Unterer Seitenrand}}\AndDefault{15mm}
\Option{glueleft}\WithValues{\meta{Linker Seitenrand}}\AndDefault{10mm}
Diese Optionen dienen der Anpassung der Seitenränder im \opt{glue}-Modus. Sie beziehen sich auf den gesamten Inhalt der Seite, inklusive Kopf- und Fußzeile.
}

\localeDE{\subsubsection{Teile (Parts)}}

\localeDE{
\Option{parts}\WithValues{true, false}\AndDefault{false}
Werden im Dokument Teile als Gliederungsebene verwendet (\cs*{part}), sollte diese Option gewählt werden. Es wird dann die Schriftgröße anderer Textelemente angemessen vergrößert.
}

\localeDE{\subsubsection{Listen}}

\localeDE{
\Option{listarraysep}\WithValues{\meta{Länge}}\AndDefault{0.5em}
Bestimmt in Aufgaben den Abstand zwischen Aufgabennummerierung und dem folgenden Text (s.\,Abb.\,\ref{fig:lists}).

\begin{figure}[h!tp]
  \centering
  \localeDE{\caption{\opt*{listarraymargin} und \opt*{listarraysep}.}}
  \label{fig:lists}
  \medskip
  \setlength{\fboxsep}{0cm}
 
 \noindent \tikz{\draw (0,0cm) -- (0, 1.3cm) node[right, yshift=-5pt]{\localeDE{Textrand}}; \draw[<->] (0,2.5pt) -- node[above]{\opt*{listarraymargin}} +(3cm,0);}\fbox{\textsf{m)}}\tikz{\draw (0,0); \draw[<->] (0,2.5pt) -- node[above]{\opt*{listarraysep}} +(2.5cm,0);}\fbox{Lorem ipsum \dots}
\end{figure}
}

 


\localeDE{
\Option{listarraymargin}\WithValues{\meta{Länge}}\AndDefault{0.5em}
Bestimmt in Aufgaben den Abstand zwischen Textrand und Aufgabennummerierung (s.\,Abb.\,\ref{fig:lists}).

\Warning{Um ein einheitliches Bild zu gewährleisten, wirken sich die Optionen \opt*{listarraysep} und \opt*{listarraymargin} analog auch auf \env*{itemize} und \env*{enumerate} aus.}
}


\localeDE{\subsubsection{Metadaten}}

\localeDE{
\Option{authorstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}\cs*{scshape}}
\Option{classstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}}
\Option{datestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{small}\cs*{sffamily}}
\Option{emailstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{footnotesize}\cs*{sffamily}}
\Option{fieldstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}}
\Option{groupstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{Large}\cs*{sffamily}\cs*{bfseries}}
\Option{licensestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{small}\cs*{sffamily}}
\Option{shortstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{Large\cs*{sffamily}\cs*{bfseries}}}
\Option{subjectstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}}
\Option{subtitlestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{Large}\cs*{sffamily}\cs*{bfseries}}
\Option{timestamp}\WithValues{\meta{Boolean}}\AndDefault{\cs*{false}\cs*{sffamily}\cs*{bfseries}}
\Option{titlestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{LARGE}\cs*{sffamily}\cs*{bfseries}}
\Option{versionstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{small}\cs*{sffamily}}
Mit diesen Optionen kann das Erscheinungsbild des Titels angepasst werden.

\WarningStylethemeDE
}


\localeDE{\subsubsection{Titel}}

\localeDE{
\Option{titleskip}\WithValues{\meta{Abstand}}\AndDefault{1.75cm}
Definiert den Abstand zwischen dem gesamten Titel und dem folgenden Inhalt des Dokuments. Dies betrifft jedoch nur den ausführlichen Titel, erzeugt durch \cs{maketitle}, nicht den kurzen Titel (\cs{maketitle*}).
}
\medskip

\localeDE{
\Option{titlefg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{titlebg}\WithValues{\meta{Farbe}}\AndDefault{white}
Bestimmen die Vorder- und Hintergrundfarbe des Titels.
}
\medskip

\localeDE{
\Option{groupfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{groupbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{shortfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{shortbg}\WithValues{\meta{Farbe}}\AndDefault{black}
Bestimmen die Vorder- und Hintergrundfarbe der Gruppe.

\WarningColorthemeDE*
}



\localeDE{\subsubsection{Kopf- und Fußzeile}}

\localeDE{
\Option{headerrulewidth}\WithValues{\meta{Breite}}\AndDefault{0.5pt}
Bestimmt die Breite der Trennlinie der Kopfzeile an.
}
\medskip

\localeDE{
\Option{footer}\WithValues{true, false}\AndDefault{true}
Schaltet die Fußzeile ein oder aus.
}
\medskip

\localeDE{
\Option{pagecount}\WithValues{true, false}\AndDefault{true}
Bestimmt, ob die Gesamtzahl der Seiten des Dokuments in der Fußzeile angezeigt werden soll.
}
\medskip

\localeDE{
\Option{footskip}\WithValues{\meta{Abstand}}\AndDefault{1cm}
\Option{twoupfootskip}\WithValues{\meta{Abstand}}\AndDefault{0.75cm}
Bestimmt, den Abstand zwischen der Grundlinie der Fußzeile und der Grundlinie der letzten Zeile des Seiteninhalts. \opt*{twoupfootskip} bezieht sich hierbei auf den \opt{twoup}-Modus.
}


\localeDE{\subsubsection{Inhaltsverzeichnis}}

\localeDE{
\Option{exetoc}\WithValues{true, false}\AndDefault{false}
Mit dieser Option kann bestimmt werden, ob Aufgaben, Unteraufgaben, Lösungen und Unterlösungen im Inhaltsverzeichnis aufgeführt werden.
}


\localeDE{\subsubsection{Aufzählungen, Nummerierungen und Beschreibungen}}

\localeDE{
\Option{itemizefg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{enumeratefg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{descriptionfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Diese Optionen bestimmen die Farbe der Beschriftung von Aufzählungen, Nummerierungen und Beschreibungen.

\WarningColorthemeDE*
}


\localeDE{\subsubsection{Überschriften}}

\localeDE{Zum einen können die Schriftgrößen der Überschriften angegeben werden:}

\localeDE{
\Option{partnumbersize}\WithValues{\meta{Größe}}\AndDefault{\cs*{Large}}
\Option{sectionnumbersize}\WithValues{\meta{Größe}}\AndDefault{\cs*{normalsize}}
\Option{subsectionnumbersize}\WithValues{\meta{Größe}}\AndDefault{\cs*{footnotesize}}
Diese Optionen bestimmen die Schriftgrößen von Überschriften (\cs*{part}, \cs*{section} und \cs*{subsection}).
}

\localeDE{Zum anderen können die Farben der Überschriften angegeben werden:}

\localeDE{
\Option{partnumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{partnumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{sectionnumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{sectionnumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subsectionnumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subsectionnumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
Farben der Nummerierung von Überschriften (\cs*{part}), \cs*{section} und \cs*{subsection}).
}
\medskip

\localeDE{
\Option{partfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{sectionfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subsectionfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Farben von Überschriften (\cs*{part}), \cs*{section} und \cs*{subsection}).
}

\localeDE{\subsubsection{Verweise}}


% TODO Makros in beschreibung falsch?

\localeDE{\thepackage\ definiert die Makros \cs{seeappendix}, \cs{seeexercise}, \cs{seefigurelabel}, \cs{seelistinglabel}, \cs{seesectionlabel} und \cs{seesolutionlabel} für Verweise auf die entsprechenden Textelemente (Aufgaben, Lösungen, Abbildungen, Abschnitte), standardmäßig in der Form (s.\,Abb.\,X). Abbildung~\ref{fig:see} veranschaulicht die hierbei verwendeten Optionen am Beispiel eines Verweises auf eine Abbildung (deshalb \opt*{seefigurelabel}).



\begin{figure}[h!tp]
  \centering
  \localeDE{\caption{Aufbau von Verweisen}}
  \label{fig:see}
  \medskip
  \setlength{\fboxsep}{0cm}
	\begin{tikzpicture}[font=\huge]
		\node[draw, inner sep=2pt] (seeleft) at (-0.55,0) {(};
		\node[draw, inner sep=2pt] (seelabel) at (0,0) {s.};
		\node[draw, inner sep=2pt] (seefigurelabel) at (3.25,0) {Abb.};
		\node[draw, inner sep=2pt] (seeref) at (6,0) {5};
		\node[draw, inner sep=2pt] (seeright) at (6.49,0) {)};
		\draw[<->] (seelabel) -- node[above, font=\small] {seelabelsep} (seefigurelabel);
		\draw[<->] (seefigurelabel) -- node[above, font=\small] {seerefsep} (seeref);
		\begin{scope}[font=\small, inner sep=2pt]
			\node[below = 0.5 of seeleft] (seeleftl) {seeleft};
			\node[below right = 0.3 of seelabel] (seelabell) {seelabel};
			\node[below = 0.5 of seefigurelabel] (seefigurelabell) {seefigurelabel};
			\node[below left = 0.3 of seeref] (seerefl) {seeref};
			\node[below = 0.5 of seeright] (seerightl) {seeright};
		\end{scope}
		\draw[->] (seeleftl) -- (seeleft);
		\draw[->] (seelabell) -- (seelabel);
		\draw[->] (seefigurelabell) -- (seefigurelabel);
		\draw[->] (seerefl) -- (seeref);
		\draw[->] (seerightl) -- (seeright);
	\end{tikzpicture}
\end{figure}
}

\localeDE{
\Option{seelabel}\WithValues{\meta{Text}}\AndDefault{s.}
Abkürzung für \emph{siehe} (\emph{see}).
}
\medskip

\localeDE{
\Option{seeappendixlabel}\WithValues{\meta{Text}}\AndDefault{Anh.}
\Option{seeexerciselabel}\WithValues{\meta{Text}}\AndDefault{Aufg.}
\Option{seefigurelabel}\WithValues{\meta{Text}}\AndDefault{Abb.}
\Option{seelistinglabel}\WithValues{\meta{Text}}\AndDefault{List.}
\Option{seesectionlabel}\WithValues{\meta{Text}}\AndDefault{Abschn.}
\Option{seesolutionlabel}\WithValues{\meta{Text}}\AndDefault{L\"os.}
Abkürzungen für \emph{Aufgabe} (\emph{Exercise}), \emph{Abbildung} (\emph{Figure}), \emph{Listing} (\emph{Listing}), \emph{Abschnitt} (\emph{Section}) und \emph{Lösung} (\emph{Solution}) (s.\,Abb.\,\ref{fig:see}).
}
\medskip

\localeDE{
\Option{seelabelsep}\WithValues{\meta{Trenner}}\AndDefault{\cs*{,}}
\Option{seerefsep}\WithValues{\meta{Trenner}}\AndDefault{\cs*{,}}
Trenner/Abstände nach \opt*{seelabel} (\emph{siehe}) und \opt*{seeXlabel} (\emph{Aufg.}, \emph{Abb.}, \dots) (s.\,Abb.\,\ref{fig:see}).
}
\medskip

\localeDE{
\Option{seeleft}\WithValues{\meta{Begrenzer}}\AndDefault{(}
\Option{seeright}\WithValues{\meta{Begrenzer}}\AndDefault{)}
Begrenzer für Verweise (s.\,Abb.\,\ref{fig:see}).
}

\localeDE{\subsubsection{Schulbuch-Aufgaben angeben}}

\localeDE{
\Option{pglabel}\WithValues{\meta{Text}}\AndDefault{S.}
\Option{nolabel}\WithValues{\meta{Begrenzer}}\AndDefault{Nr.}
Abkürzungen für \emph{Seite} (\emph{page} -- \emph{pg}) und \emph{Nummer} (\emph{Number} -- \emph{no}) im Makro \cs{pgno}.
}

\localeDE{\subsubsection{Formatierungen}}

\localeDE{
\Option{cemphfg}\WithValues{\meta{Farbe}}\AndDefault{wuSemiDarkRed}
Das Makro \cs{cemph} zeichnet Text durch farbigen Satz in \cs*{emph} aus. Die verwendete Farbe kann durch diese Option bestimmt werden.

\WarningColorthemeDE
}

\localeDE{\subsubsection{Symbole}}

\localeDE{
\Option{ccscale}\WithValues{\meta{Skalierungsfaktor}}\AndDefault{1.5}
\thepackage\ definiert skalierte Versionen der Icons der Creative-Commons-Lizenzen. Der Faktor der Skalierung kann durch diese Option bestimmt werden.
}
\medskip

\localeDE{
\Option{actionfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{speechfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\thepackage\ definiert Symbole für Handlungen und Sprache, die in Ablauflisten verwendet werden können (\cs{action}, \cs{speech}, \cs{itemta}, \cs{itemts}, \cs{itemsa} und \cs{itemss}). Die Farbe dieser Symbole kann durch diese Optionen bestimmt werden.

\WarningColorthemeDE*
}

\localeDE{\subsubsection{Themes}}

\localeDE{
\Option{colorthemes}\WithValues{\meta{Themename}}\AndDefault{}
Mithilfe dieser Option kann ein Colortheme geladen werden.
}
\medskip

\localeDE{
\Option{styletheme}\WithValues{\meta{Themename}}\AndDefault{}
Mithilfe dieser Option kann ein Styletheme geladen werden.
}

\localeDE{\subsubsection{Grafik}}

\localeDE{
\Option{graphicspath}\WithValues{\meta{Pfad}}\AndDefault{img/}
Durch \cs*{includegraphics} eingebundene Grafiken sollten sich -- um Ordnung zu wahren -- in einem Unterverzeichnis befinden. Der Pfad dieses Verzeichnisses kann durch diese Option angegeben werden. Dies geschieht relativ zum Verzeichnis, in dem sich die entsprechende \texttt{tex}-Datei befindet. Standardmäßig muss ein Ordner \texttt{img} verwendet werden. Die Angabe muss durch einen Schrägstrich beendet werden.
}
\medskip

\localeDE{
\Option{tikzpath}\WithValues{\meta{Pfad}}\AndDefault{tikz/}
Durch \cs*{tikzinput} bzw. \cs*{tikzinput*} eingebundene TikZ-Dateien sollten sich -- um Ordnung zu wahren -- in einem Unterverzeichnis befinden. Der Pfad dieses Verzeichnisses kann durch diese Option angegeben werden. Dies geschieht relativ zum Verzeichnis, in dem sich die entsprechende \texttt{tex}-Datei befindet. Standardmäßig muss ein Ordner \texttt{tikz} verwendet werden. Die Angabe muss durch einen Schrägstrich beendet werden.
}

\localeDE{\subsubsection{Aufgaben}}

\localeDE{
\Option{exelabel}\WithValues{\meta{Beschriftung}}\AndDefault{Aufgabe}
\Option{subexelabel}\WithValues{\meta{Beschriftung}}\AndDefault{}
Mithilfe dieser Option kann die Beschriftung von Aufgaben und Unteraufgaben angegeben werden.
}
\medskip

\localeDE{
\Option{exenumberstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{footnotesize}}
\Option{exenumberseparator}\WithValues{\meta{Trenner}}\AndDefault{.}
Mithilfe dieser Optionen kann die Formatierung der Aufgabennummerierung und ein auf die Nummerierung folgender Trenner bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{exelabelstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{bfseries}\cs*{sffamily}}
\Option{exestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}}
\Option{exepointsstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{small}\cs*{bfseries}\cs*{sffamily}}
Mithilfe dieser Optionen kann die Formatierung von Aufgabenbeschriftung, Aufgabenname und Punktzahl bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{exenumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{exenumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{exelabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{exelabelbg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{exefg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{exebg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{exepointsfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Mithilfe dieser Optionen können die Farben von Aufgabennummer, Aufgabenbeschriftung, Aufgabenname und Punktzahl bestimmt werden.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{subexenumberstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{scriptsize}}
\Option{subexenumberseparator}\WithValues{\meta{Trenner}}\AndDefault{}
Mithilfe dieser Optionen kann die Formatierung der Unteraufgabennummerierung und ein auf die Nummerierung folgender Trenner bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{subexelabelstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{bfseries}\cs*{sffamily}}
\Option{subexestyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}}
\Option{subexepointsstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{scriptsize}\cs*{bfseries}\cs*{sffamily}}
Mithilfe dieser Optionen kann die Formatierung von Unteraufgaben bestimmt werden: Beschriftung, Name und Punktzahl.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{subexenumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subexenumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subexelabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subexelabelbg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subexefg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subexebg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subexepointsfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Mithilfe dieser Optionen können die Farben von Unteraufgaben bestimmt werden: Nummerierung, Beschriftung, Name und Punktzahl.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{multiexenumberstyle}\WithValues{\meta{Format}}\AndDefault{}
\Option{multiexepointsstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{footnotesize}\cs*{bfseries}}
Mithilfe dieser Optionen kann die Formatierung von Teilaufgaben bestimmt werden: Beschriftung und Punktzahl.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{multiexenumberfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{multiexepointsfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Mithilfe dieser Optionen können die Farben von Unteraufgaben bestimmt werden: Nummerierung und Punktzahl.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{multiexenumberleft}\WithValues{\meta{Abstand}}\AndDefault{}
\Option{multiexenumberright}\WithValues{\meta{Abstand}}\AndDefault{)}
Bestimmt Begrenzer der Teilaufgabennummerierung.
}
\medskip

\localeDE{
\Option{exepointslabel}\WithValues{\meta{Text}}\AndDefault{\cs*{,}P}
\Option{subexepointslabel}\WithValues{\meta{Text}}\AndDefault{\cs*{,}P}
\Option{multiexepointslabel}\WithValues{\meta{Text}}\AndDefault{}
Bestimmt die Beschriftung von Punkten in Aufgaben, Unteraufgaben und Teilaufgaben.
}
\medskip

\localeDE{
\Option{exepointsleft}\WithValues{\meta{Begrenzer}}\AndDefault{[}
\Option{exepointsright}\WithValues{\meta{Begrenzer}}\AndDefault{]}
\Option{subexepointsleft}\WithValues{\meta{Begrenzer}}\AndDefault{[}
\Option{subexepointsright}\WithValues{\meta{Begrenzer}}\AndDefault{]}
\Option{multiexepointsleft}\WithValues{\meta{Begrenzer}}\AndDefault{[}
\Option{multiexepointsright}\WithValues{\meta{Begrenzer}}\AndDefault{]}
Bestimmt Begrenzer von Punkten in Aufgaben, Unteraufgaben und Teilaufgaben.
}
\medskip

\localeDE{
\Option{exebeforeskip}\WithValues{\meta{Abstand}}\AndDefault{2.25ex}
\Option{exeafterskip}\WithValues{\meta{Abstand}}\AndDefault{0.5ex}
Mithilfe dieser Optionen können die Abstände vor und nach Aufgaben(-überschriften) bestimmt werden.
}
\medskip

\localeDE{
\Option{subexebeforeskip}\WithValues{\meta{Abstand}}\AndDefault{1.5ex}
\Option{subexeafterskip}\WithValues{\meta{Abstand}}\AndDefault{0.5ex}
Mithilfe dieser Optionen können die Abstände vor und nach Unteraufgaben(-überschriften) bestimmt werden.
}
\medskip

\localeDE{
\Option{arraybeforeskip}\WithValues{\meta{Abstand}}\AndDefault{0.5\cs*{baselineskip}}
\Option{arrayafterskip}\WithValues{\meta{Abstand}}\AndDefault{0.5\cs*{baselineskip}}
Mithilfe dieser Optionen können die Abstände vor und nach Teilaufgaben-Aufzählungen bestimmt werden.
}
\medskip


\localeDE{\subsubsection{Lösungen}}

\localeDE{
\Option{sollabel}\WithValues{\meta{Text}}\AndDefault{L\"osung}
\Option{subsollabel}\WithValues{\meta{Text}}\AndDefault{}
Mithilfe dieser Option kann die Beschriftung von Lösungen und UnterLösungen angegeben werden.
}
\medskip

\localeDE{
\Option{solnumberstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{footnotesize}}
\Option{solnumberseparator}\WithValues{\meta{Trenner}}\AndDefault{.}
Mithilfe dieser Optionen kann die Formatierung der Lösungsnummerierung und ein auf die Nummerierung folgender Trenner bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{sollabelstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{bfseries}\cs*{sffamily}}
\Option{solstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{large}\cs*{sffamily}}
Mithilfe dieser Optionen kann die Formatierung von Lösungsbeschriftung und Lösungsnamen bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{solnumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{solnumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{sollabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{sollabelbg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{solfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{solbg}\WithValues{\meta{Farbe}}\AndDefault{white}
Mithilfe dieser Optionen können die Farben von Lösungen bestimmt werden: Nummerierung, Beschriftung und Name.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{subsolnumberstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{scriptsize}}
\Option{subsolnumberseparator}\WithValues{\meta{Trenner}}\AndDefault{}
Mithilfe dieser Optionen kann die Formatierung der Nummerierung von Unterlösungen und ein auf die Nummerierung folgender Trenner bestimmt werden.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{subsollabelstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{bfseries}\cs*{sffamily}}
\Option{subsolstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}}
Mithilfe dieser Optionen kann die Formatierung von Unterlösungen bestimmt werden: Beschriftung, Name und Punktzahl.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{subsolnumberfg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subsolnumberbg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subsollabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subsollabelbg}\WithValues{\meta{Farbe}}\AndDefault{white}
\Option{subsolfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{subsolbg}\WithValues{\meta{Farbe}}\AndDefault{white}
Mithilfe dieser Optionen können die Farben von Unterlösungen bestimmt werden: Nummerierung, Beschriftung und Name.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{solbeforeskip}\WithValues{\meta{Abstand}}\AndDefault{2.25ex}
\Option{solafterskip}\WithValues{\meta{Abstand}}\AndDefault{0.5ex}
Mithilfe dieser Optionen können die Abstände vor und nach Lösungen (bzw. Lösungsüberschriften) bestimmt werden.
}
\medskip

\localeDE{
\Option{subsolbeforeskip}\WithValues{\meta{Abstand}}\AndDefault{1.5ex}
\Option{subsolafterskip}\WithValues{\meta{Abstand}}\AndDefault{0.5ex}
Mithilfe dieser Optionen können die Abstände vor und nach Unterlösungen (bzw. den Überschriften von Unterlösungen) bestimmt werden.
}

\localeDE{\subsubsection{Lösungen in Aufgaben}}

\localeDE{
\Option{showresults}\WithValues{true, false}\AndDefault{false}
Mithilfe dieser Optionen können Lösungen (erstellt durch \cs{res} oder \cs{resr}) in Aufgaben angezeigt werden.
}
\medskip

\localeDE{
\Option{resultsfg}\WithValues{\meta{Farbe}}\AndDefault{gray}
Mithilfe dieser Optionen kann die Farbe der Lösung bestimmt werden.

\WarningColorthemeDE
}
\medskip

\localeDE{
\Option{resultrule}\WithValues{\meta{Breite}}\AndDefault{0.4pt}
\Option{resultrulelength}\WithValues{\meta{Länge}}\AndDefault{5cm}
Mithilfe dieser Optionen können Breite und Länge der Linie von \cs{resr} bestimmt werden.
}

\localeDE{\subsubsection{Fragen}}

\localeDE{
\Option{questlabel}\WithValues{\meta{Text}}\AndDefault{Frage}
Die Option bestimmt die Beschriftung von Fragen.
}
\medskip

\localeDE{
\Option{questpointslabel}\WithValues{\meta{Text}}\AndDefault{\cs*{,}P}
Die Option bestimmt die Beschriftung der Punkte von Fragen.
}
\medskip

\localeDE{
\Option{questlabelstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{bfseries}\cs*{small}}
\Option{queststyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{small}}
\Option{questpointsstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{small}}
Bestimmen die Formatierung von Fragen: Beschriftung, Frage und Punkte.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{questlabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{questmclabelfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Bestimmen die Farbe von Fragen: Beschriftung und Multiple-Choice-Antwortmöglichkeiten.

\WarningColorthemeDE*
}
\medskip

\localeDE{
\Option{questpointsleft}\WithValues{\meta{Begrenzer}}\AndDefault{[}
\Option{questpointsright}\WithValues{\meta{Begrenzer}}\AndDefault{]}
Mit dieser Option können die Begrenzer von Punktzahlen in Fragen bestimmt werden.
}
\medskip

\localeDE{
\Option{questpointssep}\WithValues{\meta{Abstand}}\AndDefault{0.25em}
\Option{questsep}\WithValues{\meta{Abstand}}\AndDefault{0.5em}
Mit dieser Option können horizontale Abstände von Fragen angegeben werden: Der Abstand vor der Punktzahl und der Abstand vor der Frage.
}
\medskip

\localeDE{
\Option{questbeforeskip}\WithValues{\meta{Abstand}}\AndDefault{1ex}
\Option{questafterskip}\WithValues{\meta{Abstand}}\AndDefault{0ex}
Mit dieser Option können vertikale Abstände vor und nach Fragen angegeben werden.
}
\medskip


\localeDE{\subsubsection{Notizen}}

\localeDE{
\Option{shownotes}\WithValues{true, false}\AndDefault{true}
Mit dieser Option können Notizen (\cs*{notet}, \cs*{notehr}, \cs*{noteitem}) eingeblendet werden.
}
\medskip

\localeDE{
\Option{notetstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}}
Diese Option bestimmt die Formatierung von Notizen (\cs*{notet}).

\WarningStylethemeDE
}
\medskip

\localeDE{
\Option{notehrule}\WithValues{\meta{Breite}}\AndDefault{0.4pt}
Diese Option bestimmt Breite der Linie, die durch \cs*{notehr} erzeugt wird.
}
\medskip

\localeDE{
\Option{notetfg}\WithValues{\meta{Farbe}}\AndDefault{wuRed}
\Option{notehrfg}\WithValues{\meta{Farbe}}\AndDefault{wuRed}
Diese Option bestimmt die Farbe von Notizen (\cs*{notet} und \cs*{notehr}).

\WarningColorthemeDE*
}
\medskip

\localeDE{\subsubsection{Unterrichtsablauf}}

\localeDE{
\Option{ttendtime}\WithValues{true, false}\AndDefault{true}
Diese Option gibt an, ob die Uhrzeit am Ende der Ablauftabelle in einer zusätzlichen Zeile angezeigt werden soll.
}
\medskip

\localeDE{
\Option{tttimelabel}\WithValues{\meta{Text}}\AndDefault{Zeit}
\Option{ttstagelabel}\WithValues{\meta{Text}}\AndDefault{Phase}
\Option{ttactivitylabel}\WithValues{\meta{Text}}\AndDefault{Ablauf}
\Option{ttmethodlabel}\WithValues{\meta{Text}}\AndDefault{Methoden}
\Option{ttmedialabel}\WithValues{\meta{Text}}\AndDefault{Medien/Material}
Die Beschriftung der Spalten der Ablauftabelle kann durch diese Optionen bestimmt werden.
}
\medskip

\localeDE{
\Option{tttimewidth}\WithValues{\meta{Breite}}\AndDefault{1cm}
\Option{ttstagewidth}\WithValues{\meta{Breite}}\AndDefault{2.25cm}
\Option{ttmethodwidth}\WithValues{\meta{Breite}}\AndDefault{2cm}
\Option{ttmediawidth}\WithValues{\meta{Breite}}\AndDefault{2.75cm}
Die Breite der Spalten der Ablauftabelle im Hochformat (\cs{ttable}) kann durch diese Optionen bestimmt werden. Die Breite der Spalte mit dem Ablauf der jeweiligen Phase erstreckt sich automatisch über die restliche Zeilenbreite.
}
\medskip

\localeDE{
\Option{tttimewidthlscape}\WithValues{\meta{Breite}}\AndDefault{1cm}
\Option{ttstagewidthlscape}\WithValues{\meta{Breite}}\AndDefault{3.5cm}
\Option{ttmethodwidthlscape}\WithValues{\meta{Breite}}\AndDefault{3.5cm}
\Option{ttmediawidthlscape}\WithValues{\meta{Breite}}\AndDefault{3.5cm}
Die Breite der Spalten der Ablauftabelle im Querformat (\cs{ttable*}) kann durch diese Optionen bestimmt werden. Die Breite der Spalte mit dem Ablauf der jeweiligen Phase erstreckt sich automatisch über die restliche Zeilenbreite.
}
\medskip

\localeDE{
\Option{ttshowtime}\WithValues{true, false}\AndDefault{true}
Diese Option gibt an, ob die aktuelle Uhrzeit in der Zeitspalte jeder Zeile der Ablauftabelle angezeigt werden soll.
}
\medskip

\localeDE{
\Option{ttentrytimelabel}\WithValues{\meta{Text}}\AndDefault{}
Mithilfe dieser Option kann die Uhrzeit in der Zeitspalte jeder Zeile der Ablauftabelle mit einer Beschriftung (z.\,B. Uhr) versehen werden.
}
\medskip

\localeDE{
\Option{seqteacherlabel}\WithValues{\meta{Text}}\AndDefault{L}
\Option{seqstudentlabel}\WithValues{\meta{Text}}\AndDefault{S}
Diese Option bestimmt die Beschriftung von Lehrern und Schülern in Ablauflisten.
}
\medskip

\localeDE{
\Option{seqteacherstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{bfseries}}
\Option{seqetudentstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}\cs*{bfseries}}
Bestimmen die Formatierung von Einträgen für Lehrer und Schüler in Ablauflisten.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{seqteacherfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{seqstudentfg}\WithValues{\meta{Farbe}}\AndDefault{black}
Bestimmen die Farbe von Einträgen für Lehrer und Schüler in Ablauflisten.

\WarningColorthemeDE*
}

\localeDE{\subsubsection{Tafelbild}}

\localeDE{
\Option{bbstyle}\WithValues{\meta{Format}}\AndDefault{\cs*{sffamily}}
Gibt die Formatierung von Tafelbildern an.

\WarningStylethemeDE*
}
\medskip

\localeDE{
\Option{bbfontsize}\WithValues{\meta{Schriftgröße}}\AndDefault{8pt}
Gibt die Schriftgröße in Tafelbildern an.
}
\medskip

\localeDE{
\Option{bbbaselineoffset}\WithValues{\meta{Abstand}}\AndDefault{1pt}
Gibt den Baselineoffset in Tafelbildern an.
}
\medskip

\localeDE{
\Option{bbheight}\WithValues{\meta{Höhe}}\AndDefault{0.25\cs*{linewidth} - 2\cs*{fboxsep}}
Bestimmt die Höhe von Tafelbildern. Der Standardwert entspricht einem Viertel der Zei"-len"-brei"-te (abzüglich der inneren Abstände vom Tafelinhalt zur Umrandung).
}
\medskip




\localeDE{\subsubsection{Informatik}}

\localeDE{
\Option{lstnumberfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{lstkeywordfg}\WithValues{\meta{Farbe}}\AndDefault{black}
\Option{lstrulefg}\WithValues{\meta{Farbe}}\AndDefault{gray}
Durch diese Optionen kann die Farbgestaltung von Listings bestimmt werden: Zeilennummerierung (\opt*{lstnumberfg}), Schlüsselwörter der Programmiersprache (\opt*{lstkeywordfg}) und Umrandung des Codes (\opt*{lstrulefg}).

\WarningColorthemeDE*
}







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\localeDE{\subsection{Aufgaben}}
%
%\DescribeMacro\exe[<Punke>]{<Name>}


\Implementation\ExplHack

\section{Implementierung}


\subsection{Basic Packages}

Die folgenden Packages werden zur Erstellung und Bearbeitung der Optionen verwendet:

\begin{MacroCode}{class}
\RequirePackage{expl3, l3keys2e}
\RequirePackage{xparse}

\ExplSyntaxOn

\end{MacroCode}


\subsection{Messages}

Messages for future use:

\begin{MacroCode}{class}
\msg_new:nnn {edu} {option-dep-enable} {If\ you\ enable\ the\ option\ #1,\ you\ have\ to\ enable\ the\ following\ option(s):\ #2.}

\end{MacroCode}


\subsection{Variants}

\begin{MacroCode}{class}
\cs_generate_variant:Nn \tl_if_eq:nnT { V }
\cs_generate_variant:Nn \tl_if_eq:nnF { V }
\cs_generate_variant:Nn \tl_if_eq:nnTF { V }

\cs_generate_variant:Nn \tl_if_eq:nnT { v }
\cs_generate_variant:Nn \tl_if_eq:nnF { v }
\cs_generate_variant:Nn \tl_if_eq:nnTF { v }

\end{MacroCode}


\subsection{Temporary variables}

\begin{macro*}{\g_edu_temp_dim}
Variables for temporary usage.
\begin{MacroCode}{class}
\dim_new:N \g_edu_temp_dim

\end{MacroCode}
\end{macro*}





\subsection{Optionen}

\subsubsection{Patches}

\begin{macro}{\__edu_keys_initial:n}[1]{<key = value list>}
Da die Zuweisung initialer Werte in relativen Einheiten (em, ex etc.) bei \cs*{key}-Option durch \cs*{.initial} nicht funktioniert, werden diese mithilfe dieses Hilsmakros am Dokumentenanfang zugewiesen.
\begin{MacroCode}{class}
\cs_new:Npn \__edu_keys_initial:n #1 {
  \AtBeginDocument{
    \keys_set:nn {edu} {#1}
  }
}

\end{MacroCode}
\end{macro}

\begin{macro}{\@usetl}[3]{<module>}{<option>}{<type>}
\pkg{tikz}-Optionen können (noch?) nicht in \LaTeX3 eingebettet, d.\,h. innerhalb von \cs{ExplSyntaxOn} und \cs{ExplSyntaxOff} verwendet werden. Mithilfe dieses Makros können durch \cs{keys_define} definierte Optionen dennoch in \pkg{tikz} verwendet werden.
\begin{MacroCode}{class}
\DeclareExpandableDocumentCommand \@usetl { m m m } {
  \tl_use:c {g_#1_#2_#3}
}

\end{MacroCode}
\end{macro}

Im Folgenden werden die Optionen nach Kategorie deklariert.


\subsubsection{Load other \thepackage\ packages}

\begin{option}{twoup}
\begin{option}{glue}
\begin{option}{transparency}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  edumath .bool_gset:N = \g_edu_edumath_bool,           % use edumath package
  edumath .initial:n = false,
  edumathoptions .tl_gset:N = \g_edu_edumathoptions_tl,
  edumathoptions .initial:n = commasep,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\subsubsection{Media Types}

\begin{option}{twoup}
\begin{option}{glue}
\begin{option}{transparency}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  twoup .bool_gset:N = \g_edu_twoup_bool,                 % Print at A5-paper
  twoup .initial:n = false,
  glue .bool_gset:N = \g_edu_glue_bool,                   % Additional margin for gluing sheet into exercise book
  glue .initial:n = false,
  transparency .bool_gset:N = \g_edu_transparency_bool,   % Print at transparency
  transparency .initial:n = false
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\subsubsection{Schriftarten}

\begin{option}{rmfont}
\begin{option}{sffont}
\begin{option}{ttfont}

Options for fonts:

\begin{MacroCode}{class}
\ExplSyntaxOn
\tl_new:N \g_edu_rmfont_tl
\tl_new:N \g_edu_sffont_tl
\tl_new:N \g_edu_ttfont_tl

\keys_define:nn {edu} {
  rmfont .choices:nn = {
    computermodern,
    libertine,
    palatino
  }
  {
    \tl_gset:NV \g_edu_rmfont_tl \l_keys_choice_tl
  },
  rmfont .initial:n = libertine
}

%\keys_define:nn {edu} {
%  rmfont .choice_code:n = {
%    \tl_gset:NV \g_edu_rmfont_tl \l_keys_choice_tl
%  },
%  rmfont .generate_choices:n = {  % option for choosing the roman font
%    computermodern,
%    libertine,
%    palatino
%  },
%  rmfont .initial:n = libertine
%}

\keys_define:nn {edu} {
  sffont .choices:nn = {  % option for choosing the sans serif font
    computermodern,
    sourcesanspro,
    roboto,
    lato
  }{
    \tl_gset:NV \g_edu_sffont_tl \l_keys_choice_tl
  },
  sffont .initial:n = sourcesanspro
}

%\keys_define:nn {edu} {
%  sffont .choice_code:n = {
%    \tl_gset:NV \g_edu_sffont_tl \l_keys_choice_tl
%  },
%  sffont .generate_choices:n = {  % option for choosing the sans serif font
%    computermodern,
%    sourcesanspro,
%    roboto,
%    lato
%  },
%  sffont .initial:n = sourcesanspro
%}

\keys_define:nn {edu} {
  ttfont .choices:nn = {  % option for choosing the monospace font
    beramono,
    sourcecodepro
  }{
    \tl_gset:NV \g_edu_ttfont_tl \l_keys_choice_tl
  },
  ttfont .initial:n = sourcecodepro
}

%\keys_define:nn {edu} {
%  ttfont .choice_code:n = {
%    \tl_gset:NV \g_edu_ttfont_tl \l_keys_choice_tl
%  },
%  ttfont .generate_choices:n = {  % option for choosing the typewriter font
%    beramono,
%    sourcecodepro
%  },
%  ttfont .initial:n = sourcecodepro
%}

\end{MacroCode}
\end{option}
\end{option}
\end{option}

\begin{option}{sfdefault}

Options for fonts:

\begin{MacroCode}{class}
\ExplSyntaxOn
\keys_define:nn {edu} {
  sfdefault .bool_gset:N = \g_edu_sfdefault_bool,          % sans-serif als familydefault
  sfdefault .initial:n = false,
}


\end{MacroCode}
\end{option}


\subsubsection{Schriftgröße}

\begin{option}{fontsize}
\begin{option}{transparencyfontsize}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  fontsize .dim_gset:N = \g_edu_fontsize_dim,  % Fontsize
  fontsize .initial:n = 11pt,
  twoupfontsize .dim_gset:N = \g_edu_twoupfontsize_dim, % Fontsize for twoup
  twoupfontsize .initial:n = 14pt,
  transparencyfontsize .dim_gset:N = \g_edu_transparencyfontsize_dim,                    % Fontsize for transparency
  transparencyfontsize .initial:n = 20pt,
}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Paragraph highlighting}

\begin{option}{parindent}
\begin{option}{parskip}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  parindent .bool_gset:N = \g_edu_parindent_bool,   % Enable/disable parindent
  parindent .initial:n = false,
  parskip .bool_gset:N = \g_edu_parskip_bool,       % Enable/disable parskip
  parskip .initial:n = true
}

\end{MacroCode}
\end{option}
\end{option}

\subsubsection{Margins -- normal mode}

\begin{option}{top}
\begin{option}{right}
\begin{option}{bottom}
\begin{option}{left}
\begin{MacroCode}{class}

\keys_define:nn {edu} {
  top .dim_gset:N = \g_edu_top_dim,
  top .initial:n = 15mm,
  right .dim_gset:N = \g_edu_right_dim,
  right .initial:n = 15mm,
  bottom .dim_gset:N = \g_edu_bottom_dim,
  bottom .initial:n = 15mm,
  left .dim_gset:N = \g_edu_left_dim,
  left .initial:n = 22.5mm,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\subsubsection{Margins -- twoup mode}

\begin{option}{twouptop}
\begin{option}{twoupright}
\begin{option}{twoupbottom}
\begin{option}{twoupleft}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  twouptop .dim_gset:N = \g_edu_twouptop_dim,        % Top margin A5-print
  twouptop .initial:n = 20mm,
  twoupright .dim_gset:N = \g_edu_twoupright_dim,    % Right margin A5-print
  twoupright .initial:n = 20mm,
  twoupbottom .dim_gset:N = \g_edu_twoupbottom_dim,  % Bottom margin A5-print
  twoupbottom .initial:n = 20mm,
  twoupleft .dim_gset:N = \g_edu_twoupleft_dim,      % Left margin A5-print
  twoupleft .initial:n = 25mm,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\subsubsection{Margins -- transparency mode}

\begin{option}{transparencytop}
\begin{option}{transparencyright}
\begin{option}{transparencybottom}
\begin{option}{transparencyleft}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  transparencytop .dim_gset:N = \g_edu_transparencytop_dim,        % Top margin at transparency
  transparencytop .initial:n = 10mm,
  transparencyright .dim_gset:N = \g_edu_transparencyright_dim,    % Right margin at transparency
  transparencyright .initial:n = 10mm,
  transparencybottom .dim_gset:N = \g_edu_transparencybottom_dim,  % Bottom margin at transparency
  transparencybottom .initial:n = 10mm,
  transparencyleft .dim_gset:N = \g_edu_transparencyleft_dim,      % Left margin at transparency
  transparencyleft .initial:n = 22.5mm,
}  

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\subsubsection{Margins -- glue mode}

\begin{option}{gluetop}
\begin{option}{glueright}
\begin{option}{gluebottom}
\begin{option}{glueleft}
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  gluetop .dim_gset:N = \g_edu_gluetop_dim,        % Top margin at glue
  gluetop .initial:n = 15mm,
  glueright .dim_gset:N = \g_edu_glueright_dim,    % Right margin at glue
  glueright .initial:n = 20mm,
  gluebottom .dim_gset:N = \g_edu_gluebottom_dim,  % Bottom margin at glue
  gluebottom .initial:n = 20mm,
  glueleft .dim_gset:N = \g_edu_glueleft_dim,      % Left margin at glue
  glueleft .initial:n = 15mm,
}  

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Parts}

\begin{option}{parts}
Set part as topmost structure.
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  parts .bool_gset:N = \g_edu_parts_bool,  % Set part as topmost structure element
  parts .initial:n = false
}						

\end{MacroCode}
\end{option}


\subsubsection{Lists}

\begin{option}{listarraysep}
\begin{option}{listarraymargin}
These options affect to lists and arrays:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  listarraysep .dim_gset:N = \g_edu_listarraysep_dim,
  listarraymargin .dim_gset:N = \g_edu_listarraymargin_dim,
}

\__edu_keys_initial:n {listarraysep = 0.5em}
\__edu_keys_initial:n {listarraymargin = 0.5em}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Metadata}


\begin{option}{authorstyle}
\begin{option}{classstyle}
\begin{option}{datestyle}
\begin{option}{emailstyle}
\begin{option}{fieldstyle}
\begin{option}{groupstyle}
\begin{option}{licensestyle}
\begin{option}{shortstyle}
\begin{option}{subjectstyle}
\begin{option}{timestampstyle}
\begin{option}{titlestyle}
\begin{option}{titlenumbersep}
\begin{option}{versionstyle}
\begin{option}{timestamptime}
\begin{option}{timestamptimeseparator}
\begin{option}{timestampdateseparator}
\begin{option}{timestampdatetimeseparator}
Styles of metadata:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  authorstyle .tl_gset:N = \g_edu_authorstyle_tl,
  authorstyle .initial:n = \large\sffamily\scshape,
  classstyle .tl_gset:N = \g_edu_classstyle_tl,
  classstyle .initial:n = \large\sffamily,
  datestyle .tl_gset:N = \g_edu_datestyle_tl,
  datestyle .initial:n = \small\sffamily,
  emailstyle .tl_gset:N = \g_edu_emailstyle_tl,
  emailstyle .initial:n = \footnotesize\sffamily,
  fieldstyle .tl_gset:N = \g_edu_fieldstyle_tl,
  fieldstyle .initial:n = \large\sffamily,
  groupstyle .tl_gset:N = \g_edu_groupstyle_tl,
  groupstyle .initial:n = \Large\sffamily\bfseries,
  licensestyle .tl_gset:N = \g_edu_licensestyle_tl,
  licensestyle .initial:n = \small\sffamily,
  shortstyle .tl_gset:N = \g_edu_shortstyle_tl,
  shortstyle .initial:n = \Large\sffamily\bfseries,
  subjectstyle .tl_gset:N = \g_edu_subjectstyle_tl,
  subjectstyle .initial:n = \large\sffamily,
  subtitlestyle .tl_gset:N = \g_edu_subtitlestyle_tl,
  subtitlestyle .initial:n = \Large\sffamily\bfseries,
  timestampstyle .tl_gset:N = \g_edu_timestampstyle_tl,
  timestampstyle .initial:n = \small\sffamily,
  titlestyle .tl_gset:N = \g_edu_titlestyle_tl,
  titlestyle .initial:n = \LARGE\sffamily\bfseries,
  titlenumbersep .dim_gset:N = \g_edu_titlenumbersep_dim,
  titlenumbersep .initial:n = 0.5em,
  versionstyle .tl_gset:N = \g_edu_versionstyle_tl,
  versionstyle .initial:n = \small\sffamily,
  timestamptime .bool_gset:N = \g_edu_timestamptime_bool,
  timestamptime .initial:n = true,
  timestamptimeseparator .tl_gset:N = \g_edu_timestamptimeseparator_tl,
  timestamptimeseparator .initial:n = -,
  timestampdateseparator .tl_gset:N = \g_edu_timestampdateseparator_tl,
  timestampdateseparator .initial:n = -,
  timestampdatetimeseparator .tl_gset:N = \g_edu_timestampdatetimeseparator_tl,
  timestampdatetimeseparator .initial:n = -,
}

\__edu_keys_initial:n {
  titlenumbersep = 0.5em
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Title}


\begin{option}{shortfg}
\begin{option}{shortbg}
\begin{option}{titlefg}
\begin{option}{titlebg}
\begin{option}{groupfg}
\begin{option}{groupbg}
\begin{option}{titleskip}
\begin{option}{timestamptitle}
Options of title:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  shortfg .tl_gset:N = \g_edu_shortfg_tl,
  shortfg .initial:n = white,
  shortbg .tl_gset:N = \g_edu_shortbg_tl,
  shortbg .initial:n = black,
  titlefg .tl_gset:N = \g_edu_titlefg_tl,
  titlefg .initial:n = black,
  titlebg .tl_gset:N = \g_edu_titlebg_tl,
  titlebg .initial:n = white,
  groupfg .tl_gset:N = \g_edu_groupfg_tl,
  groupfg .initial:n = white,
  groupbg .tl_gset:N = \g_edu_groupbg_tl,
  groupbg .initial:n = black,
  titleskip .skip_gset:N = \g_edu_titleskip_skip,
  titleskip .initial:n = 1.75cm,
  timestamptitle .bool_gset:N = \g_edu_timestamptitle_bool,
  timestamptitle .initial:n = false,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Header and Footer}

\begin{option}{headerrulewidth}
\begin{option}{footer}
\begin{option}{pagecount}
\begin{option}{footskip}
\begin{option}{twoupfootskip}
\begin{option}{timestampfooter}
\begin{option}{transparencyfooter}
Options of header and footer:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  headerrulewidth .dim_gset:N = \g_edu_headerrulewidth_dim,  % Width of header rule
  headerrulewidth .initial:n = 0.5pt,
  footer .bool_gset:N = \g_edu_footer_bool,                   % Enable/disable footer
  footer .initial:n = true,
  pagecount .bool_gset:N = \g_edu_pagecount_bool,             % Enable/disable pagecount at footer
  pagecount .initial:n = true,
  footskip .dim_gset:N = \g_edu_footskip_dim,                % Skip to first baseline of  footer
  footskip .initial:n = 1cm,
  twoupfootskip .dim_gset:N = \g_edu_twoupfootskip_dim,      % Skip to first baseline of  footer in twoup-mode
  twoupfootskip .initial:n = 0.75cm,
  timestampfooter .bool_gset:N = \g_edu_timestampfooter_bool,
  timestampfooter .initial:n = false,
  transparencyfooter .bool_gset:N = \g_edu_transparencyfooter_bool,  % Enable/disable footer in transparency mode
  transparencyfooter .initial:n = true,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Inhaltsverzeichnis}


\begin{option}{exetoc}
Options of toc:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exetoc .bool_gset:N = \g_edu_exetoc_bool,  % Add (sub)exercises and (sub)solutions to toc?
  exetoc .initial:n = false,
}

\end{MacroCode}
\end{option}



\subsubsection{Aufzählungen, Nummerierungen}

\begin{option}{itemizefg}
\begin{option}{enumeratefg}
\begin{option}{descriptionfg}
Options of lists:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  itemizefg .tl_gset:N = \g_edu_itemizefg_tl,          % Color of itemize-labels
  itemizefg .initial:n = black,
  enumeratefg .tl_gset:N = \g_edu_enumeratefg_tl,      % Color of enumerate-labels
  enumeratefg .initial:n = black,
  descriptionfg .tl_gset:N = \g_edu_descriptionfg_tl,  % Color of description-labels
  descriptionfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}

\subsubsection{Parts, Überschriften, Unterüberschriften}

\begin{option}{partnumbersize}
\begin{option}{sectionnumbersize}
\begin{option}{subsectionnumbersize}
Sizes of sections:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  partnumbersize .tl_gset:N = \g_edu_partnumbersize_tl,              % Size of part numbers
  partnumbersize .initial:n = \Large,
  sectionnumbersize .tl_gset:N = \g_edu_sectionnumbersize_tl,        % Size of section numbers
  sectionnumbersize .initial:n = \normalsize,
  subsectionnumbersize .tl_gset:N = \g_edu_subsectionnumbersize_tl,  % Size of subsection numbers
  subsectionnumbersize .initial:n = \footnotesize,
  subsubsectionnumbersize .tl_gset:N = \g_edu_subsubsectionnumbersize_tl,  % Size of subsubsection numbers
  subsubsectionnumbersize .initial:n = \scriptsize,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\begin{option}{partnumberfg}
\begin{option}{partnumberbg}
\begin{option}{partfg}
\begin{option}{sectionnumberfg}
\begin{option}{sectionnumberbg}
\begin{option}{sectionfg}
\begin{option}{subsectionnumberfg}
\begin{option}{subsectionnumberbg}
\begin{option}{subsectionfg}
Styles of sections:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  partnumberfg .tl_gset:N = \g_edu_partnumberfg_tl,             % Foreground color of part numbers
  partnumberfg .initial:n = white,
  partnumberbg .tl_gset:N = \g_edu_partnumberbg_tl,             % Background color of part numbers
  partnumberbg .initial:n = black,
  partfg .tl_gset:N = \g_edu_partfg_tl,                         % Foreground color of parts
  partfg .initial:n = black,
  sectionnumberfg .tl_gset:N = \g_edu_sectionnumberfg_tl,       % Foreground color of section numbers
  sectionnumberfg .initial:n = white,
  sectionnumberbg .tl_gset:N = \g_edu_sectionnumberbg_tl,       % Background color of section numbers
  sectionnumberbg .initial:n = black,
  sectionfg .tl_gset:N = \g_edu_sectionfg_tl,                   % Foreground color of sections
  sectionfg .initial:n = black,
  subsectionnumberfg .tl_gset:N = \g_edu_subsectionnumberfg_tl, % Foreground color of subsection numbers
  subsectionnumberfg .initial:n = white,
  subsectionnumberbg .tl_gset:N = \g_edu_subsectionnumberbg_tl, % Background color of subsection numbers
  subsectionnumberbg .initial:n = black,
  subsectionfg .tl_gset:N = \g_edu_subsectionfg_tl,             % Foreground color of subsection
  subsectionfg .initial:n = black,
  subsubsectionnumberfg .tl_gset:N = \g_edu_subsubsectionnumberfg_tl, % Foreground color of subsubsection numbers
  subsubsectionnumberfg .initial:n = white,
  subsubsectionnumberbg .tl_gset:N = \g_edu_subsubsectionnumberbg_tl, % Background color of subsection numbers
  subsubsectionnumberbg .initial:n = black,
  subsubsectionfg .tl_gset:N = \g_edu_subsubsectionfg_tl,             % Foreground color of subsubsection
  subsubsectionfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Hyperref}

\begin{option}{colorlinks}
\begin{option}{linkfg}
\begin{option}{linkborderfg}
Options of hyperrefs:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  colorlinks .bool_gset:N = \g_edu_colorlinks_bool,
  colorlinks .initial:n = true,
  linkfg .tl_gset:N = \g_edu_linkfg_tl,
  linkfg .initial:n = black,
  linkborderfg .tl_gset:N = \g_edu_linkborderfg_tl,
  linkborderfg .initial:n = {1~0~0},
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\subsubsection{Siehe Abschnitt, siehe Abbildung, etc.}

\begin{option}{seelabel}
\begin{option}{seeappendixlabel}
\begin{option}{seeexerciselabel}
\begin{option}{seefigurelabel}
\begin{option}{seelistinglabel}
\begin{option}{seesectionlabel}
\begin{option}{seesolutionlabel}
\begin{option}{seelabelsep}
\begin{option}{seerefsep}
\begin{option}{seeleft}
\begin{option}{seeright}
Options \cs{see}-commands:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  seelabel .tl_gset:N = \g_edu_seelabel_tl,% Label of 'see'
  seelabel .initial:n = s.,
  seeappendixlabel .tl_gset:N = \g_edu_seeappendixlabel_tl,% Label of 'appendix'
  seeappendixlabel .initial:n = Anh.,
  seeexerciselabel .tl_gset:N = \g_edu_seeexerciselabel_tl,% Label of 'exercise'
  seeexerciselabel .initial:n = Aufg.,
  seefigurelabel .tl_gset:N = \g_edu_seefigurelabel_tl,      % Label of 'figure'
  seefigurelabel .initial:n = Abb.,
  seelistinglabel .tl_gset:N = \g_edu_seelistinglabel_tl,    % Label of 'listing'
  seelistinglabel .initial:n = List.,
  seesectionlabel .tl_gset:N = \g_edu_seesectionlabel_tl,    % Label of 'section'
  seesectionlabel .initial:n = Abschn.,
  seesolutionlabel .tl_gset:N = \g_edu_seesolutionlabel_tl,  % Label of 'solution'
  seesolutionlabel .initial:n = L\"os.,
  seelabelsep .tl_gset:N = \g_edu_seelabelsep_tl,            % First seperator of 'see'
  seelabelsep .initial:n = {\,},
  seerefsep .tl_gset:N = \g_edu_seerefsep_tl,                % Second seperator of 'see'
  seerefsep .initial:n = {\,},
  seeleft .tl_gset:N = \g_edu_seeleft_tl,                    % Left delimiter of 'see'
  seeleft .initial:n = (,
  seeright .tl_gset:N = \g_edu_seeright_tl,                  % Right delimiter of 'see'
  seeright .initial:n = ),
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Aufgaben angeben: S.\,X, Nr.\,Y}

\begin{option}{pglabel}
\begin{option}{nolabel}
Options exercise references (in books):
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  pglabel .tl_gset:N = \g_edu_pglabel_tl,  % Label of page in 'pgno'
  pglabel .initial:n = S.,
  nolabel .tl_gset:N = \g_edu_nolabel_tl,  % Label of number in 'pgno'
  nolabel .initial:n = Nr.,
}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Kasten \emph{Bitte wenden}}

\begin{option}{ptolabel}
\begin{option}{ptosymbol}
Options for the appearence of the 'please turn over' (p. t. o.) label:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  ptolabel .tl_gset:N = \g_edu_ptolabel_tl,
  ptolabel .initial:n = Bitte~wenden\hspace*{0.25em},
  ptolabelstyle .tl_gset:N = \g_edu_ptolabelstyle_tl,
  ptolabelstyle .initial:n = \scriptsize\sffamily,
  ptosymbol .tl_gset:N = \g_ptosymbol_tl,
  ptosymbol .initial:n = $\blacktriangleright$,
  ptosymbolstyle .tl_gset:N = \g_ptosymbolstyle_tl,
  ptosymbolstyle .initial:n = \small\sffamily,
}

\end{MacroCode}
\end{option}
\end{option}



\subsubsection{Formatierungen}

\begin{option}{cemphfg}
Formatting options:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  cemphfg .tl_gset:N = \g_edu_cemphfg_tl,  % Color of cemph
  cemphfg .initial:n = wuSemiDarkRed,
}

\end{MacroCode}
\end{option}


\subsubsection{Symbole}

\begin{option}{ccscale}
\begin{option}{actionfg}
\begin{option}{speechfg}
Various options of symbols:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  ccscale .fp_gset:N = \g_edu_ccscale_fp,    % Scaling Creative Commons Icons
  ccscale .initial:n = 1.5,
  actionfg .tl_gset:N = \g_edu_actionfg_tl,  % Color of action-symbol
  actionfg .initial:n = black,
  speechfg .tl_gset:N = \g_edu_speechfg_tl,  % Color of speech-symbol
  speechfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}



\subsubsection{Linien}

\begin{option}{cemphfg}
Rule options:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  ruleh .dim_gset:N = \g_edu_ruleh_dim,
  ruleh .initial:n = 0.4pt,
  rulehvoffset .dim_gset:N = \g_edu_rulehvoffset_dim,
  rulehvoffset .initial:n = -4pt,
}

\end{MacroCode}
\end{option}


\subsubsection{Themes}

\begin{option}{colortheme}
\begin{option}{styletheme}
Option of color- and styletheme:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  colortheme .tl_gset:N = \g_edu_colortheme_tl, % Color zheme
  colortheme .initial:n =,
  styletheme .tl_gset:N = \g_edu_styletheme_tl, % Style theme
  styletheme .initial:n =,
}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Grafik}

\begin{option}{graphicspath}
\begin{option}{tikzpath}
Options of graphics:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  graphicspath .tl_gset:N = \g_edu_graphicspath_tl,  % Path to graphics
  graphicspath .initial:n = img/,
  tikzpath .tl_gset:N = \g_edu_tikzpath_tl,          % Path to pgf-files (for tikz)
  tikzpath .initial:n = tikz/,
}

\end{MacroCode}
\end{option}
\end{option}



\subsubsection{Aufgaben}

\begin{option}{exelabel}
\begin{option}{subexelabel}
Labels of (sub-)exercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exelabel .tl_gset:N = \g_edu_exelabel_tl,
  exelabel .initial:n = Aufgabe,
  subexelabel .tl_gset:N = \g_edu_subexelabel_tl,
  subexelabel .initial:n =,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{exenumberstyle}
\begin{option}{exenumberseparator}
\begin{option}{exelabelstyle}
\begin{option}{exestyle}
\begin{option}{exepointsstyle}
Style of exercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exenumberstyle .tl_gset:N = \g_edu_exenumberstyle_tl,
  exenumberstyle .initial:n = \footnotesize,
  exenumberseparator .tl_gset:N = \g_edu_exenumberseparator_tl,
  exenumberseparator .initial:n = .,
  exelabelstyle .tl_gset:N = \g_edu_exelabelstyle_tl,
  exelabelstyle .initial:n = \large\bfseries\sffamily,
  exestyle .tl_gset:N = \g_edu_exestyle_tl,
  exestyle .initial:n = \large\sffamily,
  exepointsstyle .tl_gset:N = \g_edu_exepointsstyle_tl,
  exepointsstyle .initial:n = \bfseries\sffamily,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{exenumberfg}
\begin{option}{exenumberbg}
\begin{option}{exelabelfg}
\begin{option}{exelabelbg}
\begin{option}{exefg}
\begin{option}{exebg}
\begin{option}{exepointsfg}
\begin{option}{exedifffg}
\begin{option}{execalcfg}
Colors of exercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exenumberfg .tl_gset:N = \g_edu_exenumberfg_tl,
  exenumberfg .initial:n = white,
  exenumberbg .tl_gset:N = \g_edu_exenumberbg_tl,
  exenumberbg .initial:n = black,
  exelabelfg .tl_gset:N = \g_edu_exelabelfg_tl,
  exelabelfg .initial:n = black,
  exelabelbg .tl_gset:N = \g_edu_exelabelbg_tl,
  exelabelbg .initial:n = white,
  exefg .tl_gset:N = \g_edu_exefg_tl,
  exefg .initial:n = black,
  exebg .tl_gset:N = \g_edu_exebg_tl,
  exebg .initial:n = white,
  exepointsfg .tl_gset:N = \g_edu_exepointsfg_tl,
  exepointsfg .initial:n = black,
  execalcfg .tl_gset:N = \g_edu_execalcfg_tl,
  execalcfg .initial:n = lightgray,
  exedifffg .tl_gset:N = \g_edu_exedifffg_tl,
  exedifffg .initial:n = lightgray,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{subexenumberstyle}
\begin{option}{subexenumberseparator}
\begin{option}{subexelabelstyle}
\begin{option}{subexestyle}
\begin{option}{subexepointsstyle}
Style of subexercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  subexenumberstyle .tl_gset:N = \g_edu_subexenumberstyle_tl,
  subexenumberstyle .initial:n = \scriptsize,
  subexenumberseparator .tl_gset:N = \g_edu_subexenumberseparator_tl,
  subexenumberseparator .initial:n =,
  subexelabelstyle .tl_gset:N = \g_edu_subexelabelstyle_tl,
  subexelabelstyle .initial:n = \bfseries\sffamily,
  subexestyle .tl_gset:N = \g_edu_subexestyle_tl,
  subexestyle .initial:n = \sffamily,
  subexepointsstyle .tl_gset:N = \g_edu_subexepointsstyle_tl,
  subexepointsstyle .initial:n = \small\bfseries\sffamily,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{subexenumberfg}
\begin{option}{subexenumberbg}
\begin{option}{subexelabelfg}
\begin{option}{subexelabelbg}
\begin{option}{subexefg}
\begin{option}{subexebg}
\begin{option}{subexepointsfg}
Colors of subexercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  subexenumberfg .tl_gset:N = \g_edu_subexenumberfg_tl,
  subexenumberfg .initial:n = white,
  subexenumberbg .tl_gset:N = \g_edu_subexenumberbg_tl,
  subexenumberbg .initial:n = black,
  subexelabelfg .tl_gset:N = \g_edu_subexelabelfg_tl,
  subexelabelfg .initial:n = black,
  subexelabelbg .tl_gset:N = \g_edu_subexelabelbg_tl,
  subexelabelbg .initial:n = white,
  subexefg .tl_gset:N = \g_edu_subexefg_tl,
  subexefg .initial:n = black,
  subexebg .tl_gset:N = \g_edu_subexebg_tl,
  subexebg .initial:n = white,
  subexepointsfg .tl_gset:N = \g_edu_subexepointsfg_tl,
  subexepointsfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{multiexenumberstyle}
\begin{option}{multiexepointsstyle}
Style of multiexe-environments:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  multiexenumberstyle .tl_gset:N = \g_edu_multiexenumberstyle_tl,
  multiexenumberstyle .initial:n = \sffamily,
  multiexepointsstyle .tl_gset:N = \g_edu_multiexepointsstyle_tl,
  multiexepointsstyle .initial:n = \sffamily\footnotesize\bfseries,
}

\end{MacroCode}
\end{option}
\end{option}


\begin{option}{multiexenumberfg}
\begin{option}{multiexepointsfg}
Colors of multiexe-environments:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  multiexenumberfg .tl_gset:N = \g_edu_multiexenumberfg_tl,
  multiexenumberfg .initial:n = black,
  multiexepointsfg .tl_gset:N = \g_edu_multiexepointsfg_tl,
  multiexepointsfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}


\begin{option}{multiexenumberleft}
\begin{option}{multiexenumberright}
Colors of multiexe-environments:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  multiexenumberleft .tl_gset:N = \g_edu_multiexenumberleft_tl,
  multiexenumberleft .initial:n =,
  multiexenumberright .tl_gset:N = \g_edu_multiexenumberright_tl,
  multiexenumberright .initial:n = ),
}

\end{MacroCode}
\end{option}
\end{option}


\begin{option}{exepointslabel}
\begin{option}{subexepointslabel}
\begin{option}{multiexepointslabel}
Labels of points:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exepointslabel .tl_gset:N = \g_edu_exepointslabel_tl,
  exepointslabel .initial:n = \,P,
  subexepointslabel .tl_gset:N = \g_edu_subexepointslabel_tl,
  subexepointslabel .initial:n = \,P,
  multiexepointslabel .tl_gset:N = \g_edu_multiexepointslabel_tl,
  multiexepointslabel .initial:n =,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\begin{option}{exepointsleft}
\begin{option}{exepointsright}
\begin{option}{subexepointsleft}
\begin{option}{subexepointsright}
\begin{option}{multiexepointsleft}
\begin{option}{multiexepointsright}
Delimiter of points:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exepointsleft .tl_gset:N = \g_edu_exepointsleft_tl,
  exepointsleft .initial:n = [,
  exepointsright .tl_gset:N = \g_edu_exepointsright_tl,
  exepointsright .initial:n = ],
  subexepointsleft .tl_gset:N = \g_edu_subexepointsleft_tl,
  subexepointsleft .initial:n = [,
  subexepointsright .tl_gset:N = \g_edu_subexepointsright_tl,
  subexepointsright .initial:n = ],
  multiexepointsleft .tl_gset:N = \g_edu_multiexepointsleft_tl,
  multiexepointsleft .initial:n = [,
  multiexepointsright .tl_gset:N = \g_edu_multiexepointsright_tl,
  multiexepointsright .initial:n = ],
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{exepointsachieved}
\begin{option}{subexepointsachieved}
\begin{option}{exepointsachievedspace}
\begin{option}{subexepointsachievedspace}
\begin{option}{exepointsachievedsep}
\begin{option}{subexepointsachievedsep}
Achieved points:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exepointsachieved .bool_gset:N = \g_edu_exepointsachieved_bool,
  exepointsachieved .initial:n = false,
  subexepointsachieved .bool_gset:N = \g_edu_subexepointsachieved_bool,
  subexepointsachieved .initial:n = false,
  exepointsachievedspace .dim_gset:N = \g_edu_exepointsachievedspace_dim,
  exepointsachievedspace .initial:n = 0.6cm,
  subexepointsachievedspace .dim_gset:N = \g_edu_subexepointsachievedspace_dim,
  subexepointsachievedspace .initial:n = 0.6cm,
  exepointsachievedsep .tl_gset:N = \g_edu_exepointsachievedsep_tl,
  exepointsachievedsep .initial:n = /\,,
  subexepointsachievedsep .tl_gset:N = \g_edu_subexepointsachievedsep_tl,
  subexepointsachievedsep .initial:n = /\,,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{exebeforeskip}
\begin{option}{exeafterskip}
\begin{option}{subexebeforeskip}
\begin{option}{subexeafterskip}
\begin{option}{arraybeforeskip}
\begin{option}{arrayafterskip}
Skips before and after (sub-)exercises:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exebeforeskip .dim_gset:N = \g_edu_exebeforeskip_dim,
  exeafterskip .dim_gset:N = \g_edu_exeafterskip_dim,
  subexebeforeskip .dim_gset:N = \g_edu_subexebeforeskip_dim,
  subexeafterskip .dim_gset:N = \g_edu_subexeafterskip_dim,
  arraybeforeskip .dim_gset:N = \g_edu_arraybeforeskip_dim,
  arrayafterskip .dim_gset:N = \g_edu_arrayafterskip_dim,
}

\__edu_keys_initial:n {
  exebeforeskip = 2.25ex,
  exeafterskip = 0.5ex,
  subexebeforeskip = 1.5ex,
  subexeafterskip = 0.5ex,
  arraybeforeskip = 0.5\baselineskip,
  arrayafterskip= 0.5\baselineskip
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Lösungen}

\begin{option}{sollabel}
\begin{option}{subsollabel}
Labels of (sub-)solutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  sollabel .tl_gset:N = \g_edu_sollabel_tl,
  sollabel .initial:n = {L\"osung},
  subsollabel .tl_gset:N = \g_edu_subsollabel_tl,
  subsollabel .initial:n = ,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{solnumberstyle}
\begin{option}{solnumberseparator}
\begin{option}{sollabelstyle}
\begin{option}{solstyle}
Style of solutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  solnumberstyle .tl_gset:N = \g_edu_solnumberstyle_tl,
  solnumberstyle .initial:n = \footnotesize,
  solnumberseparator .tl_gset:N = \g_edu_solnumberseparator_tl,
  solnumberseparator .initial:n = .,
  sollabelstyle .tl_gset:N = \g_edu_sollabelstyle_tl,
  sollabelstyle .initial:n = \large\bfseries\sffamily,
  solstyle .tl_gset:N = \g_edu_solstyle_tl,
  solstyle .initial:n = \large\sffamily,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{solnumberfg}
\begin{option}{solnumberbg}
\begin{option}{sollabelfg}
\begin{option}{sollabelbg}
\begin{option}{solfg}
\begin{option}{solbg}
Colors of solutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  solnumberfg .tl_gset:N = \g_edu_solnumberfg_tl,
  solnumberfg .initial:n = white,
  solnumberbg .tl_gset:N = \g_edu_solnumberbg_tl,
  solnumberbg .initial:n = black,
  sollabelfg .tl_gset:N = \g_edu_sollabelfg_tl,
  sollabelfg .initial:n = black,
  sollabelbg .tl_gset:N = \g_edu_sollabelbg_tl,
  sollabelbg .initial:n = white,
  solfg .tl_gset:N = \g_edu_solfg_tl,
  solfg .initial:n = black,
  solbg .tl_gset:N = \g_edu_solbg_tl,
  solbg .initial:n = white,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{subsolnumberstyle}
\begin{option}{subsolnumberseparator}
\begin{option}{subsollabelstyle}
\begin{option}{subsolstyle}
Style of subsolutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  subsolnumberstyle .tl_gset:N = \g_edu_subsolnumberstyle_tl,
  subsolnumberstyle .initial:n = \scriptsize,
  subsolnumberseparator .tl_gset:N = \g_edu_subsolnumberseparator_tl,
  subsolnumberseparator .initial:n = ,
  subsollabelstyle .tl_gset:N = \g_edu_subsollabelstyle_tl,
  subsollabelstyle .initial:n = \bfseries\sffamily,
  subsolstyle .tl_gset:N = \g_edu_subsolstyle_tl,
  subsolstyle .initial:n = \sffamily,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{subsolnumberfg}
\begin{option}{subsolnumberbg}
\begin{option}{subsollabelfg}
\begin{option}{subsollabelbg}
\begin{option}{subsolfg}
\begin{option}{subsolbg}
Colors of subsolutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  subsolnumberfg .tl_gset:N = \g_edu_subsolnumberfg_tl,
  subsolnumberfg .initial:n = white,
  subsolnumberbg .tl_gset:N = \g_edu_subsolnumberbg_tl,
  subsolnumberbg .initial:n = black,
  subsollabelfg .tl_gset:N = \g_edu_subsollabelfg_tl,
  subsollabelfg .initial:n = black,
  subsollabelbg .tl_gset:N = \g_edu_subsollabelbg_tl,
  subsollabelbg .initial:n = white,
  subsolfg .tl_gset:N = \g_edu_subsolfg_tl,
  subsolfg .initial:n = black,
  subsolbg .tl_gset:N = \g_edu_subsolbg_tl,
  subsolbg .initial:n = white,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{solbeforeskip}
\begin{option}{solafterskip}
\begin{option}{subsolbeforeskip}
\begin{option}{subsolafterskip}
Skips before and after (sub-)solutions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  solbeforeskip .dim_gset:N = \g_edu_solbeforeskip_dim,
  solafterskip .dim_gset:N = \g_edu_solafterskip_dim,
  subsolbeforeskip .dim_gset:N = \g_edu_subsolbeforeskip_dim,
  subsolafterskip .dim_gset:N = \g_edu_subsolafterskip_dim,
}

\__edu_keys_initial:n {
  solbeforeskip = 2.25ex,
  solafterskip = 0.5ex,
  subsolbeforeskip = 1.5ex,
  subsolafterskip = 0.5ex,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}



\subsubsection{Lösungen in Aufgaben}

\begin{option}{showresults}
\begin{option}{resultresetmultiexe}
\begin{option}{resultfg}
\begin{option}{resultrule}
\begin{option}{resultrulelength}
\begin{option}{resultrulevoffset}
\begin{option}{resultboxwidth}
\begin{option}{resultboxheight}
\begin{option}{resultrulevoffset}
\begin{option}{resulttitlelabel}
\begin{option}{resulttitlelabellabel}
\begin{option}{resulttitlelabelstyle}
\begin{option}{resulttitlelabelfg}
\begin{option}{resultlistinglabel}
Options for typesetting results:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  showresults .bool_gset:N = \g_edu_showresults_bool,
  showresults .initial:n = false,
  resultresetmultiexe .bool_gset:N = \g_edu_resultresetmultiexe_bool,
  showresults .initial:n = false,
  resultfg .tl_gset:N = \g_edu_resultfg_tl,
  resultfg .initial:n = wuRed,
  resultrule .dim_gset:N = \g_edu_resultrule_dim,
  resultrule .initial:n = 0.4pt,
  resultrulelength .dim_gset:N = \g_edu_resultrulelength_dim,
  resultrulelength .initial:n = 2cm,
  resultrulevoffset .dim_gset:N = \g_edu_resultrulevoffset_dim,
  resultrulevoffset .initial:n = -4pt,
  resultboxwidth .dim_gset:N = \g_edu_resultboxwidth_dim,
  resultboxwidth .initial:n = 2cm,
  resultboxheight .dim_gset:N = \g_edu_resultboxheight_dim,
  resultboxheight .initial:n = 0.65cm,
  resultrulevoffset .dim_gset:N = \g_edu_resultboxvoffset_dim,
  resultrulevoffset .initial:n = -5pt,
  resulttitlelabel .bool_gset:N = \g_edu_resulttitlelabel_bool,
  resulttitlelabel .initial:n = true,
  resulttitlelabellabel .tl_gset:N = \g_edu_resulttitlelabellabel_tl,
  resulttitlelabellabel .initial:n = $\star$,
  resulttitlelabelstyle .tl_gset:N = \g_edu_resulttitlelabelstyle_tl,
  resulttitlelabelstyle .initial:n = \LARGE,
  resulttitlelabelfg .tl_gset:N = \g_edu_resulttitlelabelfg_tl,
  resulttitlelabelfg .initial:n = black,
  resultlistinglabel .tl_gset:N = \g_edu_resultlistinglabel_tl,
  resultlistinglabel .initial:n = L\"osung,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\subsubsection{Fragen}

\begin{option}{questlabel}
\begin{option}{questpointslabel}
Label of questions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questlabel .tl_gset:N = \g_edu_questlabel_tl,
  questlabel .initial:n = Frage,
  questpointslabel .tl_gset:N = \g_edu_questpointslabel_tl,
  questpointslabel .initial:n = \,P,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{questlabelstyle}
\begin{option}{queststyle}
\begin{option}{questpointsstyle}
Style of questions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questlabelstyle .tl_gset:N = \g_edu_questlabelstyle_tl,
  questlabelstyle .initial:n = \sffamily\bfseries\small,
  queststyle .tl_gset:N = \g_edu_queststyle_tl,
  queststyle .initial:n = \sffamily\small,
  questpointsstyle .tl_gset:N = \g_edu_questpointsstyle_tl,
  questpointsstyle .initial:n = \sffamily\small,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}

\begin{option}{questlabelfg}
\begin{option}{questmclabelfg}
Colors of questions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questlabelfg .tl_gset:N = \g_edu_questlabelfg_tl,
  questlabelfg .initial:n = black,
  questmclabelfg .tl_gset:N = \g_edu_questmclabelfg_tl,
  questmclabelfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{questpointsleft}
\begin{option}{questpointsright}
Delimiter of question points:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questpointsleft .tl_gset:N = \g_edu_questpointsleft_tl,
  questpointsleft .initial:n = [,
  questpointsright .tl_gset:N = \g_edu_questpointsright_tl,
  questpointsright .initial:n = ],
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{questpointssep}
\begin{option}{questsep}
Space before and after question points:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questpointssep .dim_gset:N = \g_edu_questpointssep_dim,
  questpointssep .initial:n = 0.25em,
  questsep .dim_gset:N = \g_edu_questsep_dim,
  questsep .initial:n = 0.5em,
}

\__edu_keys_initial:n {questpointssep = 0.25em}
\__edu_keys_initial:n {questsep = 0.5em}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{questbeforeskip}
\begin{option}{questafterskip}
Skips before and after questions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  questbeforeskip .dim_gset:N = \g_edu_questbeforeskip_dim,
  questbeforeskip .initial:n = 1ex,
  questafterskip .dim_gset:N = \g_edu_questafterskip_dim,
  questafterskip .initial:n = 0ex,
}

\__edu_keys_initial:n {questbeforeskip = 1ex}
\__edu_keys_initial:n {questafterskip = 0ex}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Notizen}


\begin{option}{shownotes}
\begin{option}{notetstyle}
\begin{option}{notehrule}
\begin{option}{notetfg}
\begin{option}{notehrfg}
Skips before and after questions:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  shownotes .bool_gset:N = \g_edu_shownotes_bool,
  shownotes .initial:n = true,
  notetstyle .tl_gset:N = \g_edu_notetstyle_tl,
  notetstyle .initial:n = \sffamily,
  notehrule .dim_gset:N = \g_edu_notehrule_dim,
  notehrule .initial:n = 0.4pt,
  notetfg .tl_gset:N = \g_edu_notetfg_tl,
  notetfg .initial:n = wuRed,
  notehrfg .tl_gset:N = \g_edu_notehrfg_tl,
  notehrfg .initial:n = wuRed,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}




\subsubsection{Unterrichtsablauf}

First, options of the timetable:

\begin{option}{ttendtime}
Display ending time of lesson:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  ttendtime .bool_gset:N = \g_edu_ttendtime_bool,
  ttendtime .initial:n = true,
}

\end{MacroCode}
\end{option}

\begin{option}{tttimelabel}
\begin{option}{ttstagelabel}
\begin{option}{ttactivitylabel}
\begin{option}{ttmethodlabel}
\begin{option}{ttmedialabel}
Column labels:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  tttimelabel .tl_gset:N = \g_edu_tttimelabel_tl,
  tttimelabel .initial:n = Zeit,
  ttstagelabel .tl_gset:N = \g_edu_ttstagelabel_tl,
  ttstagelabel .initial:n = Phase,
  ttactivitylabel .tl_gset:N = \g_edu_ttactivitylabel_tl,
  ttactivitylabel .initial:n = Ablauf,
  ttmethodlabel .tl_gset:N = \g_edu_ttmethodlabel_tl,
  ttmethodlabel .initial:n = Methoden,
  ttmedialabel .tl_gset:N = \g_edu_ttmedialabel_tl,
  ttmedialabel .initial:n = Medien/Material,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{tttimewidth}
\begin{option}{ttstagewidth}
\begin{option}{ttmethodwidth}
\begin{option}{ttmediawidth}
Column widths (normal):
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  tttimewidth .dim_gset:N = \g_edu_tttimewidth_dim,
  tttimewidth .initial:n = 1cm,
  ttstagewidth .dim_gset:N = \g_edu_ttstagewidth_dim,
  ttstagewidth .initial:n = 2.25cm,
  ttmethodwidth .dim_gset:N = \g_edu_ttmethodwidth_dim,
  ttmethodwidth .initial:n = 2cm,
  ttmediawidth .dim_gset:N = \g_edu_ttmediawidth_dim,
  ttmediawidth .initial:n = 2.75cm,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{tttimewidthlscape}
\begin{option}{ttstagewidthlscape}
\begin{option}{ttmethodwidthlscape}
\begin{option}{ttmediawidthlscape}
Column widths (landscape):
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  tttimewidthlscape .dim_gset:N = \g_edu_tttimewidthlscape_dim,
  tttimewidthlscape .initial:n = 1cm,
  ttstagewidthlscape .dim_gset:N = \g_edu_ttstagewidthlscape_dim,
  ttstagewidthlscape .initial:n = 3.5cm,
  ttmethodwidthlscape .dim_gset:N = \g_edu_ttmethodwidthlscape_dim,
  ttmethodwidthlscape .initial:n = 3.5cm,
  ttmediawidthlscape .dim_gset:N = \g_edu_ttmediawidthlscape_dim,
  ttmediawidthlscape .initial:n = 3.5cm,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{ttshowtime}
\begin{option}{ttentrytimelabel}
Various options:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  ttshowtime .bool_gset:N = \g_edu_ttshowtime_bool,
  ttshowtime .initial:n = true,
  ttentrytimelabel .tl_gset:N = \g_edu_ttentrytimelabel_tl,
  ttentrytimelabel .initial:n = ,
  ttdisablehyphenation .bool_gset:N = \g_edu_ttdisablehyphenation_bool,
  ttdisablehyphenation .initial:n = true,
}

\end{MacroCode}
\end{option}
\end{option}


Options of sequence-lists:

\begin{option}{seqteacherlabel}
\begin{option}{seqstudentlabel}
Labels of teachers and students:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  seqteacherlabel .tl_gset:N = \g_edu_seqteacherlabel_tl,
  seqteacherlabel .initial:n = L,
  seqstudentlabel .tl_gset:N = \g_edu_seqstudentlabel_tl,
  seqstudentlabel .initial:n = S,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{seqteacherstyle}
\begin{option}{seqetudentstyle}
Style of labels:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  seqteacherstyle .tl_gset:N = \g_edu_seqteacherstyle_tl,
  seqteacherstyle .initial:n = \sffamily\bfseries,
  seqetudentstyle .tl_gset:N = \g_edu_seqetudentstyle_tl,
  seqetudentstyle .initial:n = \sffamily\bfseries,
}

\end{MacroCode}
\end{option}
\end{option}

\begin{option}{seqteacherfg}
\begin{option}{seqstudentfg}
Colors of labels:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  seqteacherfg .tl_gset:N = \g_edu_seqteacherfg_tl,
  seqteacherfg .initial:n = black,
  seqstudentfg .tl_gset:N = \g_edu_seqstudentfg_tl,
  seqstudentfg .initial:n = black,
}

\end{MacroCode}
\end{option}
\end{option}


\subsubsection{Tafelbild}

\begin{option}{bbstyle}
\begin{option}{bbfontsize}
\begin{option}{bbbaselineoffset}
\begin{option}{bbheight}
General options of blackboard:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  bbstyle .tl_gset:N = \g_edu_bbstyle_tl,
  bbstyle .initial:n = \sffamily,
  bbfontsize .dim_gset:N = \g_edu_bbfontsize_dim,
  bbfontsize .initial:n = 8pt,
  bbbaselineoffset .dim_gset:N = \g_edu_bbbaselineoffset_dim,
  bbbaselineoffset .initial:n = 1pt,
  bbheight .dim_gset:N = \g_edu_bbheight_dim,
  bbheight .initial:n = 0.25\linewidth - 2\fboxsep,
}

\__edu_keys_initial:n {bbheight = 0.25\linewidth - 2\fboxsep}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{bbsectionstyle}
\begin{option}{bbsubsectionstyle}
\begin{option}{bbsubsubsectionstyle}
Title style options of blackboard:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  bbsectionstyle .tl_gset:N = \g_edu_bbsectionstyle_tl,
  bbsectionstyle .initial:n = \normalsize\scshape\color{wuRed},
  bbsubsectionstyle .tl_gset:N = \g_edu_bbsubsectionstyle_tl,
  bbsubsectionstyle .initial:n = \small\scshape,
  bbsubsubsectionstyle .tl_gset:N = \g_edu_bbsubsubsectionstyle_tl,
  bbsubsubsectionstyle .initial:n = \ulined,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\subsubsection{Klassenarbeiten}

First, we define the options for the exam title:

\begin{option}{examtitlefieldilabel}
\begin{option}{examtitlefieldiilabel}
\begin{option}{examtitlefieldiiilabel}
\begin{option}{examtitlegraphiclabel}
Options for configuring the labeling:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  examtitlefieldilabel .tl_gset:N = \g_edu_examtitlefieldilabel_tl,
  examtitlefieldilabel .initial:n = Nachname,
  examtitlefieldiilabel .tl_gset:N = \g_edu_examtitlefieldiilabel_tl,
  examtitlefieldiilabel .initial:n = Vorname,
  examtitlefieldiiilabel .tl_gset:N = \g_edu_examtitlefieldiiilabel_tl,
  examtitlefieldiiilabel .initial:n = ,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{examtitlefieldsep}
\begin{option}{examtitlefieldiwidth}
\begin{option}{examtitlefieldiiwidth}
\begin{option}{examtitlefieldiiiwidth}
\begin{option}{examtitlegraphicsscale}
\begin{option}{examtitlegraphicsheight}
Options for configuring the spacing:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  examtitlefieldsep .dim_gset:N = \g_edu_examtitlefieldsep_dim,
  examtitlefieldsep .initial:n = 0.75cm,
  examtitlefieldiwidth .dim_gset:N = \g_edu_examtitlefieldiwidth_dim,
  examtitlefieldiwidth .initial:n = 5.5cm,
  examtitlefieldiiwidth .dim_gset:N = \g_edu_examtitlefieldiiwidth_dim,
  examtitlefieldiiwidth .initial:n = 5.5cm,
  examtitlefieldiiiwidth .dim_gset:N = \g_edu_examtitlefieldiiiwidth_dim,
  examtitlefieldiiiwidth .initial:n = 0cm,
  examtitlegraphicsscale .fp_gset:N = \g_edu_examtitlegraphicsscale_fp,
  examtitlegraphicsscale .initial:n = 0.075,
  examtitlegraphicsheight .dim_gset:N = \g_edu_examtitlegraphicsheight_dim,
  examtitlegraphicsheight .initial:n = 2cm,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

Now, the options for the result box are defined:

\begin{option}{exampointstabletype}
By default, the tabular for achieved points in exams spread over a fix width (\texttt{x}). In some cases (e. g. only a few exercises), this doesn't look good an \texttt{c} should be used, which leads to a tabular of minimal width.
\begin{MacroCode}{class}
\tl_new:N \g_edu_exampointstabletype_tl

\keys_define:nn {edu} {
  exampointstabletype .choices:nn = {
    X, C
  }{
    \tl_gset:NV \g_edu_exampointstabletype_tl \l_keys_choice_tl
  },
%  exampointstabletype .choice_code:n = {
%    \tl_gset:NV \g_edu_exampointstabletype_tl \l_keys_choice_tl
%  },
%  exampointstabletype .generate_choices:n = {
%    X,
%    C
%  },
  exampointstabletype .initial:n = X,
  exampointssecondmark .bool_gset:N = \g_edu_exampointssecondmark_bool,    % Print secondary mark
  exampointssecondmark .initial:n = true,
  exampointssignature .bool_gset:N = \g_edu_exampointssignature_bool,    % Print field for signature
  exampointssignature .initial:n = true,
}

\end{MacroCode}
\end{option}


\begin{option}{exampointsmarklabel}
\begin{option}{exampointsoflabel}
\begin{option}{exampointsaveragelabel}
\begin{option}{exampointssignaturelabel}
Options for configuring the exam results:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exampointsmarklabel .tl_gset:N = \g_edu_exampointsmarklabel_tl,
  exampointsmarklabel .initial:n = Note,
  exampointssecondmarklabel .tl_gset:N = \g_edu_exampointssecondmarklabel_tl,
  exampointssecondmarklabel .initial:n = M\"undlich,
  exampointsoflabel .tl_gset:N = \g_edu_exampointsoflabel_tl,
  exampointsoflabel .initial:n = von,
  exampointsaveragelabel .tl_gset:N = \g_edu_exampointsaveragelabel_tl,
  exampointsaveragelabel .initial:n = $\varnothing$,
  exampointssignaturelabel .tl_gset:N = \g_edu_exampointssignaturelabel_tl,
  exampointssignaturelabel .initial:n = Unterschrift~Erziehungberechtigte(r),
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}


\begin{option}{exampointstablelabel}
\begin{option}{exampointstableexelabel}
\begin{option}{exampointstablemaxlabel}
\begin{option}{exampointstableachlabel}
\begin{option}{exampointstablesumlabel}
Options for configuring the tabular of exam results:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exampointstablelabel .tl_gset:N = \g_edu_exampointstablelabel_tl,
  exampointstablelabel .initial:n = Punkteverteilung,
  exampointstableexelabel .tl_gset:N = \g_edu_exampointstableexelabel_tl,
  exampointstableexelabel .initial:n = Aufg.,
  exampointstablemaxlabel .tl_gset:N = \g_edu_exampointstablemaxlabel_tl,
  exampointstablemaxlabel .initial:n = Max.~P.,
  exampointstableachlabel .tl_gset:N = \g_edu_exampointstableachlabel_tl,
  exampointstableachlabel .initial:n = Err.~P.,
  exampointstablesumlabel .tl_gset:N = \g_edu_exampointstablesumlabel_tl,
  exampointstablesumlabel .initial:n = $\sum$,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}
\end{option}
\end{option}

\begin{option}{exampointstablewidth}
Width of the points table.
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  exampointstablewidth .tl_gset:N = \g_edu_exampointstablewidth_tl,
  exampointstablewidth .initial:n = 0.625\linewidth,
}

%\__edu_keys_initial:n {exampointstablewidth = 0.625\linewidth}

\end{MacroCode}
\end{option}


\subsubsection{Informatik}

\begin{option}{lstnumberfg}
\begin{option}{lstkeywordfg}
\begin{option}{lstrulefg}
Options of listings:
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  lstnumberfg .tl_gset:N = \g_edu_lstnumberfg_tl,
  lstnumberfg .initial:n = black,
  lstkeywordfg .tl_gset:N = \g_edu_lstkeywordfg_tl,
  lstkeywordfg .initial:n = black,
  lstrulefg .tl_gset:N = \g_edu_lstrulefg_tl,
  lstrulefg .initial:n = gray,
  lstkeywordsprocessing .bool_gset:N = \g_edu_lstkeywordsprocessing_bool,
  lstkeywordsprocessing .initial:n = true,
}

\end{MacroCode}
\end{option}
\end{option}
\end{option}


\subsubsection{Kompatibilität}

Some important packages are incompatible. These options give the opportunity to load or choose between them.

\begin{option}{struktexqtree}
Options of listings:
\begin{MacroCode}{class}
\tl_new:N \g_edu_struktexqtree_tl

\keys_define:nn {edu} {
  struktexqtree .choices:nn = {
    struktex,
    tikz-qtree
  }{
    \tl_gset:NV \g_edu_struktexqtree_tl \l_keys_choice_tl
  },
%  struktexqtree .choice_code:n = {
%    \tl_gset:NV \g_edu_struktexqtree_tl \l_keys_choice_tl
%  },
%  struktexqtree .generate_choices:n = {  % option for choosing package
%    struktex,
%    tikz-qtree
%  },
  struktexqtree .initial:n = struktex
}

\end{MacroCode}
\end{option}


\begin{option}{usepackageverse}
The package \pkg{verse} needs to be loaded before \pkg{hyperref}. This can be done with the following option.
\begin{MacroCode}{class}
\keys_define:nn {edu} {
  usepackageverse .bool_gset:N = \g_edu_usepackage_verse_bool,    % option for loading package 'verse'
  usepackageverse .initial:n = false,
}

\end{MacroCode}
\end{option}


\subsubsection{Undefinierte Optionen}

\begin{MacroCode}{class}
\DeclareOption*{%
  \PassOptionsToClass{\CurrentOption}{scrartcl}%
}

\end{MacroCode}


\subsubsection{Optionen verarbeiten}

\begin{MacroCode}{class}
\ProcessOptions              % LaTeX-Basics (for \PassOptionsToClass)
\ProcessKeysOptions{edu}  % l3keys2e options

\end{MacroCode}


\subsection{Basisklasse und Packages laden}

Informationen der einzelnen Packages sind der jeweiligen Dokumentation zu entnehmen.

\subsubsection{Basisklasse}

\begin{MacroCode}{class}
\LoadClass{scrartcl}

\end{MacroCode}


\subsubsection{Grundlegende Packages}

\begin{MacroCode}{class}
\RequirePackage[T1]{fontenc} 
\RequirePackage[utf8]{inputenc} 
\RequirePackage[ngerman]{babel}

\RequirePackage{calc}
\RequirePackage{etoolbox}

\end{MacroCode}


\subsubsection{Layout/Typographie}

\begin{MacroCode}{class}
\RequirePackage{booktabs}
\RequirePackage{ccicons}
\RequirePackage{datetime}
\RequirePackage[inline]{enumitem}
\RequirePackage{eurosym}                                           % Euro-Sign
\RequirePackage{expdlist}
\RequirePackage{fontawesome}
\RequirePackage{geometry}
\RequirePackage[notcomma, notperiod, notquote, notquery]{hanging}  % Hanging indention of multiexe
\RequirePackage{lastpage}                                          % Number of pages with 
\RequirePackage{multicol}
\RequirePackage{multirow}
\RequirePackage{pdflscape}
\RequirePackage{pifont}
\RequirePackage[newcommands]{ragged2e}
\RequirePackage{rotating}
\RequirePackage{scrpage2}
\RequirePackage{setspace}
\RequirePackage{siunitx}
\RequirePackage{tabularx}
\RequirePackage{textcomp}
\RequirePackage[nobottomtitles*]{titlesec}
\RequirePackage[normalem]{ulem}
\RequirePackage{xspace}

\bool_if:NT \g_edu_transparency_bool {
  \RequirePackage[none]{hyphenat}
}

% verse Package needs to be loaded before hyperref.
\bool_if:NT \g_edu_usepackage_verse_bool {
  \RequirePackage{verse}
}

\end{MacroCode}


\subsubsection{Graphik}


\begin{MacroCode}{class}
\RequirePackage{graphicx}
\RequirePackage[svgnames, table]{xcolor}
\RequirePackage{subfig}
\RequirePackage{tikz}

\tl_if_eq:VnT \g_edu_struktexqtree_tl {tikz-qtree} {
  \ExplSyntaxOff
  \RequirePackage{tikz-qtree}
  \ExplSyntaxOn
}

\RequirePackage{tikzsymbols}

\end{MacroCode}


\subsubsection{Style- und Color-Themes}

\begin{MacroCode}{class}
\AtEndPreamble{
	\tl_if_empty:NF \g_edu_colortheme_tl {
	  \RequirePackage{edu-colors-\g_edu_colortheme_tl}
	}
	
	\tl_if_empty:NF \g_edu_styletheme_tl {
	  \RequirePackage{edu-styles-\g_edu_styletheme_tl}
	}
}
  
  

\end{MacroCode}


%\subsubsection{Mathematik}
%
%\begin{MacroCode}{class}
%\RequirePackage[\g_edu_amsoptions_tl]{amsmath}
%\RequirePackage{amssymb}
%\RequirePackage{amsthm}
%\RequirePackage{cancel}
%\RequirePackage{esvect}
%\RequirePackage{gauss}
%\RequirePackage{polynom}
%\RequirePackage{thmtools}
%\RequirePackage[only, lightning]{stmaryrd}
%\RequirePackage{xlop}
%
%
%\end{MacroCode}


\subsubsection{Computer Science}

\begin{MacroCode}{class}
\RequirePackage{listings}
\RequirePackage{xsimverb}

% menukeys needs to be loaded at the end. Otherwise there occurs an 
% option clash with newtxmath/amsmath, which could not be fixed.
\AtEndPreamble{
  \RequirePackage[os=win]{menukeys}
  \renewmenumacro{\menu}[>]{angularmenus}
  \renewmenumacro{\keys}[+]{angularkeys}
}

% Temporary deactivate struktex as it overwrites libertine as math font.
%\tl_if_eq:VnT \g_edu_struktexqtree_tl {struktex} {
%  \RequirePackage{struktex}
%}

\end{MacroCode}


\subsubsection{Sonstige}

\begin{MacroCode}{class}
\RequirePackage{bibgerm}
\RequirePackage{hyperref}

\end{MacroCode}


\subsection{Patches}

\begin{MacroCode}{class}
\AtBeginEnvironment{center}{
  \medmuskip=4mu
	\thickmuskip=5mu
}

\end{MacroCode}

\begin{macro*}{\c_colon_tl}
Define a token list which can be used as a colon in \textsf{TikZ} within \cs*{\ExplSyntaxOn} and \cs*{\ExplSyntaxOff}.
\begin{MacroCode}{class}
\tl_if_exist:NF \c_colon_tl {
  \tl_const:Nx \c_colon_tl { \token_to_str:N : }
}

\end{MacroCode}
\end{macro*}


\subsection{Schriften}

Soll eine Overhead-Folie gesetzt werden (\opt{sfdefault}), wird serifenlose Schrift verwendet. Außerdem muss das Package \pkg{edumath} mit serifenloser Schrift geladen werden.

\begin{MacroCode}{class}
\bool_if:NT \g_edu_transparency_bool {
  \keys_set:nn {edu} {sfdefault = true}
  \tl_gput_right:Nn \g_edu_edumathoptions_tl {, sfmath}
}

\end{MacroCode}

\subsubsection{Schriftarten}

Über die Optionen \opt{palatino}, \opt{lato} und \opt{beramono} können diese als Standardschrift für Serifenschrift, serifenlose Schrift bzw. nichtproportionale Schrift gewählt werden:

\begin{MacroCode}{class}
\bool_if:NF \g_edu_sfdefault_bool {            % Serif fonts only if not sfdefault
	\tl_if_eq:VnT \g_edu_rmfont_tl {libertine} {
	  \RequirePackage[rm]{libertine}
	  \tl_gput_right:Nn \g_edu_edumathoptions_tl {, rmmathfont=libertine}
	}
	
	\tl_if_eq:VnT \g_edu_rmfont_tl {palatino} {
	  \RequirePackage{palatino}
	  \tl_gput_right:Nn \g_edu_edumathoptions_tl {, rmmathfont=palatino}
	}
}

\tl_if_eq:VnT \g_edu_sffont_tl {lato} {
  \RequirePackage[defaultsans]{lato}
}

\tl_if_eq:VnT \g_edu_sffont_tl {sourcesanspro} {
  \RequirePackage[scale=0.96]{sourcesanspro}
}

\tl_if_eq:VnT \g_edu_sffont_tl {roboto} {
  \RequirePackage[scaled=0.9]{roboto}    % Add scaled option after existing bug in roboto is fixed
}

\tl_if_eq:VnT \g_edu_ttfont_tl {beramono} {
  \RequirePackage[scaled=0.85]{beramono}
}

\tl_if_eq:VnT \g_edu_ttfont_tl {sourcecodepro} {
  \RequirePackage[scale=0.875]{sourcecodepro}
}

\end{MacroCode}

Mithilfe von \opt{sfdefault} kann \cs{sfdefault} als Standardschrift verwendet werden. Die Symbole für Formeln werden dann einzeln angegeben, da das Einbinden von  \textsf{cmbright} zu einem Fehler führt, wenn man innerhalb des Dokuments die Schriftgröße ändert, was bei \opt{transparency} der Fall ist (\Macro\KOMAoption{fontsize}{22pt}). Es sollten alle Mathesymbole (inkl. griechischer Buchstaben) serifenlos gesetzt werden. Nur große Operatoren (Summe, Integral) sind nicht serifenlos vorhanden.

\begin{MacroCode}{class}
\bool_if:NT \g_edu_sfdefault_bool {
  \renewcommand{\familydefault}{\sfdefault}
}

\end{MacroCode}


\subsubsection{Schriftgröße}

Bei Verwendung der Option \opt{twuop} wird die Schriftgröße des gesamten Dokuments angepasst. Die Option \opt{transparency} wird gesondert verarbeitet.

\begin{MacroCode}{class}

\AtBeginDocument{
  \bool_if:NT \g_edu_twoup_bool {
    \keys_set:nn {edu} {fontsize = \tl_use:N \g_edu_twoupfontsize_dim}
  }
  \KOMAoptions{fontsize=\dim_use:N \g_edu_fontsize_dim}
}

\end{MacroCode}



\subsection{Metadaten}

\begin{macro*}{\g_edu_author_tl}
\begin{macro*}{\g_edu_class_tl}
\begin{macro*}{\g_edu_date_tl}
\begin{macro*}{\g_edu_email_tl}
\begin{macro*}{\g_edu_field_tl}
\begin{macro*}{\g_edu_group_tl}
\begin{macro*}{\g_edu_license_tl}
\begin{macro*}{\g_edu_short_tl}
\begin{macro*}{\g_edu_subject_tl}
\begin{macro*}{\g_edu_subtitle_tl}
\begin{macro*}{\g_edu_title_tl}
\begin{macro*}{\g_edu_titlenumber_tl}
\begin{macro*}{\g_edu_version_tl}
\begin{MacroCode}{class}

\tl_new:N \g_edu_author_tl
\tl_new:N \g_edu_class_tl
\tl_new:N \g_edu_date_tl
\tl_new:N \g_edu_email_tl
\tl_new:N \g_edu_field_tl
\tl_new:N \g_edu_group_tl
\tl_new:N \g_edu_license_tl
\tl_new:N \g_edu_short_tl
\tl_new:N \g_edu_subject_tl
\tl_new:N \g_edu_subtitle_tl
\tl_new:N \g_edu_title_tl
\tl_new:N \g_edu_titlenumber_tl
\tl_new:N \g_edu_version_tl

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}

\begin{macro*}{\g_edu_authorshort_tl}
\begin{macro*}{\g_edu_classshort_tl}
\begin{macro*}{\g_edu_dateshort_tl}
\begin{macro*}{\g_edu_emailshort_tl}
\begin{macro*}{\g_edu_fieldshort_tl}
\begin{macro*}{\g_edu_groupshort_tl}
\begin{macro*}{\g_edu_licenseshort_tl}
\begin{macro*}{\g_edu_shortshort_tl}
\begin{macro*}{\g_edu_subjectshort_tl}
\begin{macro*}{\g_edu_subtitleshort_tl}
\begin{macro*}{\g_edu_titleshort_tl}
\begin{macro*}{\g_edu_versionshort_tl}
\begin{MacroCode}{class}

\tl_new:N \g_edu_authorshort_tl
\tl_new:N \g_edu_classshort_tl
\tl_new:N \g_edu_dateshort_tl
\tl_new:N \g_edu_emailshort_tl
\tl_new:N \g_edu_fieldshort_tl
\tl_new:N \g_edu_groupshort_tl
\tl_new:N \g_edu_licenseshort_tl
\tl_new:N \g_edu_shortshort_tl
\tl_new:N \g_edu_subjectshort_tl
\tl_new:N \g_edu_subtitleshort_tl
\tl_new:N \g_edu_titleshort_tl
\tl_new:N \g_edu_versionshort_tl

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}


\begin{macro}{\author}[2]{[<author short>]}{<author>}
\begin{macro}{\class}[2]{[<class short>]}{<class>}
\begin{macro}{\date}[2]{[<date short>]}{<date>}
\begin{macro}{\email}[2]{[<email short>]}{<email>}
\begin{macro}{\field}[2]{[<field short>]}{<field>}
\begin{macro}{\group}[2]{[<group short>]}{<group>}
\begin{macro}{\license}[2]{[<license short>]}{<license>}
\begin{macro}{\short}[2]{[<short short>]}{<short>}
\begin{macro}{\subject}[2]{[<subject short>]}{<subject>}
\begin{macro}{\subtitle}[2]{[<subtitle short>]}{<subtitle>}
\begin{macro}{\title}[3]{[<title short>]}{<title>}{<number>}
\begin{macro}{\version}[2]{[<version short>]}{<version>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \author {o m} {
  \tl_gset:Nn \g_edu_author_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_authorshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_authorshort_tl {#1}
  }
}

\DeclareDocumentCommand \class {o m} {
  \tl_gset:Nn \g_edu_class_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_classshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_classshort_tl {#1}
  }
}

\DeclareDocumentCommand \date {o m} {
  \tl_gset:Nn \g_edu_date_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_dateshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_dateshort_tl {#1}
  }
}

\DeclareDocumentCommand \email {o m} {
  \tl_gset:Nn \g_edu_email_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_emailshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_emailshort_tl {#1}
  }
}

\DeclareDocumentCommand \field {o m} {
  \tl_gset:Nn \g_edu_field_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_fieldshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_fieldshort_tl {#1}
  }
}

\DeclareDocumentCommand \group {o m} {
  \tl_gset:Nn \g_edu_group_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_groupshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_groupshort_tl {#1}
  }
}

\DeclareDocumentCommand \license {o m} {
  \tl_gset:Nn \g_edu_license_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_licenseshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_licenseshort_tl {#1}
  }
}

\DeclareDocumentCommand \short {o m} {
  \tl_gset:Nn \g_edu_short_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_shortshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_shortshort_tl {#1}
  }
}

\DeclareDocumentCommand \subject {o m} {
  \tl_gset:Nn \g_edu_subject_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_subjectshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_subjectshort_tl {#1}
  }
}

\DeclareDocumentCommand \subtitle {o m} {
  \tl_gset:Nn \g_edu_subtitle_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_subtitleshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_subtitleshort_tl {#1}
  }
}

\DeclareDocumentCommand \title {o m o} {
  \tl_gset:Nn \g_edu_title_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_titleshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_titleshort_tl {#1}
  }
  \IfValueT{#3} {
    \tl_gset:Nn \g_edu_titlenumber_tl {#3}
  }
}

\DeclareDocumentCommand \version {o m} {
  \tl_gset:Nn \g_edu_version_tl {#2}
  \IfNoValueTF{#1} {
    \tl_gset:Nn \g_edu_versionshort_tl {#2}
  }{
    \tl_gset:Nn \g_edu_versionshort_tl {#1}
  }
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\begin{macro}{\printauthor}
\begin{macro}{\printauthor*}
\begin{macro}{\printclass}
\begin{macro}{\printclass*}
\begin{macro}{\printdate}
\begin{macro}{\printdate*}
\begin{macro}{\printemail}
\begin{macro}{\printemail*}
\begin{macro}{\printfield}
\begin{macro}{\printfield*}
\begin{macro}{\printgroup}
\begin{macro}{\printgroup*}
\begin{macro}{\printlicense}
\begin{macro}{\printlicense*}
\begin{macro}{\printshort}
\begin{macro}{\printshort*}
\begin{macro}{\printsubject}
\begin{macro}{\printsubject*}
\begin{macro}{\printsubtitle}
\begin{macro}{\printsubtitle*}
\begin{macro}{\printtitle}
\begin{macro}{\printtitle*}
\begin{macro}{\printtitlenumber}
\begin{macro}{\printversion}
\begin{macro}{\printversion*}
\begin{MacroCode}{class}
\DeclareDocumentCommand \printauthor { s } {
  \IfBooleanTF{#1} {
    \g_edu_authorshort_tl\xspace
  }{
    \g_edu_author_tl\xspace
  }
}

\DeclareDocumentCommand \printclass { s } {
  \IfBooleanTF{#1} {
    \g_edu_classshort_tl\xspace
  }{
    \g_edu_class_tl\xspace
  }
}

\DeclareDocumentCommand \printdate { s } {
  \IfBooleanTF{#1} {
    \g_edu_dateshort_tl\xspace
  }{
    \g_edu_date_tl\xspace
  }
}

\DeclareDocumentCommand \printemail { s } {
  \IfBooleanTF{#1} {
    \g_edu_emailshort_tl\xspace
  }{
    \g_edu_email_tl\xspace
  }
}

\DeclareDocumentCommand \printfield { s } {
  \IfBooleanTF{#1} {
    \g_edu_fieldshort_tl\xspace
  }{
    \g_edu_field_tl\xspace
  }
}

\DeclareDocumentCommand \printgroup { s } {
  \IfBooleanTF{#1} {
    \g_edu_groupshort_tl\xspace
  }{
    \g_edu_group_tl\xspace
  }
}

\DeclareDocumentCommand \printlicense { s } {
  \IfBooleanTF{#1} {
    \g_edu_licenseshort_tl\xspace
  }{
    \g_edu_license_tl\xspace
  }
}

\DeclareDocumentCommand \printshort { s } {
  \IfBooleanTF{#1} {
    \g_edu_shortshort_tl\xspace
  }{
    \g_edu_short_tl\xspace
  }
}

\DeclareDocumentCommand \printsubject { s } {
  \IfBooleanTF{#1} {
    \g_edu_subjectshort_tl\xspace
  }{
    \g_edu_subject_tl\xspace
  }
}

\DeclareDocumentCommand \printsubtitle { s } {
  \IfBooleanTF{#1} {
    \g_edu_subtitleshort_tl\xspace
  }{
    \g_edu_subtitle_tl\xspace
  }
}

\DeclareDocumentCommand \printtitle { s } {
  \IfBooleanTF{#1} {
    \g_edu_titleshort_tl\xspace
  }{
    \g_edu_title_tl\xspace
  }
}

\DeclareDocumentCommand \printtitlenumber {  } {
  \g_edu_titlenumber_tl\xspace
}

\DeclareDocumentCommand \printversion { s } {
  \IfBooleanTF{#1} {
    \g_edu_versionshort_tl\xspace
  }{
    \g_edu_version_tl\xspace
  }
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\subsection{Datum und Zeit}

\begin{macro*}{\ddmmyydateformat}
Defining the default date format D(D).M(M).YYYY.
\begin{MacroCode}{class}
\renewcommand{\dateseparator}{.}

\newdateformat{ddmmyydateformat}{
  \THEDAY.\THEMONTH.\THEYEAR\xspace
}

\AtBeginDocument{
  \ddmmyydateformat
}

\end{MacroCode}
\end{macro*}

\begin{macro*}{\timestampdateformat}
\begin{macro*}{\timestamptimeformat}
Defining a date and time format for typesetting a timestamp.
\begin{MacroCode}{class}
\newdateformat{timestampdateformat}{
  \twodigit{\THEYEAR}
  \g_edu_timestampdateseparator_tl\twodigit{\THEMONTH}
  \g_edu_timestampdateseparator_tl\twodigit{\THEDAY}
}

\newtimeformat{timestamptimeformat}{
  \twodigit{\THEHOUR}
  \g_edu_timestamptimeseparator_tl\twodigit{\THEMINUTE}
  \g_edu_timestamptimeseparator_tl\twodigit{\THESECOND}
}

\end{MacroCode}
\end{macro*}
\end{macro*}

\begin{macro*}{\timestamp}
This command typesets a timestamp. The default format is YYYY-MM-DD-HH-MM-SS.
\begin{MacroCode}{class}
\DeclareDocumentCommand \timestamp {  } {
  \timestampdateformat
  \settimeformat{timestamptimeformat}
  \today
  \bool_if:NTF \g_edu_timestamptime_bool {
    \g_edu_timestampdatetimeseparator_tl
    \currenttime
  }
  \ddmmyydate
}

\end{MacroCode}
\end{macro*}



\subsection{Hyperref}


\begin{macro*}{\g__edu_pdftitletemp_tl}
\begin{macro*}{\g__edu_pdfsubjecttemp_tl}
First, document title and subject are created.
\begin{MacroCode}{class}
\tl_new:N \g__edu_pdftitletemp_tl
\tl_gset:Nn \g__edu_pdftitletemp_tl {\g_edu_title_tl}

\tl_new:N \g__edu_pdfsubjecttemp_tl

\AtEndPreamble{
	
	\tl_if_empty:NF \g_edu_subtitle_tl {
	  \tl_gput_right:Nn \g__edu_pdftitletemp_tl {
	    \ --~\g_edu_subtitle_tl
	  }
	}
	
	\tl_if_empty:NF \g_edu_subject_tl {
	  \tl_gput_right:Nn \g__edu_pdfsubjecttemp_tl {
	    \g_edu_subject_tl
	  }
	}
	
	\bool_if:nT {!\tl_if_empty_p:N \g_edu_subject_tl && !\tl_if_empty_p:N \g_edu_field_tl} {
	  \tl_gput_right:Nn \g__edu_pdfsubjecttemp_tl {
	    :~
	  }
	}
	
	\tl_if_empty:NF \g_edu_field_tl {
	  \tl_gput_right:Nn \g__edu_pdfsubjecttemp_tl {
	    \g_edu_field_tl
	  }
	}
	
	\tl_if_empty:NF \g_edu_class_tl {
	  \tl_gput_right:Nn \g__edu_pdfsubjecttemp_tl {
	    \ (\g_edu_class_tl)
	  }
	}

\end{MacroCode}
\end{macro*}
\end{macro*}

Then, \pkg{hyperref} is configured:

\begin{MacroCode}{class}
  \hypersetup{
    breaklinks=false,
    linkcolor=\g_edu_linkfg_tl,
    citecolor=\g_edu_linkfg_tl,
    filecolor=\g_edu_linkfg_tl,
    urlcolor=\g_edu_linkfg_tl,
    linkbordercolor=\tl_use:N \g_edu_linkborderfg_tl,
    citebordercolor=\tl_use:N \g_edu_linkborderfg_tl,
    filebordercolor=\tl_use:N \g_edu_linkborderfg_tl,
    urlbordercolor=\tl_use:N \g_edu_linkborderfg_tl,
    pdftitle={\g__edu_pdftitletemp_tl},
    pdfauthor={\g_edu_author_tl},
    pdfsubject={\g__edu_pdfsubjecttemp_tl},
    linktocpage=true,
  }%
  
  \bool_if:NTF \g_edu_colorlinks_bool {
    \hypersetup{colorlinks=true}
  }{
    \hypersetup{colorlinks=false}
  }
} % AtEndPreamble

\end{MacroCode}


\subsection{Layout}

\subsubsection{Allgemeine Einstellungen}

\begin{MacroCode}{class}
\setlength{\columnsep}{0.75cm}

\end{MacroCode}

\subsubsection{Listen}

\begin{macro*}{\g__edu_listsep_dim}
\begin{macro*}{\g__edu_listmargin_dim}
\begin{macro*}{\g__edu_listarraysep_dim}
\begin{macro*}{\g__edu_listarraymargin_dim}
\begin{macro*}{\g__edu_listlabelwidth_dim}
\begin{macro*}{\g__edu_hangindention_dim}
Define new lengths:
\begin{MacroCode}{class}

\dim_new:N \g__edu_listsep_dim
\dim_new:N \g__edu_listmargin_dim
\dim_new:N \g__edu_listarraysep_dim
\dim_new:N \g__edu_listarraymargin_dim

\dim_new:N \g__edu_listlabelwidth_dim

\dim_new:N \g__edu_hangindention_dim

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}


Configure list-settings:
\begin{MacroCode}{class}
\AtBeginDocument{
  \dim_gset:Nn \g__edu_listsep_dim {\g_edu_listarraysep_dim}
  \dim_gset:Nn \g__edu_listmargin_dim {\g_edu_listarraymargin_dim}
  \dim_gset:Nn \g__edu_listlabelwidth_dim {1.2em}
}

	\setlist{%
	  partopsep=0ex,
	  topsep=0.5\baselineskip - \parskip,
	  itemsep=0.5\baselineskip - \parskip,
	  parsep=\parskip,
	  labelsep=\g__edu_listsep_dim,
	  leftmargin=\g__edu_listlabelwidth_dim + \g__edu_listsep_dim + \g__edu_listmargin_dim
	}
	
	\setlist[2, 3, 4, 5]{
	  topsep=0.5\baselineskip - \parskip, 
	  leftmargin=1em,
	}
	
	\setlist[itemize, 1]{label=\color{\g_edu_itemizefg_tl}\rule[0.3ex]{0.8ex}{0.8ex}}
	\setlist[itemize, 2]{label=\color{\g_edu_itemizefg_tl}\rule[0.5ex]{0.8ex}{0.4ex}}
	\setlist[itemize, 3]{label=\color{\g_edu_itemizefg_tl}\rule[0.55ex]{0.8ex}{0.2ex}}
	
	\setlist[enumerate, 1]{label=\color{\g_edu_enumeratefg_tl}\textsf{\arabic*.}}
	\setlist[enumerate, 2]{label=\color{\g_edu_enumeratefg_tl}\textsf{\alph*.)}}
	\setlist[enumerate, 3]{label=\color{\g_edu_enumeratefg_tl}\textsf{\roman*.}}
	
	\setlist[description]{labelsep=0.25em, font=\color{\g_edu_descriptionfg_tl}}

\end{MacroCode}


\begin{environment}{edulist}[2]{[<itemsep>]}{<item>}
Liste, welche in Teilaufgaben, Lösungen, Fragen und Antworten verwendet wird.
\begin{MacroCode}{class}
\newenvironment{edulist}[2][0.5\baselineskip]{
  \dim_gset:Nn \g__edu_listarraysep_dim {\g_edu_listarraysep_dim}
  \dim_gset:Nn \g__edu_listarraymargin_dim {\g_edu_listarraymargin_dim}
%  
  \vspace{0.5\baselineskip}
  \begin{list}{\sffamily #2}{%
    \setlength{\partopsep}{0ex}%
    \setlength{\topsep}{0pt}%
    \setlength{\parsep}{\parskip}%
    \setlength{\itemsep}{#1 - \parskip}%
    \setlength{\labelsep}{\g__edu_listarraysep_dim}%
    \setlength{\leftmargin}{%
      \g__edu_listlabelwidth_dim + \g__edu_listarraysep_dim + \g__edu_listarraymargin_dim%
    }%
  }
}{
  \end{list}%
  \vspace{0.5\baselineskip}
}

\end{MacroCode}
\end{environment}


\begin{environment}{edulisti}[1]{[<options>]}
Vertikale ("`inline"') Liste, welche in Teilaufgaben, Lösungen, Fragen und Antworten verwendet wird.
\begin{MacroCode}{class}
\newenvironment{edulisti}[1][]{
  \begin{enumerate*}[#1]
}{
  \end{enumerate*}%
}

\end{MacroCode}
\end{environment}

\begin{environment}{itemizet}
Liste ohne oberen und unteren Abstand. Geeignet für Aufzählungen in Tabellen. \begin{MacroCode}{class}
\newenvironment{itemizet}{%
  \@minipagetrue
%  \compress
  \begin{itemize}[
    topsep=0pt,
    itemsep=-0.25\baselineskip,
    leftmargin=1em,
    parsep=0.25\baselineskip,
  ]
}{%
  \vspace{-\baselineskip}
  \end{itemize}
}

%  \makeatletter
%\newcommand{\compress}{\@minipagetrue}
%  \makeatother

%    \end{macrocode}

\end{MacroCode}
\end{environment}

\begin{macro}{\itemm}
\begin{macro}{\itemn}
\begin{macro}{\itemp}
Aufzählungszeichen mit Minus-, Tilde- und Plus-Symbol.
\begin{MacroCode}{class}
\DeclareDocumentCommand \itemm { } {\item[\bfseries\texttt{\textminus}]}
\DeclareDocumentCommand \itemn { } {\item[\bfseries\texttt{\textasciitilde}]}
\DeclareDocumentCommand \itemp { } {\item[\bfseries\texttt{+}]}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}

\begin{macro}{\itemb}
\begin{macro}{\itembcheck}
\begin{macro}{\itembblack}
Aufzählungszeichen mit Boxen (leere Box, abgehakte Box und gefüllte Box).
\begin{MacroCode}{class}
\DeclareDocumentCommand \itemb { } {
  \item[{\lapbox[\width]{0.325em}{%
    \makebox[0.9em][l]{%
      \makebox[0pt][l]{$\square$}%
    }%
  }}]%
}

\DeclareDocumentCommand \itembcheck { } {
  \item[{\lapbox[\width]{0.325em}{%
    \makebox[0.9em][l]{%
      \makebox[0pt][l]{$\square$}%
      \raisebox{.3ex}{\hspace{0.1em}$\checkmark$}%
    }%
  }}]%
}

\DeclareDocumentCommand \itembblack { } {
  \item[{\lapbox[\width]{0.325em}{%
    \makebox[0.9em][l]{%
      \makebox[0pt][l]{$\blacksquare$}%
    }%
  }}]%
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}



\subsubsection{Tabellen}

Spaltentyp für zentrierte Spalten mit fester Breite:
\begin{MacroCode}{class}
\newcolumntype{C}[1]{>{\centering\arraybackslash\hspace{0pt}}p{#1}}

\end{MacroCode}

Spaltentyp für \env{multiexearray}.
\begin{MacroCode}{class}
\bool_new:N \__edu_multiexebonus_bool
\bool_gset_false:N \__edu_multiexebonus_bool

\newcolumntype{e}{%
  >{%
    {\sffamily
      \bool_if:NTF \__edu_multiexebonus_bool {
        \multiexelabelboxed*%
      }{
        \multiexelabelboxed%
      }
    }
    \bool_gset_false:N \__edu_multiexebonus_bool
    \hspace{\g__edu_listarraysep_dim}
    \hangpara{\g__edu_hangindention_dim}{1}
    \raggedright\arraybackslash%
  }%
  X%
}%

\end{MacroCode}

Spaltentyp für \env{multiexearray*}.
\begin{MacroCode}{class}
\newcolumntype{E}{%
  >{%
    {\sffamily
      \bool_if:NTF \__edu_multiexebonus_bool {
        \multiexelabelboxed*%
      }{
        \multiexelabelboxed%
      }
    }
    \bool_gset_false:N \__edu_multiexebonus_bool
    \hspace{\g__edu_listarraysep_dim}$\displaystyle%
  }%
  X%
  <{$}%
}%

\end{MacroCode}

Spaltentyp für \env{questmcarray}.
\begin{MacroCode}{class}
\newcolumntype{q}{%
  >{%
    {\sffamily%
      \makebox[\g__edu_listlabelwidth_dim][r]{%
        \color{\g_edu_questmclabelfg_tl}%
        $\square$%
      }%
    }%
    \hspace{\g__edu_listarraysep_dim}%
    \hangpara{\g__edu_hangindention_dim}{1}\raggedright\arraybackslash%
   }%
   X%
}%

\end{MacroCode}

Spaltentyp für \env{questmcarray*}.
\begin{MacroCode}{class}
\newcolumntype{Q}{%
  >{%
    {\sffamily%
      \makebox[\g__edu_listlabelwidth_dim][r]{%
        \color{\g_edu_questmclabelfg_tl}%
        $\square$%
      }%
    }%
    \hspace{\g__edu_listarraysep_dim}$\displaystyle%
  }%
  X%
  <{$}%
}%

\end{MacroCode}

Spaltentyp für \env{questmcarrayalph}.
\begin{MacroCode}{class}
\newcolumntype{a}{%
  >{%
    {\sffamily\g__edu_questmclabelboxed_tl}%
      \hspace{\g__edu_listarraysep_dim}\hangpara{\g__edu_hangindention_dim}{1}\raggedright\arraybackslash%
     }%
     X%
}%

\end{MacroCode}

Spaltentyp für \env{questmcarrayalph*}.
\begin{MacroCode}{class}
\newcolumntype{A}{%
  >{%
    {\sffamily\g__edu_questmclabelboxed_tl}%
      \hspace{\g__edu_listarraysep_dim}$\displaystyle%
     }%
     X%
    <{$}%
}%

\end{MacroCode}


\begin{macro}{\arraysetup}[2]{[<extrarowheight>]}{<m>}
Setup der wichtigsten Parameter und Erzeugung des Abstands vor Tabellen bei \env{multiexearray}, \env{multiexearray*}, \env{questmcarray}, \env{questmcarray*}, \env{questmcarrayalph} und \env{questmcarrayalph*}.
\begin{MacroCode}{class}

\DeclareDocumentCommand \arraysetup { O{0ex} m } {%
  \par
  \parskipreduce
  
  \dim_gset:Nn \g__edu_listarraysep_dim {\g_edu_listarraysep_dim}
  \dim_gset:Nn \g__edu_listarraymargin_dim {\g_edu_listarraymargin_dim}
  
  \setlength{\extrarowheight}{#1}
%  \renewcommand{\arraystretch}{1.25} % War aktiviert. Warum?!
  \setlength{\tabcolsep}{\g__edu_listarraymargin_dim}
  \dim_gset:Nn \g__edu_hangindention_dim {
    \g__edu_listlabelwidth_dim+\g__edu_listarraysep_dim
  }
%  
  \str_if_eq:nnTF {#2} {m} {%
      \renewcommand{\tabularxcolumn}[1]{m{##1}}
  }{
      \renewcommand{\tabularxcolumn}[1]{p{##1}}
  }%
%  
  \vspace{\g_edu_arraybeforeskip_dim}
  \vspace{-#1}
}

\end{MacroCode}
\end{macro}


\begin{macro}{\arraycleanup}
Deaktivieren der wichtigsten Parameter und Erzeugung des Abstands nach Tabellen bei \env{multiexearray}, \env{multiexearray*}, \env{questmcarray}, \env{questmcarray*}, \env{questmcarrayalph} und \env{questmcarrayalph*}.
\begin{MacroCode}{class}
\DeclareDocumentCommand \arraycleanup { } {%
  \vspace{\g_edu_arrayafterskip_dim}
  \parskipreduce
  \par
}

\end{MacroCode}
\end{macro}


\subsubsection{Boxen und Linien}

\begin{macro}{\fpbox}[2]{[<width>]}{<content>}
Umrahmte Box mit variabler Breite (standardmäßig \cs{linewidth}).
\begin{MacroCode}{class}
\DeclareDocumentCommand \fpbox { O{\linewidth} m } {
  \noindent\fbox{\parbox{#1}{#2}}
}

\end{MacroCode}
\end{macro}

\begin{macro}{\ibox}[3]{[<width>]}{[<height>]}{[<vertical offset>]}
Umrahmte leere Box zur Verwendung im Fließtext ("`inline"'). Breite, Höhe und vertikale Verschiebung können optional verändert werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ibox { O{2cm} O{0.65cm} O{-5pt} } {%
  \tikz[baseline=-#3] \draw (0,0) rectangle (#1, #2); 
  \hspace{5pt}
}

\end{MacroCode}
\end{macro}

\begin{macro}{\dbox}[2]{[<width>]}{[<height>]}
Umrahmte, abgesetzte ("`display"') leere Box. Breite und Höhe können optional verändert werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \dbox { O{\linewidth} O{3cm} } {%
  \par
  \parskipreduce
  \fbox{%
    \noindent\parbox[t][#2]{#1}{\mbox{}}
  }
  \par
  \bool_if:NF \g_edu_parskip_bool {
    \vspace{0.5\baselineskip}
  }
}

\end{MacroCode}
\end{macro}

\begin{macro}{\ruleh}[2]{[<vertical offset>]}{<length>}
Häufig werden horizontale Linien gebraucht, welche mit diesem Makro erstellt werden können. Die Länge der Linie muss spezifiziert werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ruleh { O{\g_edu_rulehvoffset_dim} m } {
  \rule[-\g_edu_ruleh_dim+#1]{#2}{\g_edu_ruleh_dim}
}

\end{MacroCode}
\end{macro}


\begin{macro}{\rulehfill}[1]{[<vertical offset>]}
Soll eine horizontale Linie erstellt werden, welche sich bis zum Ende der aktuellen Zeile erstreckt, kann dies durch dieses Makro umgesetzt werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \rulehfill { O{\g_edu_rulehvoffset_dim} } {
  \leavevmode\leaders\hbox{\rule[-\g_edu_ruleh_dim+#1]{1pt}{\g_edu_ruleh_dim}}\hfill\kern0pt\hspace*{-\parfillskip}
}

\end{MacroCode}
\end{macro}


\subsubsection{Sonstige Kommandos/Umgebungen}

\begin{macro}{\__edu_moveright:n}[1]{<token list>}
\begin{environment}{citequote}[3]{[<author>]}{[<key>]}{[<reference>]}
Umgebung für Zitate, bei der optional ein Author, eine Quelle und dann ebenfalls optional eine genauere Referenz (z.\,B Seite) angegeben werden kann.
\begin{MacroCode}{class}
\tl_new:N \l__edu_citetext_tl

% Adapted from TeXbook
\cs_new:Npn \__edu_moveright:n #1 {
  \group_begin:
    \leavevmode\unskip\nobreak\hfil\penalty50\hskip2em
  \hbox{}\nobreak\hfil #1%
  \parfillskip=0pt \finalhyphendemerits=0 \endgraf
  \group_end:
}

\DeclareDocumentEnvironment {citequote} { O{} O{} O{} } {
  \par
  \vspace{0.5\baselineskip}
  \parskipreduce
  \begin{addmargin}{3em}
    \begin{em}
}{
    \bool_if:nT {!\tl_if_empty_p:n {#1} || !\tl_if_empty_p:n {#2} || !\tl_if_empty_p:n {#3}} {
      \tl_clear:N \l__edu_citetext_tl
      \upshape
	    \tl_if_empty:nF {#1} {
	      \tl_put_right:Nn \l__edu_citetext_tl {\textsc{#1}\xspace}
	    }
      \bool_if:nT {!\tl_if_empty_p:n {#2} || !\tl_if_empty_p:n {#3}} {
		    \tl_if_empty:nTF {#3} {
		      \tl_put_right:Nn \l__edu_citetext_tl {\cite{#2}}
		    }{
		      \tl_put_right:Nn \l__edu_citetext_tl {\cite[#3]{#2}}
		    }
	    }
	    \__edu_moveright:n \l__edu_citetext_tl
    }
    \end{em}      
  \end{addmargin}
  \par
  \vspace{0.5\baselineskip}
  \parskipreduce
}

\end{MacroCode}
\end{environment}
\end{macro}



\subsubsection{Seitenränder}

\begin{macro}{\setgeometry}
Makro zum aktualisieren der Seitenränder, falls eine der Optionen \opt{top} etc. geändert wurde. Ruft sich anschließend selbst auf.
\begin{MacroCode}{class}
\DeclareDocumentCommand \setgeometry { } {
  \bool_if:NTF \g_edu_twoup_bool {
    \geometry{a4paper,%
      top=\g_edu_twouptop_dim, bottom=\g_edu_twoupbottom_dim,%
      left=\g_edu_twoupleft_dim, right=\g_edu_twoupright_dim%
    }
  }{
    \geometry{a4paper,%
      top=\g_edu_top_dim, bottom=\g_edu_bottom_dim,%
      left=\g_edu_left_dim, right=\g_edu_right_dim%
    }
  }
  
  \bool_if:NTF \g_edu_footer_bool {
    \bool_if:NTF \g_edu_twoup_bool {
      \setlength{\footskip}{\g_edu_twoupfootskip_dim}
    }{
      \setlength{\footskip}{\g_edu_footskip_dim}
    }
    \geometry{includefoot}
  }{
    \setlength{\footskip}{0pt}
  }
  
  \bool_if:nT {\g_edu_transparency_bool && !\g_edu_transparencyfooter_bool} {
    \keys_set:nn {edu}{footer=false}
  }
  
  \bool_if:NT \g_edu_transparency_bool {
    \geometry{a4paper,%
      top=\g_edu_transparencytop_dim, bottom=\g_edu_transparencybottom_dim,%
      left=\g_edu_transparencyleft_dim, right=\g_edu_transparencyright_dim%
    }
  }
  \bool_if:NT \g_edu_glue_bool {
    \geometry{a4paper,%
      top=\g_edu_gluetop_dim, bottom=\g_edu_gluebottom_dim,%
      left=\g_edu_glueleft_dim, right=\g_edu_glueright_dim%
    }
  }
}

\AtEndPreamble{
  \setgeometry
}

\end{MacroCode}
\end{macro}


\subsubsection{Abschnitte (Parts, Sections, Subsection, etc.)}

\minisec{part}

\begin{macro*}{\g__edu_partbefore_dim}
\begin{macro*}{\g__edu_partafter_dim}
\begin{macro*}{\g__edu_partnumbertempwidth_dim}
\begin{macro*}{\g__edu_partnumberminwidth_dim}
First, some new lengths:
\begin{MacroCode}{class}
\dim_new:N \g__edu_partbefore_dim
\dim_new:N \g__edu_partafter_dim
\dim_gset:Nn \g__edu_partbefore_dim {3.5ex}
\dim_gset:Nn \g__edu_partafter_dim {1.25ex}

\dim_new:N \g__edu_partnumbertempwidth_dim
\dim_new:N \g__edu_partnumberminwidth_dim
\dim_gset:Nn \g__edu_partnumberminwidth_dim {0.9em}

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}

Now, changing \cs{part} using titlesec:
\begin{MacroCode}{class}
\titleformat{\part}
  [hang]                                                      % Shape
  {\sffamily\bfseries\LARGE\color{\g_edu_partfg_tl}}          % Format
  {\setlength{\fboxsep}{0.125em}%
    \raisebox{0.1ex}{%
      \g_edu_partnumbersize_tl\colorbox{\g_edu_partnumberbg_tl}{%
        \settowidth{\g__edu_partnumbertempwidth_dim}{\thepart}%
        \dim_compare:nNnTF
        {\g__edu_partnumbertempwidth_dim} < {\g__edu_partnumberminwidth_dim} {
          \makebox[\g__edu_partnumberminwidth_dim]{%
            \textcolor{\g_edu_partnumberfg_tl}{\thepart}%
          }
        }{
            \textcolor{\g_edu_partnumberfg_tl}{\thepart}%
        }
      }
    }
  }                                  % Label
  {0.5em}                            % Sep
  {}                                 % Before
  {}                                 % After
  
\titlespacing*{\part}
  {0pt}                              % Left
  {\g__edu_partbefore_dim - \parskip}  % Beforesep
  {\g__edu_partafter_dim - \parskip}   % Aftersep

\end{MacroCode}


\minisec{section}

\begin{macro*}{\g__edu_sectionbefore_dim}
\begin{macro*}{\g__edu_sectionafter_dim}
First, some new lengths:
\begin{MacroCode}{class}
\dim_new:N \g__edu_sectionbefore_dim
\dim_new:N \g__edu_sectionafter_dim
\dim_gset:Nn \g__edu_sectionbefore_dim {2.5ex}
\dim_gset:Nn \g__edu_sectionafter_dim {0.75ex}

\end{MacroCode}
\end{macro*}
\end{macro*}

Now, changing \cs{section} using titlesec:
\begin{MacroCode}{class}
\titleformat{\section}
  [hang]                                                % Shape
    {
    \bool_if:NTF \g_edu_transparency_bool {
      \large
    }{
      \Large
    }
    \sffamily\bfseries\color{\g_edu_sectionfg_tl}
  } % Format
  {\setlength{\fboxsep}{0.125em}%
    \raisebox{0.2ex}{%
      \g_edu_sectionnumbersize_tl%
      \colorbox{\g_edu_sectionnumberbg_tl}{%
        \textcolor{\g_edu_sectionnumberfg_tl}{\thesection}%
      }
    }
  }                                  % Label
  {0.5em}                            % Sep
  {}                                 % Before
  {}                                 % After
  
\titlespacing*{\section}
  {0pt}                                       % Left
  {\g__edu_sectionbefore_dim - \parskip}        % Beforesep
  {\g__edu_sectionafter_dim - \parskip}         % Aftersep
  
\end{MacroCode}


\minisec{subsection}

\begin{macro*}{\g__edu_subsectionbefore_dim}
\begin{macro*}{\g__edu_subsectionafter_dim}
First, some new lengths:
\begin{MacroCode}{class}
\dim_new:N \g__edu_subsectionbefore_dim
\dim_new:N \g__edu_subsectionafter_dim
\dim_gset:Nn \g__edu_subsectionbefore_dim {1.75ex}
\dim_gset:Nn \g__edu_subsectionafter_dim {0.75ex}

\end{MacroCode}
\end{macro*}
\end{macro*}

Now, changing \cs{subsection} using titlesec:
\begin{MacroCode}{class}
\titleformat{\subsection}
  [hang]                                                   % Shape
  {
    \bool_if:NTF \g_edu_transparency_bool {
      \normalsize
    }{
      \large
    }
    \sffamily\bfseries\color{\g_edu_subsectionfg_tl}
  } % Format
  {\setlength{\fboxsep}{0.125em}%
    \raisebox{0.15ex}{%
      \g_edu_subsectionnumbersize_tl%
      \colorbox{\g_edu_subsectionnumberbg_tl}{%
        \textcolor{\g_edu_subsectionnumberfg_tl}{\thesubsection}%
      }
    }
  }                                  % Label
  {0.5em}                             % Sep
  {}                                  % Before
  {}                                  % After
  
\titlespacing*{\subsection}
  {0pt}                                        % Left
  {\g__edu_subsectionbefore_dim - \parskip}      % Beforesep
  {\g__edu_subsectionafter_dim - \parskip}       % Aftersep

\end{MacroCode}


\minisec{subsubsection}

\begin{macro*}{\g__edu_subsubsectionbefore_dim}
\begin{macro*}{\g__edu_subsubsectionafter_dim}
First, some new lengths:
\begin{MacroCode}{class}
\dim_new:N \g__edu_subsubsectionbefore_dim
\dim_new:N \g__edu_subsubsectionafter_dim
\dim_gset:Nn \g__edu_subsubsectionbefore_dim {1.75ex}
\dim_gset:Nn \g__edu_subsubsectionafter_dim {0.75ex}

\end{MacroCode}
\end{macro*}
\end{macro*}

Now, changing \cs{subsubsection} using titlesec:
\begin{MacroCode}{class}
\titleformat{\subsubsection}
  [hang]                                                   % Shape
  {
    \bool_if:NTF \g_edu_transparency_bool {
      \small
    }{
      \normalsize
    }
    \sffamily\bfseries\color{\g_edu_subsubsectionfg_tl}
  } % Format
  {\setlength{\fboxsep}{0.125em}%
    \raisebox{0.15ex}{%
      \g_edu_subsubsectionnumbersize_tl%
      \colorbox{\g_edu_subsubsectionnumberbg_tl}{%
        \textcolor{\g_edu_subsubsectionnumberfg_tl}{\thesubsubsection}%
      }
    }
  }                                  % Label
  {0.5em}                             % Sep
  {}                                  % Before
  {}                                  % After
  
\titlespacing*{\subsubsection}
  {0pt}                                        % Left
  {\g__edu_subsubsectionbefore_dim - \parskip}      % Beforesep
  {\g__edu_subsubsectionafter_dim - \parskip}       % Aftersep

\end{MacroCode}


\subsubsection{Absatzauszeichnung}

Es können Einzug (\opt{parindent}) und Abstand zwischen Absätzen (\opt{parskip}) kombiniert werden:

\begin{macro}{\setpar}
Setzt die Absatzauszeichnung.
\begin{MacroCode}{class}
\DeclareDocumentCommand \setpar { } {
  \bool_if:NTF \g_edu_parindent_bool {
    \bool_if:NT \g_edu_parskip_bool {
      \KOMAoptions{parskip=half}
    }
    \setlength{\parindent}{1em} % Important: After \KOMAoptions{parskip=half}
  }{
    \bool_if:NT \g_edu_parskip_bool {
      \KOMAoptions{parskip=half}
    }
    \setlength{\parindent}{0em}
  }
}

\AtBeginDocument{%
  \setpar%
}

\end{MacroCode}
\end{macro}


\begin{macro}{\parskipreduce}
An vielen Stellen muss der Absatzabstand nachträglich entfernt werden. Hierzu dient dieses Makro.
\begin{MacroCode}{class}
\DeclareDocumentCommand \parskipreduce { } {%
  \vspace{-\parskip}
}

\end{MacroCode}
\end{macro}


\subsubsection{Inhaltsverzeichnis}

Bei der Verwendung von Parts als höchste Gliederungsebene wird die Überschrift des Inhaltsverzeichnisses vergrößert.
\begin{MacroCode}{class}
\bool_if:NT \g_edu_parts_bool {
  \AtBeginDocument{
    \tl_gput_left:Nn \contentsname {\LARGE}
  }
}

\end{MacroCode}

Die Farbe und Schriftgröße von Parts im Inhaltsverzeichnis wird vergrößert.
\begin{MacroCode}{class}
\addtokomafont{partentry}{%  
  \color{wuDarkRed}\Large
}

\end{MacroCode}


\subsubsection{Titel}

Bei der Option \opt{parts} wird der Titel in der Schriftgröße \texttt{huge} gesetzt:
\begin{MacroCode}{class}
\AtEndPreamble{
  \bool_if:NT \g_edu_parts_bool {
    \tl_gput_right:Nn \g_edu_titlestyle_tl {
      \huge
    }
    \tl_gput_right:Nn \g_edu_subtitlestyle_tl {
      \LARGE
    }
  }
}

\end{MacroCode}


\begin{macro*}{\g__edu_titletext_tl}
\begin{macro}{\maketitle}
\begin{macro}{\maketitle*}
\begin{MacroCode}{class}
\tl_new:N \g__edu_titletext_tl

\DeclareDocumentCommand \maketitle {s} {
	
	\IfBooleanTF{#1} {
		  
		\setlength{\parfillskip}{0em}
	  \par
	  \vspace{0.75ex}
	  \parskipreduce
	  \group_begin:
	    \g_edu_titlestyle_tl%
	    \color{\g_edu_titlefg_tl}%
	    \noindent
	    \tl_if_empty:NF \g_edu_titlenumber_tl {
	      \g_edu_titlenumber_tl \hspace{\g_edu_titlenumbersep_dim}
	      \settowidth{\g_edu_temp_dim}{\g_edu_titlenumber_tl}
	      \addtolength{\g_edu_temp_dim}{\g_edu_titlenumbersep_dim}
	      \setlength{\global\g_edu_temp_dim}{\g_edu_temp_dim}
	    }
	    \g_edu_title_tl%
	  \group_end:
	  \hfill%
	  \tl_if_empty:NF \g_edu_short_tl {
	    \group_begin:
	      \g_edu_shortstyle_tl%
	      \setlength{\fboxsep}{0.25em}
	      \colorbox{\g_edu_shortbg_tl}{%
	        \textcolor{\g_edu_shortfg_tl}{\g_edu_short_tl}%
	      }%
	    \group_end:
	  }
	  \tl_if_empty:NF \g_edu_group_tl {
	    \group_begin:
	      \hspace{0.5em}
	      \g_edu_groupstyle_tl%
        \setlength{\fboxsep}{0.25em}
	      \colorbox{\g_edu_groupbg_tl}{%
	        \textcolor{\g_edu_groupfg_tl}{\g_edu_group_tl}%
	      }%
	    \group_end:
	  }
	  \bool_if:nT {
      \bool_if_p:N \g_edu_showresults_bool &&
      \bool_if_p:N \g_edu_resulttitlelabel_bool
    }{
      \group_begin:
        \hspace{0.4em}
        \g_edu_resulttitlelabelstyle_tl%
        \textcolor{\g_edu_resulttitlelabelfg_tl}{\g_edu_resulttitlelabellabel_tl}%
      \group_end:
    }
	  \mbox{}
	  \par
	  \setlength{\parfillskip}{1em plus 1fil}
	  
	  \tl_if_empty:NF \g_edu_subtitle_tl {
	    \parskipreduce
	    \group_begin:
	      \g_edu_subtitlestyle_tl
	      \color{\g_edu_titlefg_tl}
	      \noindent
		    \tl_if_empty:NF \g_edu_titlenumber_tl {
		      \hspace*{\g_edu_temp_dim}
		    }
	      \g_edu_subtitle_tl\par
	    \group_end:
	  }
		
	  \bool_if:NT \g_edu_transparency_bool {
	    \KOMAoption{fontsize}{\dim_use:N \g_edu_transparencyfontsize_dim}%
	    \RaggedRight
	    \tolerance=10000
	  }

	}{ % star
		\tl_if_empty:NF \g_edu_title_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_titlestyle_tl \color{\g_edu_titlefg_tl}
		      \noindent
		      \tl_if_empty:NF \g_edu_titlenumber_tl {
			      \g_edu_titlenumber_tl \hspace{\g_edu_titlenumbersep_dim}
			    }
		      \g_edu_title_tl
		    \group_end:
		    \par\parskipreduce
		  }
		}
		
		\tl_if_empty:NF \g_edu_subtitle_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \vspace{1ex}
		    \group_begin:
		      \g_edu_subtitlestyle_tl \color{\g_edu_titlefg_tl} \noindent \g_edu_subtitle_tl
		    \group_end:
		    \par\parskipreduce
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_subject_tl || !\tl_if_empty_p:N \g_edu_field_tl || !\tl_if_empty_p:N \g_edu_class_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \vspace{4ex}
		  }
		}
		
		\tl_if_empty:NF \g_edu_subject_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_subjectstyle_tl \noindent \g_edu_subject_tl
		    \group_end:
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_subject_tl && !\tl_if_empty_p:N \g_edu_field_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \g_edu_subjectstyle_tl :~
		  }
		}
		
		\tl_if_empty:NF \g_edu_field_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_fieldstyle_tl \noindent \g_edu_field_tl
		    \group_end:
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_subject_tl || !\tl_if_empty_p:N \g_edu_field_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \par\parskipreduce
		  }
		}
		
		\tl_if_empty:NF \g_edu_class_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_classstyle_tl \noindent \g_edu_class_tl
		    \group_end:
	      \par\parskipreduce
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_author_tl || !\tl_if_empty_p:N \g_edu_email_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \vspace{3ex}
		  }
		}
		
		\tl_if_empty:NF \g_edu_author_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_authorstyle_tl \noindent \g_edu_author_tl
		    \group_end:
	      \par\parskipreduce
		  }
		}
		
		\tl_if_empty:NF \g_edu_email_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_emailstyle_tl \noindent \href{mailto:\g_edu_email_tl}{\nolinkurl{\g_edu_email_tl}}
		    \group_end:
	      \par\parskipreduce
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_date_tl || !\tl_if_empty_p:N \g_edu_version_tl || \bool_if_p:N \g_edu_timestamptitle_bool || !\tl_if_empty_p:N \g_edu_license_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \vspace{4ex}
		  }
		}
		
		\tl_if_empty:NF \g_edu_date_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_datestyle_tl \noindent \g_edu_date_tl
		    \group_end:
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_date_tl && !\tl_if_empty_p:N \g_edu_version_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    ,~
		  }
		}
		
		\tl_if_empty:NF \g_edu_version_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_versionstyle_tl \noindent \g_edu_version_tl
		    \group_end:
		  }
		}
		
		\bool_if:nT {!\tl_if_empty_p:N \g_edu_date_tl || !\tl_if_empty_p:N \g_edu_version_tl} {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \par\parskipreduce
		  }
		}
		
		\bool_if:NT \g_edu_timestamptitle_bool {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_timestampstyle_tl\timestamp
		    \group_end:
		    \par\parskipreduce
		  }
		}
		
		\tl_if_empty:NF \g_edu_license_tl {
		  \tl_put_right:Nn \g__edu_titletext_tl {
		    \group_begin:
		      \g_edu_licensestyle_tl \noindent \g_edu_license_tl
		    \group_end:
		    \par\parskipreduce
		  }
		}
		
	  \vspace*{1cm}
	  \begin{center}
	    \g__edu_titletext_tl
	  \end{center}
	  
	  \skip_vertical:N \g_edu_titleskip_skip
	
	  \bool_if:NT \g_edu_transparency_bool {
	    \KOMAoption{fontsize}{\dim_use:N \g_edu_transparencyfontsize_dim}%
	    \RaggedRight
	    \tolerance=10000
	  }
	} % no star
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro*}


\subsubsection{Intro}

\begin{macro}{\intro}
Dient zur Einleitung eines Textes vor den eigentlichen Aufgaben. Erzeugt lediglich einen Abstand zwischen dem Titel (durch \cs{maketitle}) und dem nachfolgenden Fließtext.
\begin{MacroCode}{class}
\DeclareDocumentCommand \intro { } {
  \vspace{2ex}
  \parskipreduce
}

\end{MacroCode}
\end{macro}


\subsubsection{Abstract (Zusammenfassung)}

Die Absatzauszeichnung muss für den Abstract gesondert angewendet werden:
\begin{MacroCode}{class}
\tl_gput_right:Nn \quotation {
  \setpar
}

\bool_if:NF \g_edu_parindent_bool {	
	\tl_gput_right:Nn \quotation {
	  \noindent\ignorespaces
	}
}

\AtEndEnvironment{abstract}{\vspace{3em}}

\end{MacroCode}


\subsubsection{Kopfzeile}

\begin{macro}{\makeheader}
Dieses Makro erstellt in Abhängig der relevanten Optionen die Kopfzeile der ersten Seite.
\begin{MacroCode}{class}
\DeclareDocumentCommand \makeheader { } {
  \group_begin:
    \sffamily\small
    \group_begin:
      \noindent\g_edu_subjectshort_tl \hfill \g_edu_dateshort_tl
    \group_end:\\
    \group_begin:
      \noindent\g_edu_fieldshort_tl \hfill \g_edu_classshort_tl
    \group_end:\\
  \group_end:
  \noindent\rule[0.5em]{\textwidth}{\g_edu_headerrulewidth_dim}
}



\end{MacroCode}
\end{macro}


\subsubsection{Fußzeile}

Die Fußzeilen werden durch das Package \pkg{scrheadings} realisiert. Dieses wird zuerst aktiviert und die standard Kopf- und Fußzeilen gelöscht:
\begin{MacroCode}{class}
\AtBeginDocument {

	\pagestyle{scrheadings}
	\clearscrheadings
	\clearscrheadfoot

  \bool_if:NT \g_edu_footer_bool {
    
\end{MacroCode}

Abhängig von den getroffenen oder nicht getroffenen Angaben von \cs{author}, \cs{field} etc. wird der Inhalt der inneren Seite der Fußzeile (bei einseitigem Satz links) im Makro \cs{__edu_footertextl} erzeugt und an der entsprechenden Position der Fußzeile eingefügt:
\begin{macro*}{\l__edu_footertextl_tl}
\begin{MacroCode}{class}
  \tl_new:N \l__edu_footertextl_tl
    
  \tl_put_right:Nn \l__edu_footertextl_tl {
    \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{2}}}{\g_edu_fontsize_dim}\selectfont
  }
  
  \tl_if_empty:NF \g_edu_licenseshort_tl {
    \tl_put_right:Nn \l__edu_footertextl_tl {
      \g_edu_licenseshort_tl\hspace{0.6em}
    }
  }
  
  \tl_if_empty:NF \g_edu_authorshort_tl {
    \tl_put_right:Nn \l__edu_footertextl_tl {
      \textsc{\g_edu_authorshort_tl}\hspace{0.4em}
    }
  }
  
  \bool_if:nT {
    !\tl_if_empty_p:N \g_edu_fieldshort_tl || 
    !\tl_if_empty_p:N \g_edu_titleshort_tl
  }{
    \tl_put_right:Nn \l__edu_footertextl_tl {
      \textbar\hspace{0.4em}
    }
  }  
  
  \tl_if_empty:NF \g_edu_fieldshort_tl {
    \tl_put_right:Nn \l__edu_footertextl_tl {
      \g_edu_fieldshort_tl
    }
  }
  
  \bool_if:nT {
    !\tl_if_empty_p:N \g_edu_fieldshort_tl && 
    !\tl_if_empty_p:N \g_edu_titleshort_tl
  }{
    \tl_put_right:Nn \l__edu_footertextl_tl {
      :\
    }
  }
  
  \tl_if_empty:NF \g_edu_titleshort_tl {
    \tl_put_right:Nn \l__edu_footertextl_tl {
      \g_edu_titleshort_tl
    }
  }
  
  \refoot[]{\l__edu_footertextl_tl}  % gerade rechts
  \lofoot[]{\l__edu_footertextl_tl}  % ungerade links

\end{MacroCode}
\end{macro*}

Die andere Seite der Fußzeile wird mit der Seitenanzahl (\cs{pagemark}) und -- je nach Wert der Option \opt{pagecount} -- zusätzlich der Anzahl der Seiten (\cs{pageref{LastPage}}) versehen:
\begin{macro*}{\l__edu_footertextr_tl}
\begin{MacroCode}{class}
  
  \tl_new:N \l__edu_footertextr_tl
  
  \tl_put_right:Nn \l__edu_footertextr_tl {
    \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{2}}}{\g_edu_fontsize_dim}\selectfont
  }
  
  \bool_if:nT {
    !\tl_if_empty_p:N \g_edu_versionshort_tl ||
    \bool_if_p:N \g_edu_timestampfooter_bool
  }{
    \tl_put_right:Nn \l__edu_footertextr_tl {
      [\fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{3}}}{\g_edu_fontsize_dim}\selectfont
    }
  }

  \tl_if_empty:NF \g_edu_versionshort_tl {
    \tl_put_right:Nn \l__edu_footertextr_tl {
      \g_edu_versionshort_tl
    }
  }

  \bool_if:nT {
    !\tl_if_empty_p:N \g_edu_versionshort_tl &&
    \bool_if_p:N \g_edu_timestampfooter_bool
  }{
    \tl_put_right:Nn \l__edu_footertextr_tl {
      ,~
    }
  }

  \bool_if:NT \g_edu_timestampfooter_bool {
    \tl_put_right:Nn \l__edu_footertextr_tl {
      \timestamp
    }
  }

  \bool_if:nT {
    !\tl_if_empty_p:N \g_edu_versionshort_tl ||
    \bool_if_p:N \g_edu_timestampfooter_bool
  }{
    \tl_put_right:Nn \l__edu_footertextr_tl {
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{2}}}{\g_edu_fontsize_dim}\selectfont
      ]
      \quad
    }
  }
  
  \tl_put_right:Nn \l__edu_footertextr_tl {
    
    \tl_if_empty:NF \g_edu_short_tl {
      \g_edu_shortstyle_tl
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{1}}}{\g_edu_fontsize_dim}\selectfont%
      \setlength{\fboxsep}{0.25em}
      \colorbox{black}{%
        \textcolor{\g_edu_shortfg_tl}{\g_edu_shortshort_tl}%
      }%
    }
    
    \tl_if_empty:NF \g_edu_group_tl {
      \hspace{0.25em}
      \g_edu_groupstyle_tl
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{1}}}{\g_edu_fontsize_dim}\selectfont%
      \setlength{\fboxsep}{0.25em}
      \colorbox{black}{%
        \textcolor{\g_edu_groupfg_tl}{\g_edu_groupshort_tl}%
      }%
    }
    
    \bool_if:nT {
      \bool_if_p:N \g_edu_showresults_bool &&
      \bool_if_p:N \g_edu_resulttitlelabel_bool
    }{
      \hspace{0.4em}
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim + \fp_to_dim:n{4}}}{\g_edu_fontsize_dim}\selectfont%
      \textcolor{black}{\g_edu_resulttitlelabellabel_tl}%
    }
    \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{2}}}{\g_edu_fontsize_dim}\selectfont\quad
  }
  
  \bool_if:NT \g_edu_pagecount_bool {
    \rofoot[]{\l__edu_footertextr_tl
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{1}}}{\g_edu_fontsize_dim}\selectfont
      \normalfont\sffamily%
      \pagemark/\pageref*{LastPage}}         % gerade rechts
    \lefoot[]{\l__edu_footertextr_tl
      \fontsize{\dim_eval:n{\g_edu_fontsize_dim - \fp_to_dim:n{1}}}{\g_edu_fontsize_dim}\selectfont      
      \normalfont\sffamily%
      \pagemark/\pageref*{LastPage}}         % ungerade links
  }{
    \lefoot[]{\l__edu_footertextr_tl\pagemark}                    % gerade links
    \rofoot[]{\l__edu_footertextr_tl\pagemark}                    % ungerade rechts
  }

\end{MacroCode}
\end{macro*}


Kopfzeilen bleiben leer:
\begin{MacroCode}{class}
  \lehead[]{}  % gerade links
  \rehead[]{}  % gerade rechts
  \lohead[]{}  % ungerade links
  \rohead[]{}  % ungerade rechts

\end{MacroCode}

Die Formatierung von \cs{pagemark} und der Fußzeile wird durch \pkg{scrheadings} vorgenommen und muss gesondert vorgenommen werden:
\begin{MacroCode}{class}
  \setkomafont{pagenumber}{
    \normalfont\sffamily
  }

  \setkomafont{pagefoot}{
    \normalfont\sffamily
  }
  }{ % \bool_if:NT \g_edu_footer_bool
    \pagestyle{empty}
  }
} % \AtBeginDocument

\end{MacroCode}


\subsubsection{Typographie}


\begin{macro}{\textsfbf}[1]{<text>}
\begin{macro}{\cemph}[1]{<text>}
\begin{macro}{\csfemph}[1]{<text>}
\begin{macro}{\uline}
Formatierungskommandos:
\begin{MacroCode}{class}
\DeclareDocumentCommand \textsfbf { m } {
  \text{\sffamily\bfseries #1}
}

\DeclareDocumentCommand \cemph { m } {
  \textcolor{\g_edu_cemphfg_tl}{#1}
}

\DeclareDocumentCommand \csfemph { m } {
  \textcolor{\g_edu_cemphfg_tl}{\sffamily #1}
}

% Create command \ulined working as a underlined switch (ulem)
\useunder{\uline}{\ulined}{}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\begin{macro}{\textrightarrow}
\begin{macro}{\textRightarrow}
\begin{MacroCode}{class}
\DeclareDocumentCommand \textrightarrow { } {$\rightarrow$\xspace}
\DeclareDocumentCommand \textRightarrow { } {$\Rightarrow$\xspace}

\end{MacroCode}
\end{macro}
\end{macro}

Das Eurozeichen der Tastatur als \cs{euro}-Makro auffassen, dass mithilfe des Packages \textsf{eurosym} das Eurosymbols setzt:
\begin{MacroCode}{class}
\DeclareUnicodeCharacter{20AC}{\euro}

\end{MacroCode}



\begin{macro}{\headrule}
Das folgende Makro erzeugt eine \cs{midrule} des \pkg{booktabs}-Packages in der Stärke \cs{heavyrulethick} zum optisch auffallenderen Trennen des Kopfes einer Tabelle und deren Inhalt:
\begin{MacroCode}{class}
\DeclareExpandableDocumentCommand \headrule { } {
  \midrule[\heavyrulewidth]
}

\end{MacroCode}
\end{macro}


\subsubsection{Einheiten}

Konfiguration des Packages \pkg{siunitx} nach deutscher Konvention:
\begin{MacroCode}{class}
\sisetup{%
  locale=DE,%
  per-mode=fraction,%
  list-final-separator={ und },%
  list-pair-separator={ und },%
  list-separator={; },%
  range-phrase={ bis }
}

\end{MacroCode}

Häufig genutzte Einheiten werden definiert:
\begin{MacroCode}{class}
\DeclareSIUnit \scm{\square\centi\metre}
\DeclareSIUnit \sm{\square\metre}
\DeclareSIUnit \skm{\square\kilo\metre}

\DeclareSIUnit \qcm{\square\centi\metre}
\DeclareSIUnit \qm{\square\metre}
\DeclareSIUnit \qkm{\square\kilo\metre}

\DeclareSIUnit \ccm{\cubic\centi\metre}
\DeclareSIUnit \cm{\cubic\metre}
\DeclareSIUnit \ckm{\cubic\kilo\metre}

\DeclareSIUnit \cmps{\centi\metre\per\second}
\DeclareSIUnit \mps{\metre\per\second}
\DeclareSIUnit \kmps{\kilo\metre\per\second}

\DeclareSIUnit \cmph{\centi\metre\per\hour}
\DeclareSIUnit \mph{\metre\per\hour}
\DeclareSIUnit \kmph{\kilo\metre\per\hour}

\end{MacroCode}


\subsection{Abkürzungen, Symbole etc.}

\subsubsection{Abkürzungen} 

\begin{macro}{\dh}
\begin{macro}{\Dh}
\begin{macro}{\luv}
\begin{macro}{\Luv}
\begin{macro}{\so}
\begin{macro}{\So}
\begin{macro}{\su}
\begin{macro}{\Su}
\begin{macro}{\ua}
\begin{macro}{\Ua}
\begin{macro}{\uU}
\begin{macro}{\UU}
\begin{macro}{\zB}
\begin{macro}{\ZB}
Deutsche Abkürzungen:
\begin{MacroCode}{class}
\DeclareDocumentCommand \dh { } {d.\,h.\xspace}
\DeclareDocumentCommand \Dh { } {D.\,h.\xspace}
\DeclareDocumentCommand \luv { } {l.\,u.\,v.\xspace}
\DeclareDocumentCommand \Luv { } {L.\,u.\,v.\xspace}
\DeclareDocumentCommand \so { } {s.\,o.\xspace}
\DeclareDocumentCommand \So { } {S.\,o.\xspace}
\DeclareDocumentCommand \su { } {s.\,u.\xspace}
\DeclareDocumentCommand \Su { } {S.\,u.\xspace}
\DeclareDocumentCommand \ua { } {u.\,a.\xspace}
\DeclareDocumentCommand \Ua { } {U.\,a.\xspace}
\DeclareDocumentCommand \uU { } {u.\,U.\xspace}
\DeclareDocumentCommand \UU { } {U.\,U.\xspace}
\DeclareDocumentCommand \zB { } {z.\,B.\xspace}
\DeclareDocumentCommand \ZB { } {Z.\,B.\xspace}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\subsubsection{Siehe Abschnitte, siehe Abbildungen, etc.}

\begin{macro}{\see}
\begin{macro}{\seea}
\begin{macro}{\seee}
\begin{macro}{\seef}
\begin{macro}{\seel}
\begin{macro}{\seer}
\begin{macro}{\sees}
\begin{macro}{\seesol}
Geklammerte 'Siehe'-Verweise auf Abschnitte, Abbildungen, etc:
\begin{MacroCode}{class}
\DeclareDocumentCommand \see { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seea { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seeappendixlabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seee { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seeexerciselabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seef { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seefigurelabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seel { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seelistinglabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seer { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \sees { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seesectionlabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\DeclareDocumentCommand \seesol { m } {%
  \g_edu_seeleft_tl%
  \g_edu_seelabel_tl\g_edu_seelabelsep_tl%
  \g_edu_seesolutionlabel_tl\g_edu_seerefsep_tl\ref{#1}%
  \g_edu_seeright_tl%
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\subsubsection{Aufgaben angeben: S.\,X, Nr.\,Y}

\begin{macro}{\pg}[1]{<pagenumber>}
Zur Angabe von Seiten im Format S.\,X.
\begin{MacroCode}{class}

\DeclareDocumentCommand \pg { m } {
  \tl_if_empty:nF {#1} {
    \g_edu_pglabel_tl\,#1\xspace
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\no}[1]{<number>}
Zur Angabe von Aufgaben im Format Nr.\,Y.
\begin{MacroCode}{class}

\DeclareDocumentCommand \no { m } {
  \tl_if_empty:nF {#1} {
    \g_edu_nolabel_tl\,#1\xspace
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\pgno}[2]{<pagenumber>}{<number>}
Zur Angabe von Aufgaben im Format S.\,X, Nr.\,Y.
\begin{MacroCode}{class}

\DeclareDocumentCommand \pgno { m m } {
  \g_edu_pglabel_tl\,#1,\xspace
  \g_edu_nolabel_tl\,#2\xspace
}

\end{MacroCode}
\end{macro}


\subsubsection{Kasten \emph{Bitte wenden}}

\begin{macro}{\pto}
Setzt einen kleinen Kasten mit der Aufforderung zum Wenden des Blattes in die rechte untere Ecke.
\begin{MacroCode}{class}
\DeclareDocumentCommand \pto {  } {%
	\vfill
	\par
	\setlength{\parfillskip}{0pt}
	\hfill\fbox{\g_edu_ptolabelstyle_tl \g_edu_ptolabel_tl \g_ptosymbolstyle_tl \g_ptosymbol_tl}
	\par
	\setlength{\parfillskip}{1em plus 1fil}
}

\end{MacroCode}
\end{macro}


\subsubsection{Creative Commons Lizenz}

\begin{macro}{\__edu_ccScale:n}[1]{<scale factor>}
First, the control sequence \cs{__edu_ccScale} is declared to scale the  icons:
\begin{MacroCode}{class}
\cs_new:Npn \__edu_ccScale:n #1 {
  \scalebox{\fp_use:N \g_edu_ccscale_fp}{#1}
}

\end{MacroCode}
\end{macro}


\begin{macro*}{\__edu_ccLogo}
\begin{macro*}{\__edu_ccAttribution}
\begin{macro*}{\__edu_ccShareAlike}
\begin{macro*}{\__edu_ccNoDerivatives}
\begin{macro*}{\__edu_ccNonCommercial}
\begin{macro*}{\__edu_ccNonCommercialEU}
\begin{macro*}{\__edu_ccNonCommercialJP}
\begin{macro*}{\__edu_ccZero}
\begin{macro*}{\__edu_ccPublicDomain}
\begin{macro*}{\__edu_ccSampling}
\begin{macro*}{\__edu_ccShare}
\begin{macro*}{\__edu_ccRemix}
\begin{macro*}{\__edu_ccCopy}
\begin{macro*}{\__edu_ccby}
\begin{macro*}{\__edu_ccbysa}
\begin{macro*}{\__edu_ccbynd}
\begin{macro*}{\__edu_ccbync}
\begin{macro*}{\__edu_ccbynceu}
\begin{macro*}{\__edu_ccbyncjp}
\begin{macro*}{\__edu_ccbyncsa}
\begin{macro*}{\__edu_ccbyncsaeu}
\begin{macro*}{\__edu_ccbyncsajp}
\begin{macro*}{\__edu_ccbyncnd}
\begin{macro*}{\__edu_ccbyncndeu}
\begin{macro*}{\__edu_ccbyncndjp}
\begin{macro*}{\__edu_cczero}
\begin{macro*}{\__edu_ccpd}
Copies of all icons are created:
\begin{MacroCode}{class}
\cs_new_eq:NN \__edu_ccLogo \ccLogo
\cs_new_eq:NN \__edu_ccAttribution \ccAttribution
\cs_new_eq:NN \__edu_ccShareAlike \ccShareAlike
\cs_new_eq:NN \__edu_ccNoDerivatives \ccNoDerivatives
\cs_new_eq:NN \__edu_ccNonCommercial \ccNonCommercial
\cs_new_eq:NN \__edu_ccNonCommercialEU \ccNonCommercialEU
\cs_new_eq:NN \__edu_ccNonCommercialJP \ccNonCommercialJP
\cs_new_eq:NN \__edu_ccZero \ccZero
\cs_new_eq:NN \__edu_ccPublicDomain \ccPublicDomain
\cs_new_eq:NN \__edu_ccSampling \ccSampling
\cs_new_eq:NN \__edu_ccShare \ccShare
\cs_new_eq:NN \__edu_ccRemix \ccRemix
\cs_new_eq:NN \__edu_ccCopy \ccCopy

\cs_new_eq:NN \__edu_ccby \ccby
\cs_new_eq:NN \__edu_ccbysa \ccbysa
\cs_new_eq:NN \__edu_ccbynd \ccbynd
\cs_new_eq:NN \__edu_ccbync \ccbync
\cs_new_eq:NN \__edu_ccbynceu \ccbynceu
\cs_new_eq:NN \__edu_ccbyncjp \ccbyncjp
\cs_new_eq:NN \__edu_ccbyncsa \ccbyncsa
\cs_new_eq:NN \__edu_ccbyncsaeu \ccbyncsaeu
\cs_new_eq:NN \__edu_ccbyncsajp \ccbyncsajp
\cs_new_eq:NN \__edu_ccbyncnd \ccbyncnd
\cs_new_eq:NN \__edu_ccbyncndeu \ccbyncndeu
\cs_new_eq:NN \__edu_ccbyncndjp \ccbyncndjp
\cs_new_eq:NN \__edu_cczero \cczero
\cs_new_eq:NN \__edu_ccpd \ccpd

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}
\end{macro*}


\begin{macro}{\ccLogo}
\begin{macro}{\ccAttribution}
\begin{macro}{\ccShareAlike}
\begin{macro}{\ccNoDerivatives}
\begin{macro}{\ccNonCommercial}
\begin{macro}{\ccNonCommercialEU}
\begin{macro}{\ccNonCommercialJP}
\begin{macro}{\ccZero}
\begin{macro}{\ccPublicDomain}
\begin{macro}{\ccSampling}
\begin{macro}{\ccShare}
\begin{macro}{\ccRemix}
\begin{macro}{\ccCopy}
User commands with scaled (starred) versions are created:
\begin{MacroCode}{class}
\DeclareDocumentCommand \ccLogo { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccLogo}
  }{
    \__edu_ccLogo
  }
}

\DeclareDocumentCommand \ccAttribution { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccAttribution}
  }{
    \__edu_ccAttribution
  }
}

\DeclareDocumentCommand \ccShareAlike { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccShareAlike}
  }{
    \__edu_ccShareAlike
  }
}

\DeclareDocumentCommand \ccNoDerivatives { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccNoDerivatives}
  }{
    \__edu_ccNoDerivatives
  }
}

\DeclareDocumentCommand \ccNonCommercial { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccNonCommercial}
  }{
    \__edu_ccNonCommercial
  }
}

\DeclareDocumentCommand \ccNonCommercialEU { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccNonCommercialEU}
  }{
    \__edu_ccNonCommercialEU
  }
}

\DeclareDocumentCommand \ccNonCommercialJP { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccNonCommercialJP}
  }{
    \__edu_ccNonCommercialJP
  }
}

\DeclareDocumentCommand \ccZero { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccZero}
  }{
    \__edu_ccZero
  }
}

\DeclareDocumentCommand \ccPublicDomain { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccPublicDomain}
  }{
    \__edu_ccPublicDomain
  }
}

\DeclareDocumentCommand \ccSampling { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccSampling}
  }{
    \__edu_ccSampling
  }
}

\DeclareDocumentCommand \ccShare { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccShare}
  }{
    \__edu_ccShare
  }
}

\DeclareDocumentCommand \ccRemix { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccRemix}
  }{
    \__edu_ccRemix
  }
}

\DeclareDocumentCommand \ccCopy { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccCopy}
  }{
    \__edu_ccCopy
  }
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\begin{macro}{\ccby*}
\begin{macro}{\ccbysa*}
\begin{macro}{\ccbynd*}
\begin{macro}{\ccbync*}
\begin{macro}{\ccbynceu*}
\begin{macro}{\ccbyncjp*}
\begin{macro}{\ccbyncsa*}
\begin{macro}{\ccbyncsaeu*}
\begin{macro}{\ccbyncsajp*}
\begin{macro}{\ccbyncnd*}
\begin{macro}{\ccbyncndeu*}
\begin{macro}{\ccbyncndjp*}
\begin{macro}{\cczero*}
\begin{macro}{\ccpd*}
Skalierte Symbole für Create Commons Lizenz:
\begin{MacroCode}{class}
\DeclareDocumentCommand \ccby { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccby}
  }{
    \__edu_ccby
  }
}

\DeclareDocumentCommand \ccbysa { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbysa}
  }{
    \__edu_ccbysa
  }
}

\DeclareDocumentCommand \ccbynd { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbynd}
  }{
    \__edu_ccbynd
  }
}

\DeclareDocumentCommand \ccbync { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbync}
  }{
    \__edu_ccbync
  }
}

\DeclareDocumentCommand \ccbynceu { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbynceu}
  }{
    \__edu_ccbynceu
  }
}

\DeclareDocumentCommand \ccbyncjp { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncjp}
  }{
    \__edu_ccbyncjp
  }
}

\DeclareDocumentCommand \ccbyncsa { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncsa}
  }{
    \__edu_ccbyncsa
  }
}

\DeclareDocumentCommand \ccbyncsaeu { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncsaeu}
  }{
    \__edu_ccbyncsaeu
  }
}

\DeclareDocumentCommand \ccbyncsajp { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncsajp}
  }{
    \__edu_ccbyncsajp
  }
}

\DeclareDocumentCommand \ccbyncnd { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncnd}
  }{
    \__edu_ccbyncnd
  }
}

\DeclareDocumentCommand \ccbyncndeu { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncndeu}
  }{
    \__edu_ccbyncndeu
  }
}

\DeclareDocumentCommand \ccbyncndjp { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccbyncndjp}
  }{
    \__edu_ccbyncndjp
  }
}

\DeclareDocumentCommand \cczero { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_cczero}
  }{
    \__edu_cczero
  }
}

\DeclareDocumentCommand \ccpd { s } {
  \IfBooleanTF {#1} {
    \__edu_ccScale:n{\__edu_ccpd}
  }{
    \__edu_ccpd
  }
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\subsubsection{Symbole für Unterrichtsablauf}

\begin{macro}{\action}
\begin{macro}{\speech}
Symbole für Handlung oder Sprache -- erstellt mit \pkg{tikz}.
\begin{MacroCode}{class}
\ExplSyntaxOff % Important! TikZ has problems with expl3. Use \@usetl instead.
\DeclareDocumentCommand \action { } {%
  \raisebox{0.5ex}{%
    \resizebox{1em}{!}{%
      \tikz \draw[\@usetl{edu}{actionfg}{tl}, ->, line width=2.5pt] (0,0) .. controls (0.1, 0.1) ..  (0.5,0);%
    }%
  }\xspace%
}

\DeclareDocumentCommand \speech { }{%
  \raisebox{0.5ex}{%
    \resizebox{1em}{\heightof{L}}{%
      \tikz \node[\@usetl{edu}{speechfg}{tl}, draw, fill, ellipse callout, callout relative pointer={(0.25,-0.25)}, callout pointer arc=40, xscale=-1] {\phantom{aa}};%
    }%
  }\xspace%
}

\ExplSyntaxOn

\end{MacroCode}
\end{macro}
\end{macro}


\subsection{Grafik}

\subsubsection{Vordefinierte Farben}

Definition der verwendeten Farben:
\begin{MacroCode}{class}
\definecolor{wuDarkRed}{HTML}{910000}
\definecolor{wuSemiDarkRed}{HTML}{a00000}
\definecolor{wuRed}{HTML}{F22222}

\definecolor{wuDarkerGray}{RGB}{75, 75, 75}  
\definecolor{wuDarkGray}{RGB}{160, 160, 160}  
\definecolor{wuGray}{RGB}{210, 210, 210}  
\definecolor{wuLightGray}{RGB}{227, 227, 227}  
\definecolor{wuLighterGray}{RGB}{235, 235, 235}  

\definecolor{wuBlue}{HTML}{3851FF}
\definecolor{wuGreen}{HTML}{009E0A}
\definecolor{wuOrange}{HTML}{FF8D29}
\definecolor{wuPink}{HTML}{FF5BF8}
\definecolor{wuViolet}{HTML}{9F32CC}
\definecolor{wuTurquoise}{HTML}{3E9DA6}
\definecolor{wuBrown}{HTML}{885704}

\end{MacroCode}


\subsubsection{Grafikpfad}

\begin{MacroCode}{class}
\AtBeginDocument{
  \graphicspath{\g_edu_graphicspath_tl}  
}

\end{MacroCode}


\subsubsection{Umgebungen}

\begin{macro}{\includegraphicsc}[2]{[<optional arguments>]}{<filename>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \includegraphicsc { o m } {
  \group_begin:
    \centering \includegraphics[#1]{#2}
    \par
  \group_end:
}

\end{MacroCode}
\end{macro}



\subsubsection{TikZ}

Laden zusätzlicher \pkg{tikz}-Bibliotheken:
\begin{MacroCode}{class}
\ExplSyntaxOff  % Important! \usetikzlibrary doesn't work within \ExplSyntax*.
\usetikzlibrary{angles}
\usetikzlibrary{calc}
\usetikzlibrary{fadings}
\usetikzlibrary{patterns}  
\usetikzlibrary{positioning}  
\usetikzlibrary{shapes.callouts}

\end{MacroCode}

Konfiguration von \pkg{tikz}:
\begin{MacroCode}{class}
\tikzset{>=stealth}
\tikzset{font=\small}
\tikzset{execute at end picture={\renewcommand{\tikzScale}{1.0}}}

\end{MacroCode}

Der folgende Befehl behebt vom Adobe Reader falsch angezeigte Farben mit opacity-Option. Weshalb ist mir nicht bekannt.
\begin{MacroCode}{class}
\pdfpageattr{/Group << /S /Transparency /I true /CS /DeviceRGB>>}

\ExplSyntaxOn

\end{MacroCode}

Vordefinierte Werte, die innerhalb von Grafiken das Erstellen von Graphen verwendet werden können.

\begin{macro}{\g_edu_tikzscale_fp}
\begin{macro}{\tikzScale}
\begin{macro}{\tikzXStart}
\begin{macro}{\tikzXEnd}
\begin{macro}{\tikzYStart}
\begin{macro}{\tikzYEnd}
\begin{MacroCode}{class}
% TODO: pgfplots?
\fp_new:N \g_edu_tikzscale_fp
\fp_gset:Nn \g_edu_tikzscale_fp {1}

\DeclareDocumentCommand \tikzXStart { } {-3}
\DeclareDocumentCommand \tikzXEnd { } {3}
\DeclareDocumentCommand \tikzYStart { } {-3}
\DeclareDocumentCommand \tikzYEnd { } {3}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\begin{macro}{\tikzscale}[1]{<scale>}
\begin{macro}{\tikzscalefactor}
Wird innerhalb einer TikZ-Grafik das Makro \cs{tikzscalefactor} als 
Skalierungsfaktor verwendet, kann die Grafik durch Aufruf 
dieses Befehls skaliert werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \tikzscale { m } {
  \fp_gset:Nn \g_edu_tikzscale_fp {#1}
}

\DeclareExpandableDocumentCommand \tikzscalefactor { } {
  \fp_use:N \g_edu_tikzscale_fp
}

\end{MacroCode}
\end{macro}
\end{macro}

\begin{macro}{\tikzinput}[2]{[<scale>]}{<pgf-file>}
\begin{macro}{\tikzinput*}[2]{[<scale>]}{<pgf-file>}
Zum Laden von PGF-Dateien mit TikZ-Code aus dem Ordner/Pfad \cs{g_edu_tikzpath} kann dieses Makro verwendet werden. Die Sternvariante zentriert die Graphik durch Schachtelung in eine \env*{center}-Umgebung.
\begin{MacroCode}{class}
\DeclareDocumentCommand \tikzinput { s O{1.0} m } {%
  \fp_gset:Nn \g_edu_tikzscale_fp {#2}%
  \IfBooleanT {#1} {
    \begin{center}
  }
  \input{\g_edu_tikzpath_tl#3}%
  \IfBooleanT {#1} {
    \end{center}
  }
  \fp_set:Nn \g_edu_tikzscale_fp {1.0}%
}

\end{MacroCode}
\end{macro}
\end{macro}


\begin{option}{cross (TikZ node style)}
Mithilfe des Node-Styles \opt{cross} kann ein Node in Form eines Kreuzes erstellt werden. Optional kann durch \texttt{cross=<scale>} die Größe skaliert werden. Durch \texttt{rotate=<angle>} kann es rotiert werden.
\begin{MacroCode}{class}
\tikzset{cross/.style={cross out, draw=black, fill=none, minimum size=2*(#1-\pgflinewidth), inner sep=0pt, outer sep=0pt}, cross/.default={2pt}}

\end{MacroCode}
\end{option}


\subsubsection{PDF-Raster}

\begin{macro}{\pdfgrid}[3]{[<included pages>]}{<filename>}{[<page width>]}
\begin{macro}{\pdfgrid*}[3]{[<excluded pages>]}{<filename>}{[<page width>]}
Allows to include a PDF file arranged in a grid. The number of pages of the PDF has to be specified. Opionally, some pages may be included (excluded in starred version) as a comma separated list and the width of one page can be specified.
\begin{MacroCode}{class}
\DeclareDocumentCommand{\pdfgrid} { s o m O{0.445\linewidth} } {
  \IfBooleanTF {#1} {
    \edu_create_grid_exclude:nnn {#2} {#3} {#4}
  }{
    % \edu_create_grid_include only works, if #2 is not empty
    % Otherwise, \edu_create_grid_exclude works
    \IfNoValueTF {#2} {
      \edu_create_grid_exclude:nnn {#2} {#3} {#4}
    }{
      \edu_create_grid_include:nnn {#2} {#3} {#4}
    }
  }
}

\end{MacroCode}
\end{macro}
\end{macro}

\begin{macro*}{\l_edu_loop_count_int}
\begin{macro*}{\l_edu_loop_count_int}
Counters for creating the grid.
\begin{MacroCode}{class}
\int_new:N \l_edu_loop_count_int
\int_set:Nn \l_edu_loop_count_int {1}

\int_new:N \l_edu_break_count_int
\int_set:Nn \l_edu_break_count_int {1}

\end{MacroCode}
\end{macro*}
\end{macro*}

\begin{macro*}{\edu_create_grid_include:nnn}[3]{[<included pages>]}{<filename>}{[<page width>]}
\begin{macro*}{\edu_create_grid_exclude:nnn}[3]{[<excluded pages>]}{<filename>}{[<page width>]}
Counters for creating the grid.
\begin{MacroCode}{class}
\cs_new_protected:Npn \edu_create_grid_include:nnn #1 #2 #3 {

  \setlength{\parfillskip}{0em}
	\par
  \vspace{0.25\baselineskip}
  \int_set:Nn \l_edu_loop_count_int {1}
  \int_set:Nn \l_edu_break_count_int {1}
  
  \pdfximage{\g_edu_graphicspath_tl#2}

  \prg_replicate:nn {\the\pdflastximagepages} {
      \clist_if_in:nVT {#1} {\int_use:N \l_edu_loop_count_int} {
        \frame{\includegraphics[width=#3, page=\tl_use:N \l_edu_loop_count_int]{#2}}
        \int_if_odd:nTF {\l_edu_break_count_int} {
            \hfill
          }{
            \par
            \bigskip
            \noindent
          }
          \int_incr:N \l_edu_break_count_int
      }
      \int_incr:N \l_edu_loop_count_int
  }
  \par
	\setlength{\parfillskip}{1em plus 1fil}
}

\cs_new_protected:Npn \edu_create_grid_exclude:nnn #1 #2 #3 {

  \setlength{\parfillskip}{0em}
	\par
  \vspace{0.25\baselineskip}
  \int_set:Nn \l_edu_loop_count_int {1}
  \int_set:Nn \l_edu_break_count_int {1}
  
  \pdfximage{\g_edu_graphicspath_tl#2}

  \prg_replicate:nn {\the\pdflastximagepages} {
      \clist_if_in:nVF {#1} {\int_use:N \l_edu_loop_count_int} {
        \frame{\includegraphics[width=#3, page=\tl_use:N \l_edu_loop_count_int]{#2}}
        \int_if_odd:nTF {\l_edu_break_count_int} {
            \hfill
          }{
            \par
            \bigskip
            \noindent
          }
          \int_incr:N \l_edu_break_count_int
      }
      \int_incr:N \l_edu_loop_count_int
  }
  \par
	\setlength{\parfillskip}{1em plus 1fil}
}

\end{MacroCode}
\end{macro*}
\end{macro*}


\subsubsection{Mario}

Definition of Mario's colors:
\begin{MacroCode}{class}
\definecolor{marioBrown}{HTML}{8F581F}

\definecolor{marioBlue1}{HTML}{002F5F}
\definecolor{marioBlue2}{HTML}{004994}
\definecolor{marioBlue3}{HTML}{0068D2}

\definecolor{marioRed1}{HTML}{4C040B}
\definecolor{marioRed2}{HTML}{9E0918}
\definecolor{marioRed3}{HTML}{FF0E26}

\definecolor{marioSkin}{HTML}{FFD0C0}

\end{MacroCode}

\begin{macro}{\edu_mariovictory_pixel:}
Pixels of Mario graphic in \pkg{tikz}.
\begin{MacroCode}{class}
\cs_new:Npn \edu_mariovictory_pixel: {
	\filldraw[marioRed1]		(7, 27)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(8, 27)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(9, 27)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(10, 27)	rectangle ++(1, 1);
	
	\filldraw[black]			  (1, 26)		rectangle ++(1, 1);
	\filldraw[black]			  (2, 26)		rectangle ++(1, 1);
	\filldraw[black]			  (4, 26)		rectangle ++(1, 1);
	\filldraw[black]			  (5, 26)		rectangle ++(1, 1);
	\filldraw[marioRed1]	  (6, 26)		rectangle ++(1, 1);
	\filldraw[marioRed3]	  (7, 26)		rectangle ++(1, 1);
	\filldraw[marioRed3]	  (8, 26)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(9, 26)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(10, 26)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(11, 26)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(12, 26)	rectangle ++(1, 1);
	
	\filldraw[black]			  (1, 25)		rectangle ++(1, 1);
	\filldraw[white]			  (2, 25)		rectangle ++(1, 1);
	\filldraw[black]			  (3, 25)		rectangle ++(1, 1);
	\filldraw[white]			  (4, 25)		rectangle ++(1, 1);
	\filldraw[black]			  (5, 25)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(6, 25)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(7, 25)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(8, 25)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(9, 25)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(10, 25)	rectangle ++(1, 1);
	\filldraw[marioRed3]		(11, 25)	rectangle ++(1, 1);
	\filldraw[marioRed2]		(12, 25)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(13, 25)	rectangle ++(1, 1);
	
	\filldraw[black]			  (2, 24)		rectangle ++(1, 1);
	\filldraw[white]			  (3, 24)		rectangle ++(1, 1);
	\filldraw[white]			  (4, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (5, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (6, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (7, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (8, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (9, 24)		rectangle ++(1, 1);
	\filldraw[black]			  (10, 24)	rectangle ++(1, 1);
	\filldraw[black]		  	(11, 24)	rectangle ++(1, 1);
	\filldraw[marioRed3]		(12, 24)	rectangle ++(1, 1);
	\filldraw[marioRed2]		(13, 24)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(14, 24)	rectangle ++(1, 1);
	
	\filldraw[black]		  	(1, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(2, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(3, 23)		rectangle ++(1, 1);
	\filldraw[white]		  	(4, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(6, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(7, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(8, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(9, 23)		rectangle ++(1, 1);
	\filldraw[black]		  	(10, 23)	rectangle ++(1, 1);
	\filldraw[black]		  	(11, 23)	rectangle ++(1, 1);
	\filldraw[black]		  	(12, 23)	rectangle ++(1, 1);
	\filldraw[marioRed2]		(13, 23)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(14, 23)	rectangle ++(1, 1);
	
	\filldraw[black]	  		(0, 22)		rectangle ++(1, 1);
	\filldraw[white]		  	(1, 22)		rectangle ++(1, 1);
	\filldraw[white]		  	(2, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(3, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(4, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(6, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(7, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(8, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(9, 22)		rectangle ++(1, 1);
	\filldraw[black]		  	(10, 22)	rectangle ++(1, 1);
	\filldraw[black]		  	(11, 22)	rectangle ++(1, 1);
	\filldraw[black]		  	(12, 22)	rectangle ++(1, 1);
	\filldraw[black]		  	(13, 22)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(14, 22)	rectangle ++(1, 1);
	
	\filldraw[black]		  	(0, 21)		rectangle ++(1, 1);
	\filldraw[white]		  	(1, 21)		rectangle ++(1, 1);
	\filldraw[black]		  	(2, 21)		rectangle ++(1, 1);
	\filldraw[white]		  	(3, 21)		rectangle ++(1, 1);
	\filldraw[white]		  	(4, 21)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 21)		rectangle ++(1, 1);
	\filldraw[white]	  		(6, 21)		rectangle ++(1, 1);
	\filldraw[white]	  		(7, 21)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 21)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 21)		rectangle ++(1, 1);
	\filldraw[white]		  	(10, 21)	rectangle ++(1, 1);
	\filldraw[white]		  	(11, 21)	rectangle ++(1, 1);
	\filldraw[black]		  	(12, 21)	rectangle ++(1, 1);
	\filldraw[black]		  	(13, 21)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(14, 21)	rectangle ++(1, 1);
	
	\filldraw[black]	  		(0, 20)		rectangle ++(1, 1);
	\filldraw[black]	  		(1, 20)		rectangle ++(1, 1);
	\filldraw[black]	  		(2, 20)		rectangle ++(1, 1);
	\filldraw[black]	  		(3, 20)		rectangle ++(1, 1);
	\filldraw[white]	  		(4, 20)		rectangle ++(1, 1);
	\filldraw[black]	  		(5, 20)		rectangle ++(1, 1);
	\filldraw[white]	  		(6, 20)		rectangle ++(1, 1);
	\filldraw[black]	  		(7, 20)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 20)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 20)		rectangle ++(1, 1);
	\filldraw[black]		  	(10, 20)	rectangle ++(1, 1);
	\filldraw[white]			  (11, 20)	rectangle ++(1, 1);
	\filldraw[marioSkin]	 	(12, 20)	rectangle ++(1, 1);
	\filldraw[marioSkin]  	(13, 20)	rectangle ++(1, 1);
	\filldraw[black]			  (14, 20)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(15, 20)	rectangle ++(1, 1);
	
	\filldraw[black]			  (0, 19)		rectangle ++(1, 1);
	\filldraw[white]			  (1, 19)		rectangle ++(1, 1);
	\filldraw[white]			  (2, 19)		rectangle ++(1, 1);
	\filldraw[white]		  	(3, 19)		rectangle ++(1, 1);
	\filldraw[white]		  	(4, 19)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 19)		rectangle ++(1, 1);
	\filldraw[white]		  	(6, 19)		rectangle ++(1, 1);
	\filldraw[black]		  	(7, 19)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 19)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 19)		rectangle ++(1, 1);
	\filldraw[black]		  	(10, 19)	rectangle ++(1, 1);
	\filldraw[white]		  	(11, 19)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(12, 19)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(13, 19)	rectangle ++(1, 1);
	\filldraw[black]			  (14, 19)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(15, 19)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(1, 18)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(2, 18)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(3, 18)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(4, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(5, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(6, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(7, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 18)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(10, 18)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(11, 18)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(12, 18)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(13, 18)	rectangle ++(1, 1);
	\filldraw[black]		  	(14, 18)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(15, 18)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]  	(1, 17)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(2, 17)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(3, 17)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(4, 17)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 17)		rectangle ++(1, 1);
	\filldraw[black]		  	(6, 17)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(7, 17)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 17)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 17)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(10, 17)	rectangle ++(1, 1);
	\filldraw[black]		  	(11, 17)	rectangle ++(1, 1);
	\filldraw[black]		  	(12, 17)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(13, 17)	rectangle ++(1, 1);
	\filldraw[black]		  	(14, 17)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(15, 17)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]	  (1, 16)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(2, 16)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(3, 16)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(4, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(5, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(6, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(7, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(8, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(9, 16)		rectangle ++(1, 1);
	\filldraw[black]		  	(10, 16)	rectangle ++(1, 1);
	\filldraw[black]	  		(11, 16)	rectangle ++(1, 1);
	\filldraw[black]	  		(12, 16)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(13, 16)	rectangle ++(1, 1);
	\filldraw[marioBrown]		(14, 16)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(1, 15)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(2, 15)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(3, 15)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(4, 15)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(5, 15)		rectangle ++(1, 1);
	\filldraw[black]		  	(6, 15)		rectangle ++(1, 1);
	\filldraw[black]		  	(7, 15)		rectangle ++(1, 1);
	\filldraw[black]	  		(8, 15)		rectangle ++(1, 1);
	\filldraw[black]	  		(9, 15)		rectangle ++(1, 1);
	\filldraw[black]	  		(10, 15)	rectangle ++(1, 1);
	\filldraw[black]	  		(11, 15)	rectangle ++(1, 1);
	\filldraw[marioSkin]		(12, 15)	rectangle ++(1, 1);
	\filldraw[marioBrown]		(13, 15)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(1, 14)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(2, 14)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(3, 14)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(4, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(5, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(6, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(7, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(8, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(9, 14)		rectangle ++(1, 1);
	\filldraw[marioSkin]		(10, 14)	rectangle ++(1, 1);
	\filldraw[marioBrown]		(11, 14)	rectangle ++(1, 1);
	\filldraw[marioBrown]		(12, 14)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(2, 13)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(3, 13)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(4, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(5, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(6, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(7, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(8, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(9, 13)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(10, 13)	rectangle ++(1, 1);
	\filldraw[marioRed3]		(11, 13)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(12, 13)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(2, 12)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(3, 12)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(4, 12)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(5, 12)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(6, 12)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(7, 12)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(8, 12)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(9, 12)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(10, 12)	rectangle ++(1, 1);
	\filldraw[marioBlue2]		(11, 12)	rectangle ++(1, 1);
	\filldraw[marioRed3]		(12, 12)	rectangle ++(1, 1);
	\filldraw[marioRed1]		(13, 12)	rectangle ++(1, 1);
	
	\filldraw[marioRed1]		(2, 11)		rectangle ++(1, 1);
	\filldraw[marioRed2]		(3, 11)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(4, 11)		rectangle ++(1, 1);
	\filldraw[marioRed3]		(5, 11)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(6, 11)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(7, 11)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(8, 11)		rectangle ++(1, 1);
	\filldraw[marioRed1]		(9, 11)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(10, 11)	rectangle ++(1, 1);
	\filldraw[marioBlue2]		(11, 11)	rectangle ++(1, 1);
	\filldraw[marioRed2]		(12, 11)	rectangle ++(1, 1);
	\filldraw[black]			  (13, 11)	rectangle ++(1, 1);
	\filldraw[black]		  	(14, 11)	rectangle ++(1, 1);
	
	\filldraw[marioRed2]		(3, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(4, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(5, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(6, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(7, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(8, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(9, 10)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(10, 10)	rectangle ++(1, 1);
	\filldraw[marioBlue3]		(11, 10)	rectangle ++(1, 1);
	\filldraw[marioBlue2]		(12, 10)	rectangle ++(1, 1);
	\filldraw[white]			  (13, 10)	rectangle ++(1, 1);
	\filldraw[white]		  	(14, 10)	rectangle ++(1, 1);
	\filldraw[black]	  		(15, 10)	rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(3, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(4, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(5, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(6, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(7, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(8, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(9, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(10, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(11, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(12, 9)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(13, 9)		rectangle ++(1, 1);
	\filldraw[white]	  		(14, 9)		rectangle ++(1, 1);
	\filldraw[black]		  	(15, 9)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(3, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(4, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(5, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(6, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(7, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(8, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(9, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(10, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(11, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(12, 8)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(13, 8)		rectangle ++(1, 1);
	\filldraw[white]		  	(14, 8)		rectangle ++(1, 1);
	\filldraw[black]		  	(15, 8)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(3, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(4, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(5, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(6, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(7, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(8, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(9, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(10, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(11, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(12, 7)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(13, 7)		rectangle ++(1, 1);
	\filldraw[black]	  		(14, 7)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(2, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(3, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(4, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(5, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(6, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(7, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(8, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(9, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(10, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(11, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(12, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(13, 6)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(14, 6)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(2, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(3, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(4, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(5, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(6, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(7, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(8, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(9, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(10, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(11, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue3]		(12, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(13, 5)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(14, 5)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(2, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(3, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(4, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(5, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(6, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(10, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(11, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(12, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue2]		(13, 4)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(14, 4)		rectangle ++(1, 1);
	
	\filldraw[marioBlue1]		(2, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(3, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(4, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(5, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(10, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(11, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(12, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(13, 3)		rectangle ++(1, 1);
	\filldraw[marioBlue1]		(14, 3)		rectangle ++(1, 1);
	
	\filldraw[black] 		  	(1, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(2, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(3, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(4, 2)		rectangle ++(1, 1);
	\filldraw[black] 		  	(5, 2)		rectangle ++(1, 1);
	\filldraw[black] 		  	(10, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(11, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(12, 2)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(13, 2)		rectangle ++(1, 1);
	\filldraw[black] 	  		(14, 2)		rectangle ++(1, 1);
	
	\filldraw[black] 		  	(0, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(1, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(2, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(3, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown]		(4, 1)		rectangle ++(1, 1);
	\filldraw[black] 		  	(5, 1)		rectangle ++(1, 1);
	\filldraw[black] 		  	(10, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(11, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(12, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(13, 1)		rectangle ++(1, 1);
	\filldraw[marioBrown] 	(14, 1)		rectangle ++(1, 1);
	\filldraw[black] 		  	(15, 1)		rectangle ++(1, 1);
	
	\filldraw[black]			(0, 0)		rectangle ++(1, 1);
	\filldraw[black]			(1, 0)		rectangle ++(1, 1);
	\filldraw[black]			(2, 0)		rectangle ++(1, 1);
	\filldraw[black]			(3, 0)		rectangle ++(1, 1);
	\filldraw[black]			(4, 0)		rectangle ++(1, 1);
	\filldraw[black]			(5, 0)		rectangle ++(1, 1);
	\filldraw[black]			(10, 0)		rectangle ++(1, 1);
	\filldraw[black]			(11, 0)		rectangle ++(1, 1);
	\filldraw[black]			(12, 0)		rectangle ++(1, 1);
	\filldraw[black]			(13, 0)		rectangle ++(1, 1);
	\filldraw[black]			(14, 0)		rectangle ++(1, 1);
	\filldraw[black]			(15, 0)		rectangle ++(1, 1);                          
}

\end{MacroCode}
\end{macro}

\begin{macro}{\mariovictory}[2]{[<text>]}{[<scale>]}
Prints the Mario victory graphic. The optional \texttt{<text>} is typeset to Mario's right. Mario is very large by default (about 27 centimeters) and should be scaled using the \texttt{<scale>} factor.
\begin{MacroCode}{class}
\DeclareDocumentCommand \mariovictory { O{} O{\fp_use:N \g_edu_examtitlegraphicsscale_fp} } {
  \tikz[scale=#2] {
  
    \setlength{\baselineskip}{2.5ex}
    
    \draw (19, 13) node[anchor=west, align=left, font=\bfseries\ttfamily, scale=1.2, inner~sep=0pt] {#1};
    
    \edu_mariovictory_pixel:
  }
}

\end{MacroCode}
\end{macro}





\subsection{Einrichtung der \textsf{edu}-Klasse}

\begin{macro}{\edusetup}[1]{<key>=<val> list}
\begin{macro}{\eduoption}[2]{<key>}{<val>}
Wrapper für \cs{setkeys} zum Setzen der Optionen.
\begin{MacroCode}{class}
\DeclareDocumentCommand  \edusetup { m } {
  \keys_set:nn {edu} {#1}
}

\DeclareDocumentCommand  \eduoption { m m } {
  \keys_set:nn {edu} {#1=#2}
}

\end{MacroCode}
\end{macro}
\end{macro}


\subsection{Überschriften für Aufgaben etc.}

Die Überschriften der Aufgaben werden durch das Package \pkg{titlesec} implementiert. Exemplarisch wird an dieser Stelle die Abhandlung von Aufgaben besprochen. Die Überschriften für Lösungen usw. werden analog implementiert.


\subsubsection{Counter und Hilfsmakros}

Zum Zählen der Aufgabennummern werden zuerst Zähler definiert. Anschließend Hilfs-Makros erstellt, welche im späteren Verlauf zur Anzeige der Punkte und zum Zusammensetzen der Überschriften dienen.

\begin{macro}{\l__edu_exepoints_tl}
\begin{macro}{\l__edu_exelabeltext_tl}
\begin{macro}{\l__edu_subexelabeltext_tl}
\begin{MacroCode}{class}
\newcounter{exercisecounter}
\newcounter{subexercisecounter}[exercisecounter]
\newcounter{multiexecounter}

\renewcommand{\thesubexercisecounter}{\theexercisecounter.\arabic{subexercisecounter}}

\tl_new:N \l__edu_exepoints_tl        % For optional number points
\tl_new:N \l__edu_exelabeltext_tl     % Concatenation of the exercise-label
\tl_new:N \l__edu_subexelabeltext_tl  % Concatenation of the subexercise-label

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}

\begin{macro}{\l__edu_sollabeltext_tl}
\begin{macro}{\l__edu_subsollabeltext_tl}
\begin{MacroCode}{class}
\newcounter{solutioncounter}
\newcounter{subsolutioncounter}[solutioncounter]
\newcounter{multisolcounter}

\renewcommand{\thesubsolutioncounter}{\thesolutioncounter.\arabic{subsolutioncounter}}

\tl_new:N \l__edu_sollabeltext_tl     % Concatenation of the exercise-label
\tl_new:N \l__edu_subsollabeltext_tl  % Concatenation of the subexercise-label

\end{MacroCode}
\end{macro}
\end{macro}

\begin{macro}{\rstexe}
\begin{macro}{\rstsubexe}
\begin{macro}{\rstmultiexe}
Mit den folgenden Makros können Counter für Aufgaben manuell zurückgesetzt werden:
\begin{MacroCode}{class}
\DeclareDocumentCommand \rstexe { } {\setcounter{exercisecounter}{0}}
\DeclareDocumentCommand \rstsubexe { } {\setcounter{subexercisecounter}{0}}
\DeclareDocumentCommand \rstmultiexe { } {\setcounter{multiexecounter}{0}}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}


\subsubsection{Überschriften-Klassen und Benutzermakros}

Nun werden die Überschriften-Klassen für Aufgaben (\cs{exercise}) und Unteraufgaben (\cs{subexercise}) erzeugt. Für beide Klassen werden außerdem Makros erstellt (\cs{exe} und \cs{subexe}), welche für den Benutzer zur Erzeugung einer (Unter-) Aufgabenüberschrift dienen. Durch sie werden die Punktzahlen unter Berücksichtigung der Label \opt{exepointslabel} und \opt{subexepointslabel} erzeugt und der Text der Überschriften \cs{exetext} bzw. \cs{subexelabeltext} unter Berücksichtugung der entsprechenden Parameter zusammengesetzt. Abschließend wird in \cs{exe} und \cs{subexe} durch den Aufruf von \cs{exercise} bzw. \cs{subexercise} die entsprechende Überschrift erzeugt.

Sowohl \cs{exercise} als auch \cs{subexercise} setzen den Counter für Teilaufgaben \cs{multiexecounter} auf Null.

Die Sternvarianten der Befehle sind für Zusatzaufgaben ("`Sternchenaufgaben"') gedacht. Bei ihnen wird hinter der Nummer der Aufgabe ein Sternchen eingefügt.

\begin{macro}{\exe}[2]{[<number points>]}{<title>}
\begin{macro}{\exe*}[2]{[<number points>]}{<title>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \exe { s o m o }{
  \refstepcounter{exercisecounter}
  
  \tl_clear:N \l__edu_exelabeltext_tl
  
  \IfNoValueTF {#2} {
    \tl_clear:N \l__edu_exepoints_tl
  }{
    \bool_if:NTF \g_edu_exepointsachieved_bool {
	    \tl_set:Nn \l__edu_exepoints_tl {
	      \g_edu_exepointsleft_tl
	        \hspace{\g_edu_exepointsachievedspace_dim}
	        \g_edu_exepointsachievedsep_tl
	        #2\g_edu_exepointslabel_tl
	      \g_edu_exepointsright_tl
	    }
	  }{
      \tl_set:Nn \l__edu_exepoints_tl {
	      \g_edu_exepointsleft_tl
	        #2\g_edu_exepointslabel_tl
	      \g_edu_exepointsright_tl
	    }
	  }
  }

  \tl_if_empty:nTF {#3} {
    \tl_if_empty:NTF \g_edu_exelabel_tl {
      \tl_clear:N \l__edu_exelabeltext_tl
    }{
      \tl_set:Nn \l__edu_exelabeltext_tl {
        \hspace{0.1em}\g_edu_exelabel_tl
      }
    }
  }{
    \tl_if_empty:NTF \g_edu_exelabel_tl {
      \tl_set:Nn \l__edu_exelabeltext_tl {
        \hspace{0.3em}
      }
    }{
      \tl_set:Nn \l__edu_exelabeltext_tl {
        \hspace{0.1em}\g_edu_exelabel_tl{:}\hspace{0.3em}
      }
    }
  }
    
  \setlength{\parfillskip}{0em} % Damit Punktzahl bei parkip wirklich rechtsbündig ist. Sonst rechts Abstand in letzter (einziger) Zeile.
  \vspace{\g_edu_exebeforeskip_dim}%
  \parskipreduce%
  {
    \g_edu_exelabelstyle_tl%
    \IfNoValueF {#4} {
      \hspace*{-3em}
      \makebox[2.5em][r]{
        \tl_if_in:nnT {#4} {c} {
          \color{\g_edu_execalcfg_tl}
          \raisebox{0.15ex}{\scalebox{0.7}{\faCalculator}}
        }
        \tl_if_in:nnT {#4} {e} {
          \hspace{0.25em}
          \raisebox{-0.05ex}{
          \resizebox{!}{0.6\baselineskip}{
            \tikz{
              \draw[line~width=1ex, \@usetl{edu}{exedifffg}{tl}] (0, 0) rectangle (1, 1);
            }
          }
          }
        }
        \tl_if_in:nnT {#4} {m} {
          \hspace{0.25em}
          \raisebox{-0.05ex}{
          \resizebox{!}{0.6\baselineskip}{
            \tikz{
              \fill[\@usetl{edu}{exedifffg}{tl}] (0, 0) rectangle (1, 0.5);
              \draw[line~width=1ex, \@usetl{edu}{exedifffg}{tl}] (0, 0) rectangle (1, 1);
            }
          }
          }
        }
        \tl_if_in:nnT {#4} {h} {
          \hspace{0.25em}
          \raisebox{-0.05ex}{
          \resizebox{!}{0.6\baselineskip}{
            \tikz{
              \fill[\@usetl{edu}{exedifffg}{tl}] (0, 0) rectangle (1, 1);
              \draw[line~width=1ex, \@usetl{edu}{exedifffg}{tl}] (0, 0) rectangle (1, 1);
            }
          }
          }
        }
      }
      \hspace{0.5em}
    }
    \setlength{\fboxsep}{0.125em}%
    \raisebox{0.2ex}{%
      \colorbox{\g_edu_exenumberbg_tl}{%
        \textcolor{\g_edu_exenumberfg_tl}{%
          \g_edu_exenumberstyle_tl\theexercisecounter\g_edu_exenumberseparator_tl%
          \IfBooleanT{#1} {
	          \raisebox{0.15ex}{%
	            $\star$
	          }
          }
        }%
      }%
    }%
    \hspace{0.1em}%
    \colorbox{\g_edu_exelabelbg_tl}{%
      \textcolor{\g_edu_exelabelfg_tl}{\l__edu_exelabeltext_tl}%
    }%
  }%
  {
    \colorbox{\g_edu_exebg_tl}{%
      \textcolor{\g_edu_exefg_tl}{\g_edu_exestyle_tl #3}%
    }%
  }%
  \hfill%
  {\g_edu_exepointsstyle_tl%
    \textcolor{\g_edu_exepointsfg_tl}{%
      \l__edu_exepoints_tl%
    }%
  }%
  \nopagebreak\@afterheading%
  \vspace{\g_edu_exeafterskip_dim}%
  \parskipreduce%
  \par % Wichtig, damit \setlength{\parfillskip}{0em} wirkt (s. o.).
  \setlength{\parfillskip}{1em plus 1fil}
  
  \bool_if:NT \g_edu_exetoc_bool {
  \addcontentsline{toc}{section}{\theexercisecounter\g_edu_exenumberseparator_tl~\l__edu_exelabeltext_tl #3}
  }
  
  \setcounter{subexercisecounter}{0}
  \setcounter{multiexecounter}{0}
  \setcounter{question}{0}
}

\end{MacroCode}
\end{macro}
\end{macro}

\begin{macro}{\subexe}[2]{[<number points>]}{<title>}
\begin{macro}{\subexe*}[2]{[<number points>]}{<title>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \subexe { s o m }{
  \refstepcounter{subexercisecounter}
  
  \tl_clear:N \l__edu_subexelabeltext_tl
  
  \IfNoValueTF {#2} {
    \tl_clear:N \l__edu_exepoints_tl
  }{
    \bool_if:NTF \g_edu_subexepointsachieved_bool {
	    \tl_set:Nn \l__edu_exepoints_tl {
	      \g_edu_subexepointsleft_tl
	        \hspace{\g_edu_subexepointsachievedspace_dim}
	        \g_edu_subexepointsachievedsep_tl
	        #2\g_edu_subexepointslabel_tl
	      \g_edu_subexepointsright_tl
	    }
	  }{
      \tl_set:Nn \l__edu_exepoints_tl {
	      \g_edu_subexepointsleft_tl
	        #2\g_edu_subexepointslabel_tl
	      \g_edu_subexepointsright_tl
	    }
	  }
  }

  \tl_if_empty:nTF {#3} {
    \tl_if_empty:NTF \g_edu_subexelabel_tl {
      \tl_clear:N \l__edu_subexelabeltext_tl
    }{
      \tl_set:Nn \l__edu_subexelabeltext_tl {
        \hspace{0.1em}\g_edu_subexelabel_tl
      }
    }
  }{
    \tl_if_empty:NTF \g_edu_subexelabel_tl {
      \tl_set:Nn \l__edu_subexelabeltext_tl {
        \hspace{0.3em}
      }
    }{
      \tl_set:Nn \l__edu_subexelabeltext_tl {
        \hspace{0.1em}\g_edu_subexelabel_tl{:}\hspace{0.3em}
      }
    }
  }
    
  \setlength{\parfillskip}{0em}
  \vspace{\g_edu_subexebeforeskip_dim}%
  \parskipreduce%
  {\g_edu_subexelabelstyle_tl%
    \setlength{\fboxsep}{0.125em}
    \raisebox{0.2ex}{%
      \colorbox{\g_edu_subexenumberbg_tl}{%
        \textcolor{\g_edu_subexenumberfg_tl}{%
          \g_edu_subexenumberstyle_tl%
          \thesubexercisecounter%
          \g_edu_subexenumberseparator_tl%
          \IfBooleanT{#1} {
	          \raisebox{0.15ex}{%
	            \,$\star$
	          }
          }
        }%
      }%
    }%
    \colorbox{\g_edu_subexelabelbg_tl}{%
      \textcolor{\g_edu_subexelabelfg_tl}{\l__edu_subexelabeltext_tl}%
    }%
  }%
  {%
    \colorbox{\g_edu_subexebg_tl}{%
      \textcolor{\g_edu_subexefg_tl}{\g_edu_subexestyle_tl #3}%
    }%
  }%
  \hfill%
  {\g_edu_subexepointsstyle_tl%
    \textcolor{\g_edu_subexepointsfg_tl}{%
      \l__edu_exepoints_tl%
    }%
  }%
  \nopagebreak\@afterheading
  \vspace{\g_edu_subexeafterskip_dim}%
  \parskipreduce%
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  
  \bool_if:NT \g_edu_exetoc_bool {
  \addcontentsline{toc}{subsection}{\thesubexercisecounter\g_edu_subexenumberseparator_tl~\l__edu_subexelabeltext_tl #3}
  }
  
  \setcounter{multiexecounter}{0}
  \setcounter{question}{0}
}

\end{MacroCode}
\end{macro}
\end{macro}

Die Implementierung der Überschriften für Lösungen erfolgt analog:

\begin{macro}{\sol}[1]{<title>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \sol { m }{
  \refstepcounter{solutioncounter}
  
  \tl_clear:N \l__edu_sollabeltext_tl

  \tl_if_empty:nTF {#1} {
    \tl_if_empty:NTF \g_edu_sollabel_tl {
      \tl_clear:N \l__edu_sollabeltext_tl
    }{
      \tl_set:Nn \l__edu_sollabeltext_tl {
        \hspace{0.1em}\g_edu_sollabel_tl
      }
    }
  }{
    \tl_if_empty:NTF \g_edu_sollabel_tl {
      \tl_set:Nn \l__edu_sollabeltext_tl {
        \hspace{0.3em}
      }
    }{
      \tl_set:Nn \l__edu_sollabeltext_tl {
        \hspace{0.1em}\g_edu_sollabel_tl{:}\hspace{0.3em}
      }
    }
  }
  
  \setlength{\parfillskip}{0em}
  \vspace{\g_edu_solbeforeskip_dim}%
  \parskipreduce%
  {\g_edu_sollabelstyle_tl%
    \setlength{\fboxsep}{0.125em}%
    \raisebox{0.2ex}{%
      \colorbox{\g_edu_solnumberbg_tl}{%
        \textcolor{\g_edu_solnumberfg_tl}{%
          \g_edu_solnumberstyle_tl\thesolutioncounter\g_edu_solnumberseparator_tl%
        }%
      }%
    }%
    \hspace{0.1em}%
    \colorbox{\g_edu_sollabelbg_tl}{%
      \textcolor{\g_edu_sollabelfg_tl}{\l__edu_sollabeltext_tl}%
    }%
  }%
  {%
    \colorbox{\g_edu_solbg_tl}{%
      \textcolor{\g_edu_solfg_tl}{\g_edu_solstyle_tl #1}%
    }%
  }%
  \nopagebreak\@afterheading
  \vspace{\g_edu_solafterskip_dim}%
  \parskipreduce%
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  
  \bool_if:NT \g_edu_exetoc_bool {
  \addcontentsline{toc}{section}{\thesolutioncounter\g_edu_solnumberseparator_tl~\l__edu_sollabeltext_tl #1}
  }
    
  \setcounter{subsolutioncounter}{0} 
  \setcounter{multiexecounter}{0}
}

\end{MacroCode}
\end{macro}

\begin{macro}{\subsol}[1]{<title>}
\begin{MacroCode}{class}
\DeclareDocumentCommand \subsol { m }{
  \refstepcounter{subsolutioncounter}
  
  \tl_clear:N \l__edu_subsollabeltext_tl

  \tl_if_empty:nTF {#1} {
    \tl_if_empty:NTF \g_edu_subsollabel_tl {
      \tl_clear:N \l__edu_subsollabeltext_tl
    }{
      \tl_set:Nn \l__edu_subsollabeltext_tl {
        \hspace{0.1em}\g_edu_subsollabel_tl
      }
    }
  }{
    \tl_if_empty:NTF \g_edu_subsollabel_tl {
      \tl_set:Nn \l__edu_subsollabeltext_tl {
        \hspace{0.3em}
      }
    }{
      \tl_set:Nn \l__edu_subsollabeltext_tl {
        \hspace{0.1em}\g_edu_subsollabel_tl{:}\hspace{0.3em}
      }
    }
  }
  
  \setlength{\parfillskip}{0em}
  \vspace{\g_edu_subsolbeforeskip_dim}%
  \parskipreduce%
  {\g_edu_subsollabelstyle_tl%
    \setlength{\fboxsep}{0.125em}
    \raisebox{0.2ex}{%
      \colorbox{\g_edu_subsolnumberbg_tl}{%
        \textcolor{\g_edu_subsolnumberfg_tl}{%
          \g_edu_subsolnumberstyle_tl%
          \thesubsolutioncounter%
          \g_edu_subsolnumberseparator_tl%
        }%
      }%
    }%
    \colorbox{\g_edu_subsollabelbg_tl}{%
      \textcolor{\g_edu_subsollabelfg_tl}{\l__edu_subsollabeltext_tl}%
    }%
  }%
  {%
    \colorbox{\g_edu_subsolbg_tl}{%
      \textcolor{\g_edu_subsolfg_tl}{\g_edu_subsolstyle_tl #1}%
    }%
  }%
  \nopagebreak\@afterheading
  \vspace{\g_edu_subsolafterskip_dim}%
  \parskipreduce%
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  
  \bool_if:NT \g_edu_exetoc_bool {
  \addcontentsline{toc}{subsection}{\thesolutioncounter.\thesubsolutioncounter\g_edu_subsolnumberseparator_tl~\l__edu_subsollabeltext_tl #1}
  }
  
  \setcounter{multiexecounter}{0}
}

\end{MacroCode}
\end{macro}


\subsection{Teilaufgaben-Umgebungen}

\subsubsection{Nummerierung und Punkte der Teilaufgaben}

\begin{macro}{\multiexelabel}
\begin{macro}{\multiexelabelboxed}
Diese Makros liefern die aktuelle Nummerierung der Teilaufgabe in Kleinbuchstaben mit anschließender Klammer (a), b),\dots) und erhöhen den Counter um Eins. \cs{multiexelabelboxed} setzt die Buchstaben zusätzlich rechtsbündig in eine Box.
\begin{MacroCode}{class}
\DeclareDocumentCommand \multiexelabel { s } {%
  \stepcounter{multiexecounter}%
  {\g_edu_multiexenumberstyle_tl%
    \textcolor{\g_edu_multiexenumberfg_tl}{%
      \IfBooleanT{#1} {
        \raisebox{0.1ex} {
          {\footnotesize$\star$}\hspace{0.75pt}
        }
      }  
      \g_edu_multiexenumberleft_tl\alph{multiexecounter}\g_edu_multiexenumberright_tl%
    }%
  }
}

\DeclareDocumentCommand \multiexelabelboxed { s } {%
  \stepcounter{multiexecounter}%    War \refstepcounter. Dies erzeugt vertikalen Abstand.
  \setlength{\fboxsep}{0pt}%
  \makebox[\g__edu_listlabelwidth_dim][r]{%
    \g_edu_multiexenumberstyle_tl%
    \textcolor{\g_edu_multiexenumberfg_tl}{%
      \IfBooleanT{#1} {
        \raisebox{0.1ex} {
          {\footnotesize$\star$}\hspace{0.75pt}
        }
      }   
      \g_edu_multiexenumberleft_tl\alph{multiexecounter}   
      \g_edu_multiexenumberright_tl
    }%
  }%
}

\end{MacroCode}
\end{macro}
\end{macro}

\begin{macro}{\item*}
Innerhalb einer Teilaufgaben-Liste können Zusatzaufgaben (Bonusaufgaben oder "`Sternchenaufgaben"') mithilfe dieser neu definierten Sternvariante von \Macro\item erstellt werden.
\begin{MacroCode}{class}
\let\itemorig\item

\DeclareDocumentCommand \item { s } {%
  \IfBooleanTF{#1} {
    \itemorig[\multiexelabelboxed*]
  }{
    \itemorig
  }
}

\end{MacroCode}
\end{macro}

\begin{macro}{\multiexe}
Diese Makros liefern die aktuelle Nummerierung der Teilaufgabe in Kleinbuchstaben mit anschließender Klammer (a), b),\dots) und erhöhen den Counter um Eins. \cs{multiexelabelboxed} setzt die Buchstaben zusätzlich rechtsbündig in eine Box.
\begin{MacroCode}{class}
\DeclareDocumentCommand \multiexe { s } {%
  \IfBooleanTF{#1} {
    \multiexelabel*\xspace
  }{
    \multiexelabel\xspace
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\points}
\begin{macro}{\points*}
Setzt die Punktzahl der aktuellen Teilaufgabe zusammen. Die Sternvariante setzt die Punktzahl am rechten Rand der aktuellen Zeile.
\begin{MacroCode}{class}
\DeclareDocumentCommand \points { s m } {%
  \IfBooleanT{#1} {
	   \hspace*{0pt}\hfill\hspace{0.5em}%
	}
  \nolinebreak%  
  \ensuremath{\;
	  \text{%
	    \g_edu_multiexepointsstyle_tl%
	    \color{\g_edu_multiexepointsfg_tl}%
	    \g_edu_multiexepointsleft_tl%
	      #2\g_edu_multiexepointslabel_tl%
	    \g_edu_multiexepointsright_tl%
	   }%
   }
}

\end{MacroCode}
\end{macro}
\end{macro}


\begin{macro}{\res}[2]{[<alternative text>]}{<text>}
Zeigt Ergebnisse in Abhängigkeit der Option \opt{showresults} an.
\begin{MacroCode}{class}
\DeclareDocumentCommand \res { +O{} +m } {
  \bool_if:NTF \g_edu_showresults_bool {
    \group_begin:
      \color{\g_edu_resultfg_tl} #2
    \group_end:
  }{#1}%
  \bool_if:NT \g_edu_resultresetmultiexe_bool {
    \rstmultiexe
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\resr}[3]{[<rule length>]}{<text>}{[<vertical offset>]}
Zeigt Ergebnisse in Abhängigkeit der Option \opt{showresults} an. Ansonsten wird ein horizontale Linie beliebiger Länge angezeigt.
\begin{MacroCode}{class}
\DeclareDocumentCommand \resr { O{\g_edu_resultrulelength_dim} +m !O{\g_edu_resultrulevoffset_dim} } {%
  \bool_if:NTF \g_edu_showresults_bool {%
    \group_begin:%
      \color{\g_edu_resultfg_tl}#2
    \group_end:%
  }{%
    \rule[-\g_edu_resultrule_dim+#3]{#1}{\g_edu_resultrule_dim}%
  }%
  \bool_if:NT \g_edu_resultresetmultiexe_bool {
    \rstmultiexe
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\resrfill}[2]{<text>}{[<vertical offset>]}
Zeigt Ergebnisse in Abhängigkeit der Option \opt{showresults} an. Ansonsten wird ein horizontale Linie angezeigt, die sich bis ans Ende der Zeite erstreckt.

\emph{Achtung}: Innerhalb einer Zeile sollte nach diesem Makro kein Text mehr gesetzt werden, da es ansonsten zu Darstellungsfehlern kommen kann.
\begin{MacroCode}{class}
\DeclareDocumentCommand \resrfill { +m !O{\g_edu_resultrulevoffset_dim} } {%
  \bool_if:NTF \g_edu_showresults_bool {%
    \group_begin:
      \color{\g_edu_resultfg_tl} #1
    \group_end:
  }{%
    \leavevmode\leaders\hbox{\rule[-\g_edu_resultrule_dim+#2]{1pt}{\g_edu_resultrule_dim}}\hfill\kern0pt\hspace*{-\parfillskip}
  }%
  \bool_if:NT \g_edu_resultresetmultiexe_bool {
    \rstmultiexe
  }
}

\end{MacroCode}
\end{macro}


\begin{macro}{\resb}[4]{[<box width>]}{[<box height>]}{<text>}{[<vertical offset>]}
Zeigt Ergebnisse in Abhängigkeit der Option \opt{showresults} an. Ansonsten wird ein horizontale Linie beliebiger Länge angezeigt.
\begin{MacroCode}{class}
\DeclareDocumentCommand \resb { O{\g_edu_resultboxwidth_dim} O{\g_edu_resultboxheight_dim} +m !O{\g_edu_resultboxvoffset_dim} } {%
  \bool_if:NTF \g_edu_showresults_bool {%
    \group_begin:
      \color{\g_edu_resultfg_tl} #3
    \group_end:
  }{%
    \tikz[baseline=-#4] \draw (0,0) rectangle (#1, #2);
    \hspace{5pt}
  }%
  \bool_if:NT \g_edu_resultresetmultiexe_bool {
    \rstmultiexe
  }
}

\end{MacroCode}
\end{macro}


\subsubsection{Aufgabenliste (Vertikale Liste von Teilaufgaben)}

%\begin{macro}{\__edu_remove_multiexespace}
%\begin{MacroCode}{class}
%\cs_new:Npn \__edu_remove_multiexespace {
%  \peek_meaning_ignore_spaces:NTF L {
%    \bool_if:NTF \g_edu_parskip_bool {
%      \vspace{0.5\baselineskip}
%    }{
%      \vspace{-0.375\baselineskip}
%    }
%    Ja
%  }{
%    Nein
%  }
%}
%
%
%\end{MacroCode}
%\end{macro}

\begin{environment}{multiexelist}[1]{[<itemsep>]}
\begin{environment}{multiexelist*}[1]{[<itemsep>]}
Der einspaltige Satz von Teilaufgaben geschieht mithilfe einer angepassten Liste. Die normale Variante sollte verwendet werden, wenn vor den Teilaufgaben Fließtext steht. Folgen die Teilaufgaben direkt auf eine Aufgabenüberschrift (\cs{exe}, \cs{subexe}, \dots), sollte die Sternvariante verwendet werden, da hierbei der obere Abstand angepasst werden muss.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {multiexelist} { s O{0.5\baselineskip} } {
  \parskipreduce
  \IfBooleanT {#1} {
    \bool_if:NTF \g_edu_parskip_bool {
      \vspace{0.125\baselineskip}
    }{
      \vspace{-0.375\baselineskip}
    }
  }
  \begin{edulist}[#2]{\multiexelabelboxed}
}{
  \end{edulist}
  \parskipreduce
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {multiexelist*} {\multiexelist*}
\cs_new_eq:cN {endmultiexelist*} \endmultiexelist

\end{MacroCode}
\end{environment}
\end{environment}


\subsubsection{Aufgabenliste (Horizontale Liste von Teilaufgaben)}

\begin{environment}{multiexelisti}
\begin{environment}{multiexelisti*}
Der einspaltige Satz von Teilaufgaben geschieht mithilfe einer angepassten vertikalen (in Reihe, "`inline"') Liste.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {multiexelisti} { s } {
  \IfBooleanTF {#1}{
	  \begin{edulisti}[%
	    label=\multiexelabel,%
	    format=\g_edu_multiexenumberstyle_tl,%
	    itemjoin={,\ },%
	  ]
	}{
    \par
    \bool_if:NTF \g_edu_parskip_bool {
      \vspace{-0.25\baselineskip}
    }{
      \vspace{-0.175\baselineskip}
    }
    \begin{center}
	  \begin{edulisti}[%
	    label=\multiexelabel,%
	    format=\g_edu_multiexenumberstyle_tl,%
	    afterlabel=\hspace{\g_edu_listarraysep_dim},%
	    itemjoin=\qquad,%
	  ]
	}
}{
  \end{edulisti}
  \IfBooleanF {#1} {
    \end{center}
    \par
    \bool_if:NTF \g_edu_parskip_bool {
      \vspace{-0.25\baselineskip}
    }{
      \vspace{-0.175\baselineskip}
    }
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {multiexelisti*} {\multiexelisti*}
\cs_new_eq:cN {endmultiexelisti*} \endmultiexelisti

\end{MacroCode}
\end{environment}
\end{environment}


\subsubsection{Aufgabentabelle (mehrspaltiger Satz von Teilaufgaben)}

\begin{environment}{multiexearray}[2]{[<extrarowheight>]}{<number cols>}
Der mehrspaltige Satz von Teilaufgaben geschieht mithilfe einer \cs*{tabularx}-Tabelle und einem angepassten Spaltentyp \texttt{A}.

Die Zeilenhöhe kann optional verändert werden, wobei \cs{extrarowheight} verwendet wird. Anschließend werden alle für den Satz der Tabelle nötigen Längen gesetzt bzw. berechnet und der neue Spaltentyp definiert. Vor jede Spalte wird die Nummer der aktuellen Teilaufgabe durch \cs{multiexelabelboxed} gesetzt. Die Box wird benötigt, damit die Nummerierung rechtsbündig erfolgt. Da dieser Umgebung dem Satz von Fließtext dient, werden ab der zweiten Zeile alle Zeilen eingerückt, damit die Nummerierung links übersteht.

Die Sternvariante versetzt alle Zellen für Teilaufgaben in den Mathematik-Modus.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {multiexearray} { s O{0.25\baselineskip} m } {
  \IfBooleanTF {#1} {
	  \arraysetup[#2]{m}
    \noindent\tabularx{\textwidth}{*{#3}{E}}
	}{%
	  \arraysetup[#2]{}
	  \noindent\tabularx{\textwidth}{*{#3}{e}}%
  }
}{
  \endtabularx
  \arraycleanup
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {multiexearray*} {\multiexearray*}
\cs_new_eq:cN {endmultiexearray*} \endmultiexearray

\end{MacroCode}
\end{environment}


\begin{macro}{\bonus}
Setzt die \emph{nächste} Teilaufgabe als Zusatzaufgabe (Bonusaufgabe, "`Sternchenaufgabe"'). Muss vor dem Wechsel zur nächsten Aufgabe (also vor \texttt{\&}) aufgerufen werden!
\begin{MacroCode}{class}
\DeclareExpandableDocumentCommand \bonus { } {
  \bool_gset_true:N \__edu_multiexebonus_bool
}

\end{MacroCode}
\end{macro}


\begin{macro}{\ls}
Abkürzung für vergrößerten vertikalen Abstand in Tabellenzeile.
\begin{MacroCode}{class}
\DeclareExpandableDocumentCommand \ls { } {\addlinespace[1.5ex]}

\end{MacroCode}
\end{macro}


\subsubsection{Verweise}

\begin{macro}{\lastexe}
\begin{macro}{\lastexe*}
\begin{macro}{\lastsubexe}
\begin{macro}{\lastsubexe*}
\begin{macro}{\lastmultiexe}
\begin{macro}{\lastmultiexe*}
Mithilfe dieser Makros kann auf die vorherige Aufgabe bzw. Unter- oder Teilaufgabe verwiesen werden. Die normale Variante gibt lediglich die Nummer bzw. den Buchstaben an. In der Sternvariante wird der Verweis zusätzlich mithilfe der entsprechenden Optionen formatiert.
\begin{MacroCode}{class}
\DeclareDocumentCommand \lastexe { s } {
  \int_compare:nNnTF {\value{exercisecounter}} > {0} {
    \addtocounter{exercisecounter}{-1}
    \arabic{exercisecounter}
    \addtocounter{exercisecounter}{1}
  }{
    ??
  }
  \IfBooleanT {#1} {
    \g_edu_exenumberseparator_tl\,\g_edu_exelabel_tl
  }
  \xspace
}

\DeclareDocumentCommand \lastsubexe { s } {
  \IfBooleanT {#1} {
    \g_edu_exelabel_tl\xspace
  }
  \int_compare:nNnTF {\value{subexercisecounter}} > {0} {
    \addtocounter{subexercisecounter}{-1}
    \arabic{exercisecounter}.\arabic{subexercisecounter}
    \addtocounter{subexercisecounter}{1}
  }{
    ??
  }
  \xspace
}

\DeclareDocumentCommand \lastmultiexe { s } {
  \IfBooleanT {#1} {
    \group_begin:
    \g_edu_multiexenumberstyle_tl
    \color{\g_edu_multiexenumberfg_tl}
    \g_edu_multiexenumberleft_tl
  }
  \int_compare:nNnTF {\value{multiexecounter}} > {0} {
	  \addtocounter{multiexecounter}{-1}
	  \alph{multiexecounter}
	  \addtocounter{multiexecounter}{1}
  }{
    ??
  }
  \IfBooleanT {#1} {
    \g_edu_multiexenumberright_tl
    \group_end:
  }
  \xspace
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}



\subsection{Fragen}

\subsubsection{Zähler, Längen und Überschriften}

\begin{macro}{\l__edu_questmclabelwidth_dim}
\begin{macro}{\l__edu_questpoints_tl}
Zuerst werden benötigte Zähler und Längen definiert und die Nummerierung und Beschriftung der Fragen als Titel definiert:
\begin{MacroCode}{class}
\newcounter{question}
\newcounter{@questmccounter}

\dim_new:N \l__edu_questmclabelwidth_dim
\dim_set:Nn \l__edu_questmclabelwidth_dim {0.9em}

\tl_new:N \l__edu_questpoints_tl

\end{MacroCode}
\end{macro}
\end{macro}


\begin{macro}{\quest}[2]{<number points>}{<text>}

Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen.
\begin{MacroCode}{class}
\DeclareDocumentCommand \quest { o m } {%
  
  \refstepcounter{question}
  
  \tl_set:Nn \l__edu_questpoints_tl {#1}
  
  \setcounter{@questmccounter}{0}
  
  \vspace{\g_edu_questbeforeskip_dim}
  {\g_edu_questlabelstyle_tl%
    \textcolor{\g_edu_questlabelfg_tl}{%
      \thequestion.\,\g_edu_questlabel_tl%
    }%
  }%
  \IfNoValueTF {#1} {
    \hspace{\g_edu_questsep_dim}{\g_edu_queststyle_tl #2}
  }{%
    \hspace{\g_edu_questpointssep_dim}%
    {%
      \g_edu_questpointsstyle_tl\g_edu_questpointsleft_tl%
      \l__edu_questpoints_tl\g_edu_questpointslabel_tl%
      \g_edu_questpointsright_tl%
    }%
    \hspace{\g_edu_questsep_dim}{\g_edu_queststyle_tl #2}
  }
  \nopagebreak\@afterheading
  \vspace{\g_edu_questafterskip_dim}
}

\end{MacroCode}
\end{macro}


\subsubsection{Makros für Nummerierung bei alphabetischem Multiple Choice}

\begin{macro}{\g__edu_questmclabelboxed_tl}
\begin{MacroCode}{class}
\tl_new:N \g__edu_questmclabelboxed_tl
\tl_gset:Nn \g__edu_questmclabelboxed_tl {
  \stepcounter{@questmccounter}%    War \refstepcounter, erzeugt aber vert. Abstand.
  \setlength{\fboxsep}{0pt}%
  \makebox[\g__edu_listlabelwidth_dim][r]{%
    \raisebox{-0.125em}{%
      \color{\g_edu_questmclabelfg_tl}%
      \framebox[\l__edu_questmclabelwidth_dim][c]{%
        \rule{0pt}{\l__edu_questmclabelwidth_dim}%
        \raisebox{0.2em}{\footnotesize\alph{@questmccounter}}%
      }%
    }%
  }%
}

\end{MacroCode}
\end{macro}



\subsubsection{Umgebungen für Antworten}


\begin{macro}{\questblank}[1]{[<vert. space>]}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließendem Freiraum.
\begin{MacroCode}{class}
\DeclareDocumentCommand \questblank { O{3cm} } {%
  \vspace{#1}
  \parskipreduce
}

\end{MacroCode}
\end{macro}


\begin{macro}{\questtextblank}[3]{[<lineskip>]}{<number lines>}{<linewidth>}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließenden horizontalen Linien variabler Breite, die zusätzlichen freien Raum daneben ermöglichen.
\begin{MacroCode}{class}
\DeclareDocumentCommand \questtextblank { O{0.75cm} m m } {%
  \par\vspace{1ex}
  \prg_replicate:nn {#2} {
    \par
    \vspace{-\baselineskip}
    \parskipreduce
    \vspace{#1}
    \noindent\rule{#3}{0.4pt}
  }
}

\end{MacroCode}
\end{macro}



\begin{macro}{\questtext}[2]{[<lineskip>]}{<number lines>}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließenden horizontalen Linien.
\begin{MacroCode}{class}
\DeclareDocumentCommand \questtext { O{0.75cm} m } {%
  \questtextblank[#1]{#2}{\linewidth}
}

\end{MacroCode}
\end{macro}


\begin{environment}{questmclist}[1]{[<itemsep>]}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließender Multiple-Choice-Aufzählung.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {questmclist} { O{0.5\baselineskip} } {%
  \parskipreduce%
  \vspace{-0.15\baselineskip}%
  \begin{edulist}[#1]{\color{\g_edu_questmclabelfg_tl}$\square$}
}{%
  \end{edulist}
  \parskipreduce
}

\end{MacroCode}
\end{environment}



\begin{environment}{questmclistalph}[1]{[<itemsep>]}
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {questmclistalph} { O{0.5\baselineskip} } {%
  \parskipreduce%
  \vspace{-0.25\baselineskip}%
  \begin{edulist}[#1]{\g__edu_questmclabelboxed_tl}
}{%
  \end{edulist}%
  \parskipreduce
}

\end{MacroCode}
\end{environment}


\begin{environment}{questmcarray}[2]{[<extrarowheight>]}{<number columns>}
\begin{environment}{questmcarray*}[2]{[<extrarowheight>]}{<number columns>}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließendem Multiple-Choice-Array. Die Sternvariante versetzt die Zellen in den Mathematik-Modus
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {questmcarray} { s O{0.25\baselineskip} m } {%
  \IfBooleanTF {#1} {
    \arraysetup[#2]{m}
    \noindent\tabularx{\textwidth}{*{#3}{Q}}%
  }{
    \arraysetup[#2]{}
    \noindent\tabularx{\textwidth}{*{#3}{q}}%
  }
}{%
  \endtabularx
  \arraycleanup
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {questmcarray*} {\questmcarray*}
\cs_new_eq:cN {endquestmcarray*} \endquestmcarray

\end{MacroCode}
\end{environment}
\end{environment}


\begin{environment}{questmcarrayalph}[2]{[<extrarowheight>]}{<number columns>}
\begin{environment}{questmcarrayalph*}[2]{[<extrarowheight>]}{<number columns>}
Erzeugt eine neue Frage unter Berücksichtigung der relevanten Optionen mit anschließendem Multiple-Choice-Array in alphabetischer Nummerierung. Die Sternvariante versetzt die Zellen in den Mathematik-Modus
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {questmcarrayalph} { s O{0.25\baselineskip} m } {%
  \IfBooleanTF {#1} {
    \arraysetup[#2]{m}
    \noindent\tabularx{\textwidth}{*{#3}{A}}%
  }{
    \arraysetup[#2]{}
    \noindent\tabularx{\textwidth}{*{#3}{a}}%
  }
}{%
  \endtabularx
  \arraycleanup
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {questmcarrayalph*} {\questmcarrayalph*}
\cs_new_eq:cN {endquestmcarrayalph*} \endquestmcarrayalph

\end{MacroCode}
\end{environment}
\end{environment}


\subsection{Mehrspaltiges Layout}

\begin{macro*}{\g__edu_colone_dim}
\begin{macro*}{\g__edu_coltwo_dim}
\begin{macro*}{\g__edu_colalign_tl}
Zuerst werden benötigte Längen definiert und initialisiert:
\begin{MacroCode}{class}
\dim_new:N \g__edu_colone_dim
\dim_new:N \g__edu_coltwo_dim

\tl_new:N \g__edu_colalign_tl
\tl_gset:Nn \g__edu_colalign_tl {t}

\end{MacroCode}
\end{macro*}
\end{macro*}
\end{macro*}


Der Abstand zwischen den Spalten und dem umgebenden Fließtext entspricht 
dem Absatzabstand:
\begin{MacroCode}{class}
\setlength{\multicolsep}{0.5\baselineskip}

\end{MacroCode}


\begin{environment}{multicols2r}
Abkürzendes Makro für gleichmäßiges, zweispaltiges Layout ohne bündigen unteren Rand über das Package \pkg{multicol}.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {multicols2r} { } {%
  \begin{multicols}{2}\raggedcolumns
}{%
  \end{multicols}%
}

\end{MacroCode}
\end{environment}


\begin{environment}{multicols3r}
Abkürzendes Makro für gleichmäßiges, dreispaltiges Layout ohne bündigen unteren Rand über das Package \pkg{multicol}.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {multicols3r} { } {%
  \begin{multicols}{3}\raggedcolumns
}{%
  \end{multicols}%
}

\end{MacroCode}
\end{environment}


\begin{environment}{cols2}[1]{[<width of left column>]}
\begin{environment}{cols2*}[1]{[<width of left column>]}
Abkürzendes Makro für zweispaltiges Layout. Das optionale Argument bestimmt die Breite der linken Spalte. Die Sternvariante zentriert die beiden Spalten vertikal.

Die Sternvariante wird explizit deklariert, da der verwendete Hack hier nicht funktioniert. Evtl. wegen der Zahl im Namen des Environments? Bei \env{cols} funktioniert es.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {cols2} { O{0.5\linewidth} } {%
  \par
  \setlength{\parfillskip}{0em}  
  \dim_gset:Nn \g__edu_colone_dim {#1 - 0.5\columnsep}
  \dim_gset:Nn \g__edu_coltwo_dim {\linewidth - \g__edu_colone_dim - \columnsep}
%
  \parskipreduce
  \noindent\begin{minipage}[\g__edu_colalign_tl]{\dim_use:N\g__edu_colone_dim}%
  \setpar
  \parskipreduce
}{%
  \end{minipage}%
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  \vspace{1.5\multicolsep}
  \parskipreduce
}

% Declared explicit, because hack doesn't work here. Because of the number?
\DeclareDocumentEnvironment {cols2*} { O{0.5\linewidth} } {%
  \tl_gset:Nn \g__edu_colalign_tl {c}
  \vspace{1.5\multicolsep} % Erhöht, da bei [t] minipage vorher keinen normalen baselineskip hat.
  \begin{cols2}[#1]
}{%
  \end{cols2}%
  \tl_gset:Nn \g__edu_colalign_tl {t}
}

\end{MacroCode}
\end{environment}
\end{environment}


\begin{environment}{cols}[1]{[<number columns>]}
\begin{environment}{cols*}[1]{[<width of left column>]}
Abkürzendes Makro für mehrspaltiges Layout. Die Sternvariante zentriert die beiden Spalten vertikal. Das optionale Argument gibt die Anzahl der Spalten an. Standardwert ist hierbei 2. D. h. \Macro\begin{cols} entspricht \Macro\begin{cols}[2] und \Macro\begin{cols2}.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {cols} {s O{2} } {%
  \par
  \setlength{\parfillskip}{0em}
%
  % Bei der Berechnung wichtig: Bei Multiplikation einer Länge mit einer
  % Ganzzahl muss zuerst die Länge (hier \columnsep) angegeben werden.
  \dim_gset:Nn \g__edu_colone_dim {(\linewidth - \columnsep * (#2 - 1))/#2}
  \dim_gset_eq:NN \g__edu_coltwo_dim \g__edu_colone_dim
%
  \parskipreduce
  \vspace{-0.15\baselineskip}
  \IfBooleanT {#1} {
    \tl_gset:Nn \g__edu_colalign_tl {c}
    \vspace{1.2\multicolsep} % Erhöht, da bei [t] minipage vorher keinen normalen baselineskip hat.
  }
  \noindent\begin{minipage}[\g__edu_colalign_tl]{\g__edu_colone_dim}%
  \setpar
  \parskipreduce
}{%
  \end{minipage}%
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  \parskipreduce
  \vspace{0.75\baselineskip}
  \IfBooleanT {#1} {
    \tl_gset:Nn \g__edu_colalign_tl {t}
  }  
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {cols*} {\cols*}
\cs_new:cpn {endcols*} {\endcols}

\end{MacroCode}
\end{environment}
\end{environment}


\begin{macro}{\colbreak}
Durch \cs{colbreak} wird die erste \env*{minipage} beendet und in die zweite \env*{minipage} gewechselt.
\begin{MacroCode}{class}
\DeclareDocumentCommand \colbreak { } {%
  \end{minipage}\hfill%
  \begin{minipage}[\g__edu_colalign_tl]{\g__edu_coltwo_dim}%
  \setpar
  \parskipreduce
}

\end{MacroCode}
\end{macro}


\begin{macro}{\mathreduce}
Verwendet man zu Beginn einer Spalte eine abgesetzte Gleichung,
wird ein fehlerhafter Abstand vor der Gleichung erzeugt. Dieser 
kann mit diesem Befehl beseitigt werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \mathreduce { } {%
  \vspace{-\abovedisplayskip}
  \vspace{-0.5\baselineskip}
}

\end{MacroCode}
\end{macro}


\begin{macro}{\g__edu_aligntemp_tl}
\begin{environment}{graphicscol}[5]{[<width of graphicscolumn>]}{<file>}{[<options of \cs*{includegraphics}>]}{[<l|r|c>]}{[<t|c>]}
\begin{environment}{graphicscol*}[5]{[<width of graphicscolumn>]}{<file>}{[<options of \cs*{includegraphics}>]}{[<l|r|c>]}{[<t|c>]}
Das folgende Makro erzeugt ein zweispaltiges Layout, wobei die rechte 
Spalte (in der Sternversion die linke Spalte) eine beliebige Abbildung 
linksbündig (\texttt{l}), rechtsbündig (\texttt{r}) oder zentriert (\texttt{c}) innerhalb der jeweiligen Spalte angezeigt wird. Außerdem kann optional die vertikale Ausrichtung durch \texttt{t} (oben, Standard) und \texttt{c} (mittig) bestimmt werden.
Die Breite der rechten Spalte und Optionen für das verwendete \cs*{includegraphics} können angegeben werden.
\begin{MacroCode}{class}

\tl_new:N \g__edu_aligntemp_tl

\DeclareDocumentEnvironment {graphicscol} { s O{0.5\linewidth} m O{width=\linewidth} o O{t} } {%
  
  \IfValueTF {#5} {
    \tl_gset:Nn \g__edu_aligntemp_tl {#5}
  }{
	  \IfBooleanTF {#1} {
	    \tl_gset:Nn \g__edu_aligntemp_tl {l}
	  }{
	    \tl_gset:Nn \g__edu_aligntemp_tl {r}
	  }
  }
  \str_if_eq:nnTF {#6} {c} {
    \begin{cols2*}[#2]
  }{
    \begin{cols2}[#2]
  }
  
  \IfBooleanT {#1} {
    \tl_if_in:NnT \g__edu_aligntemp_tl {r} {
      \hfill
    }
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
  	  \begin{center}
	  }
	    \includegraphics[#4]{#3}
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
	    \end{center}
	  }
    \tl_if_in:NnT \g__edu_aligntemp_tl {l} {
      \hfill
    }
    \colbreak
  }
}{%
  \IfBooleanF {#1} {
    \colbreak
	  \tl_if_in:NnT \g__edu_aligntemp_tl {r} {
	    \setlength{\parfillskip}{0em}
      \hfill
    }
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
  	  \begin{center}
	  }
	    \includegraphics[#4]{#3}
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
	    \end{center}
	  }
    \tl_if_in:NnT \g__edu_aligntemp_tl {l} {
      \hfill
    }
  }
  \str_if_eq:nnTF {#6} {c} {
    \end{cols2*}
  }{
    \end{cols2}
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {graphicscol*} {\graphicscol*}
\cs_new:cpn {endgraphicscol*} {\endgraphicscol}

\end{MacroCode}
\end{environment}
\end{environment}
\end{macro}


\begin{environment}{tikzcol}[4]{[<width of tikz-column>]}{<file>}{[<l|r|c>]}{[<t|c>]}
\begin{environment}{tikzcol*}[4]{[<width of tikz-column>]}{<file>}{[<l|r|c>]}{[<t|c>]}
Das folgende Makro erzeugt ein zweispaltiges Layout, wobei die rechte 
Spalte (in der Sternversion die linke Spalte) eine beliebige \pkg{tikz}-Grafik 
zentriert darstellt. Diese Grafik muss in einer PGF-Datei im vorgegebene \opt{tikzpath} vorliegen und wird mittels \cs{tikzinput*} eingebunden. Die Grafik wird wahlweise linksbündig (\texttt{c}), rechtsbündig (\texttt{r}) oder zentriert (\texttt{c}) innerhalb der jeweiligen Spalte angezeigt wird. Außerdem kann optional die vertikale Ausrichtung durch \texttt{t} (oben, Standard) und \texttt{c} (mittig) bestimmt werden.
\begin{MacroCode}{class}

\DeclareDocumentEnvironment {tikzcol} { s O{0.5\linewidth} m o O{t}} {%
  
  \IfValueTF {#4} {
    \tl_gset:Nn \g__edu_aligntemp_tl {#4}
  }{
	  \IfBooleanTF {#1} {
	    \tl_gset:Nn \g__edu_aligntemp_tl {l}
	  }{
	    \tl_gset:Nn \g__edu_aligntemp_tl {r}
	  }
  }
    
  \str_if_eq:nnTF {#5} {c} {
    \begin{cols2*}[#2]
  }{
    \begin{cols2}[#2]
  }
  \IfBooleanT {#1} {
    \tl_if_in:NnT \g__edu_aligntemp_tl {r} {
      \hfill
    }
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
  	  \begin{center}
	  }
	    \tikzinput{#3}
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
	    \end{center}
	  }
    \tl_if_in:NnT \g__edu_aligntemp_tl {l} {
      \hfill
    }
    \colbreak
  }
}{%
  \IfBooleanF {#1} {
    \colbreak
	  \tl_if_in:NnT \g__edu_aligntemp_tl {r} {
      \hfill
    }
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
  	  \begin{center}
	  }
	    \tikzinput{#3}
    \tl_if_in:NnT \g__edu_aligntemp_tl {c} {
	    \end{center}
	  }
    \tl_if_in:NnT \g__edu_aligntemp_tl {l} {
      \hfill
    }
  }
  \str_if_eq:nnTF {#5} {c} {
    \end{cols2*}
  }{
    \end{cols2}
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {tikzcol*} {\tikzcol*}
\cs_new:cpn {endtikzcol*} {\endtikzcol}

\end{MacroCode}
\end{environment}
\end{environment}


\subsection{Notizen}

\begin{macro}{\notet}[1]{<text>}
Textnotizen:
\begin{MacroCode}{class}
\DeclareDocumentCommand \notet { m } {%
  \bool_if:NT \g_edu_shownotes_bool {
    {\g_edu_notetstyle_tl\textcolor{\g_edu_notetfg_tl}{#1}}\xspace%
  }
}
\end{MacroCode}
\end{macro}


\begin{macro}{\notehr}
Horizontale Linie zur Markierung.
\begin{MacroCode}{class}
\DeclareDocumentCommand \notehr { } {%
  \bool_if:NT \g_edu_shownotes_bool {
    \par
    {%
      \color{\g_edu_notehrfg_tl}
      \rule[0.75\baselineskip]{\linewidth}{\g_edu_notehrule_dim}%
      \vspace{-\baselineskip}%
    }%
  }%
}

\end{MacroCode}
\end{macro}

\begin{macro}{\noteitem}[1]{<text>}
Notizen in Listen:
\begin{MacroCode}{class}
\DeclareDocumentCommand \noteitem { m } {%
  \bool_if:NT \g_edu_shownotes_bool {
    \item{\g_edu_notetstyle_tl\textcolor{\g_edu_notetfg_tl}{#1}}%
  }
}
\end{MacroCode}
\end{macro}


\subsection{Unterrichtsablauf}

\subsubsection{Hilfskommandos}

Zuerst einige Zähler:
\begin{MacroCode}{class}
\int_new:N \g__edu_ttminutesum_int
\int_gset:Nn \g__edu_ttminutesum_int {0}

\int_new:N \g__edu_tthour_int
\int_new:N \g__edu_ttminute_int

\end{MacroCode}


\begin{macro}{\edu_ttaddhours:n}[1]{<hours>}
\begin{macro}{\edu_ttaddminutes:n}[1]{<minutes>}
Die Uhrzeit zur Beginn der jeweiligen Phase soll berechnet werden.
 Die aktuelle Stunde und Minute wird in den Countern \cs{__edu_tthour} und \cs{__edu_tthour} gespeichert. Die folgenden Kommandos erlauben das Addieren von Stunden und Minuten zur aktuellen Zeit. Es sind jedoch nur Stundenwerte kleiner 24 und Minutenwerte kleiner 60 zulässig.
\begin{MacroCode}{class}
\cs_new:Npn \edu_ttaddhours:n #1 {
  \int_gadd:Nn \g__edu_tthour_int {#1}
  \int_compare:nNnT {\g__edu_tthour_int} > {23} {
    \int_gsub:Nn \g__edu_tthour_int {24}
  }
}

\cs_new:Npn \edu_ttaddminutes:n #1 {
  \int_gadd:Nn \g__edu_ttminute_int {#1}
  \int_compare:nNnT {\g__edu_ttminute_int} > {59} {
    \int_gadd:Nn \g__edu_tthour_int {1}
    \int_gsub:Nn \g__edu_ttminute_int {60}
  }
  \int_compare:nNnT {\g__edu_tthour_int} > {23} {
    \int_gsub:Nn \g__edu_tthour_int {24}
  }
}

\end{MacroCode}
\end{macro}
\end{macro}


\begin{macro}{\edu_ttentrytime:}
Mit diesem Makro kann die aktuelle Uhrzeit im Format hh:mm ausgegeben werden. Als Einheit wird die Option \opt{ttentrytimelabel} verwendet.
\begin{MacroCode}{class}
\cs_new:Npn \edu_ttentrytime: {  
  \int_compare:nNnTF {\g__edu_tthour_int} < {10} {
    0\int_to_arabic:n {\g__edu_tthour_int}
  }{
    \int_to_arabic:n {\g__edu_tthour_int}
  }
  :
  \int_compare:nNnTF {\g__edu_ttminute_int} < {10} {
    0\int_to_arabic:n {\g__edu_ttminute_int}
  }{
    \int_to_arabic:n {\g__edu_ttminute_int}
  }
  \tl_if_empty:NF \__edu_ttentryltimelabel {
    \,\g_edu_ttentrytimelabel_tl
  }
}

\end{MacroCode}
\end{macro}


\subsubsection{Tabelle}

Tabelle zur Planung des Unterrichtsablaufs.

\begin{macro}{\g__edu_ttable_tl}
Die Zeilen der Tabelle werden als \cs{__edu_ttable} zusammengesetzt.
\begin{MacroCode}{class}
\tl_new:N \g__edu_ttable_tl
\end{MacroCode}
\end{macro}

\begin{macro}{\ttstart}[2]{<begin hour>}{<begin minute>}
Dieser Befehl inizialisiert die Zeit-Variablen. Als Argumente müssen die aktuelle Stunde und Minuten angegeben werden, z.\,B. \Macro\begin{ttable}{9}{45} für 9:45\,Uhr.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ttstart { m m } {
  \int_gset:Nn \g__edu_ttminutesum_int {0}
  \int_gset:Nn \g__edu_tthour_int {#1}
  \int_gset:Nn \g__edu_ttminute_int {#2}
  
  \tl_clear:N \g__edu_ttable_tl
}


\end{MacroCode}
\end{macro}

\begin{macro}{\ttcontinue}
Muss die Tabelle unterbrochen werden -- z.\,B. weil ein Seitenumbruch vonnöten ist -- kann diese durch diesen Befehl fortgesetzt werden.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ttcontinue {  } {
  \tl_clear:N \g__edu_ttable_tl
}


\end{MacroCode}
\end{macro}


\begin{macro}{ttable}
\begin{macro}{ttable*}[1]{[<text before>]}
Erzeugt die Tabelle für den Unterrichtsablauf unter Verwendung diverser Optionen.

Die Sternvariante setzt die Tabelle im Querformat. Die Breiten der Spalten werden über eigene Optionen angegeben. Ein zusätzlicher, optionaler Parameter kann in der Sternvariante verwendet werden, um Text (z.\,B. eine Überschrift) über der Tabelle zu positionieren.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ttable { s o } {%
  \group_begin:
  
  \setlist[itemize]{%
    topsep=-0.25\baselineskip,
    itemsep=-0.25\baselineskip,
    parsep=0.25\baselineskip,
  }
  
  \setlist[enumerate]{%
    topsep=-0.25\baselineskip,
    itemsep=-0.25\baselineskip,
    parsep=0.25\baselineskip,
  }
  
  \bool_if:NT \g_edu_ttdisablehyphenation_bool {
    \hyphenpenalty 10000
    \exhyphenpenalty 10000
  }
  \IfBooleanTF {#1} {
    \landscape
    \IfValueT {#2} {
      #2
    }
    \begin{tabularx}{\linewidth}{%
      >{\RaggedRight}p{\g_edu_tttimewidthlscape_dim}%
      >{\RaggedRight}p{\g_edu_ttstagewidthlscape_dim}%
      >{\RaggedRight}X%
      >{\RaggedRight}p{\g_edu_ttmethodwidthlscape_dim}%
      >{\RaggedRight}p{\g_edu_ttmediawidthlscape_dim}%
    }
  }{
	  \begin{tabularx}{\linewidth}{%
	    >{\RaggedRight}p{\g_edu_tttimewidth_dim}%
	    >{\RaggedRight}p{\g_edu_ttstagewidth_dim}%
	    >{\RaggedRight}X%
	    >{\RaggedRight}p{\g_edu_ttmethodwidth_dim}%
	    >{\RaggedRight}p{\g_edu_ttmediawidth_dim}%
	  }
  }
  \bool_if:NTF \g_edu_ttendtime_bool {
    \toprule
  }{
    \midrule
  }
  \small\textsfbf{\g_edu_tttimelabel_tl} & 
  \small\textsfbf{\g_edu_ttstagelabel_tl} & 
  \small\textsfbf{\g_edu_ttactivitylabel_tl} &  
  \small\textsfbf{\g_edu_ttmethodlabel_tl} & 
  \small\textsfbf{\g_edu_ttmedialabel_tl} \\ 
  
  \bool_if:NTF \g_edu_ttendtime_bool {
    \headrule
  }{
    \midrule
  }
  
  \tl_use:N \g__edu_ttable_tl
  
  \bool_if:NT \g_edu_ttendtime_bool {
    \edu_ttentrytime: \\ \bottomrule
  }  

  \end{tabularx}
  \IfBooleanT {#1} {
    \endlandscape
  }
  \group_end:
}

\end{MacroCode}
\end{macro}
\end{macro}


\begin{macro}{\ttentry}[6]{[<duration planned>]}{[<duration required>]}{<stage>}{<activity>}{<methods>}{<media>}
\begin{macro}{\ttentry*}[6]{[<duration planned>]}{[<duration required>]}{<stage>}{<activity>}{<methods>}{<media>}
Durch \cs{ttentry} wird eine Zeile des Unterrichtsablaufes angegeben. Die Parameter entsprechen den Spalten der Tabelle. Der erste Parameter -- die Dauer der Phase -- ist optional. Wird sie nicht angegeben, entfällt die Anzeige der Dauer/Uhrzeit.

Die Sternvariante setzt die Zelle direkt in eine Aufzählung vom Typ \env*{itemizet}.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ttentry { s O{} O{} m +m +m +m } {%
  \bool_if:nT {!\tl_if_empty_p:n {#2} && \bool_if_p:N \g_edu_ttshowtime_bool} {
    \tl_gput_right:Nx \g__edu_ttable_tl {\edu_ttentrytime:}
    \tl_gput_right:Nn \g__edu_ttable_tl {\newline}
    
    \edu_ttaddminutes:n {#2}
    \int_gadd:Nn \g__edu_ttminutesum_int {#2}
    
    \tl_gput_right:Nn \g__edu_ttable_tl {#2\,\textbar\,}
    \tl_gput_right:NV \g__edu_ttable_tl {\g__edu_ttminutesum_int}
    
    \tl_if_empty:nF {#3} {
      \tl_gput_right:NV \g__edu_ttable_tl {\newline \textcolor{gray}{(#3)}}
    }
  }%
  \tl_gput_right:Nn \g__edu_ttable_tl { & #4 & }
  \IfBooleanT {#1} {
    \tl_gput_right:Nn \g__edu_ttable_tl { \begin{itemizet} }
  }
  \tl_gput_right:Nn \g__edu_ttable_tl { #5 }
  \IfBooleanT {#1} {
    \tl_gput_right:Nn \g__edu_ttable_tl { \end{itemizet} }
  }
  \tl_gput_right:Nn \g__edu_ttable_tl {& #6 & #7 \tabularnewline \midrule
  }
}

\end{MacroCode}
\end{macro}
\end{macro}


\begin{macro}{\ttbreak}[4]{[<duration>]}{[<activity>]}{[<methods>]}{[<media>]}
\begin{macro}{\ttbreak*}[4]{[<duration>]}{[<activity>]}{[<methods>]}{[<media>]}
Durch \cs{ttentry} kann eine Pause im Unterrichtsablauf angegeben werden. Diese wird als Unterrichtsphase hervorgehoben. Alle Argumente sind optional. Angegeben werden können die Dauer \texttt{<duration>}, ein eventuelle Ablauf \texttt{<activity>}, Methoden \texttt{<methods>} und Medien \texttt{<media>}.

Die Sternvariante setzt die Zelle direkt in eine Aufzählung vom Typ \env*{itemizet}.
\begin{MacroCode}{class}
\DeclareDocumentCommand \ttbreak { s O{} +O{} +O{} +O{}} {%
  \bool_if:nT {!\tl_if_empty_p:n {#2} && \bool_if_p:N \g_edu_ttshowtime_bool} {
    \tl_gput_right:Nx \g__edu_ttable_tl {\edu_ttentrytime:}
    
    \edu_ttaddminutes:n {#2}
  }
  \tl_gput_right:Nn \g__edu_ttable_tl { & \textsfbf{Pause} & }
  \IfBooleanT {#1} {
    \tl_gput_right:Nn \g__edu_ttable_tl { \begin{itemizet} }
  }
  \tl_gput_right:Nn \g__edu_ttable_tl { #3 }
  \IfBooleanT {#1} {
    \tl_gput_right:Nn \g__edu_ttable_tl { \end{itemizet} }
  }
  \tl_gput_right:Nn \g__edu_ttable_tl {& #4 & #5 \tabularnewline \midrule
  }
}

\end{MacroCode}
\end{macro}
\end{macro}


\subsubsection{Ablaufliste}


\begin{macro}{\g_edu_teachera_tl}
\begin{macro}{\g_edu_teachers_tl}
\begin{macro}{\g_edu_studenta_tl}
\begin{macro}{\g_edu_students_tl}
Zuerst werden Makros erstellt, welche die Label erzeugen. Für Lehrer und Schüler, Handlungen und Gesprochenes:
\begin{MacroCode}{class}
\tl_new:N \g_edu_teachera_tl
\tl_new:N \g_edu_teachers_tl
\tl_new:N \g_edu_studenta_tl
\tl_new:N \g_edu_students_tl

\tl_gset:Nn \g_edu_teachera_tl {%
  \makebox[2em][l]{{\g_edu_seqteacherstyle_tl\color{\g_edu_seqteacherfg_tl} \g_edu_seqteacherlabel_tl} \action}%
}

\tl_gset:Nn \g_edu_teachers_tl {%
  \makebox[2em][l]{{\g_edu_seqteacherstyle_tl\color{\g_edu_seqteacherfg_tl} \g_edu_seqteacherlabel_tl} \speech}%
}

\tl_gset:Nn \g_edu_studenta_tl {%
  \makebox[2em][l]{{\g_edu_seqetudentstyle_tl\color{\g_edu_seqstudentfg_tl} \g_edu_seqstudentlabel_tl} \action}%
}

\tl_gset:Nn \g_edu_students_tl {%
  \makebox[2em][l]{{\g_edu_seqetudentstyle_tl\color{\g_edu_seqstudentfg_tl} \g_edu_seqstudentlabel_tl} \speech}%
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}



\begin{macro}{\itemta}
\begin{macro}{\itemts}
\begin{macro}{\itemsa}
\begin{macro}{\itemss}
Damit diese analog zu \cs{item} verwendet werden können, müssen sie nun noch in ein solches gebettet werden. Dies kann nicht in einem Schritt geschehen (Warum?).
\begin{MacroCode}{class}
\DeclareDocumentCommand \itemta { } {\item[\g_edu_teachera_tl]}
\DeclareDocumentCommand \itemts { } {\item[\g_edu_teachers_tl]}
\DeclareDocumentCommand \itemsa { } {\item[\g_edu_studenta_tl]}
\DeclareDocumentCommand \itemss { } {\item[\g_edu_students_tl]}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\begin{environment}{sequence}
\begin{environment}{sequencet}
Abschließend wird eine angepasste Auflistung \env{sequence} definiert. Die Variante \env{sequencet} ist analog zu \env{itemizet} zur Verwendung in einer Ablauftabelle geeignet.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {sequence} { } {%
  \begin{itemize}[labelwidth=2em, leftmargin= 2em + \labelsep + \labelsep]
}{%
  \end{itemize}
}

\DeclareDocumentEnvironment {sequencet} { } {%
  \@minipagetrue%
  \setpar
  \begin{itemize}[labelwidth=2em, leftmargin= 2em + \labelsep + 0.1\labelsep, nosep]
}{%
  \vspace{-\baselineskip}
  \end{itemize}
}

\end{MacroCode}
\end{environment}
\end{environment}


\subsection{Tafelbild}

\begin{macro}{\g_edu_setbblengths_tl}
Die folgenden Längen werden für das Tafelbild angepasst.
\begin{MacroCode}{class}
\tl_new:N \g_edu_setbblengths_tl
\tl_gset:Nn \g_edu_setbblengths_tl {%
  \setlength{\columnsep}{0.5em}%
  \setlength{\jot}{0pt}%
  \setlength{\abovedisplayskip}{0.4ex}%
  \setlength{\belowdisplayskip}{0.4ex}%
}

\end{MacroCode}
\end{macro}


\begin{macro*}{\g__edu_bbbaselineskip_dim}
\begin{environment}{bbpart}[2]{[<vertical alignment>]}{<width>}
\begin{environment}{bbpart*}[2]{[<vertical alignment>]}{<width>}
Nun wird die \env{bbpart}-Umgebung definiert. Mit ihr ist es möglich, 
den Teil einer Tafel (als rechteckige Minipage) zu setzen. Das 
optionale Argument gibt die vertikale Zentrierung an, das benötigte 
Argument die Breite des Rechtecks. Die Höhe entspricht einem Viertel 
der Seitenbreite.

In der Sternvariante wird der Text horizontal zentriert.

Wichtig: Jede Zeile mit einem \% beenden, sonst entsteht ein ungewünschter Abstand zwischen den Tafelteilen.

Wichtig: Da die Definitionen von \cs*{NewEnviron} nicht geschachtelt werden 
können, müssen alle Varianten der Umgebung einzeln definiert werden. Dies 
führt leider zu Redundanzen und muss beim Verändern berücksichtigt werden.
\begin{MacroCode}{class}
\dim_new:N \g__edu_bbbaselineskip_dim
\dim_gset:Nn \g__edu_bbbaselineskip_dim {\g_edu_bbfontsize_dim + \g_edu_bbbaselineoffset_dim}

\newsavebox{\bbbox}

\DeclareDocumentEnvironment {bbpart} { s O{t} m } {
  \g_edu_setbblengths_tl%
  \hspace{\fboxrule}%
  \begin{lrbox}{\bbbox}
    \begin{minipage}[c][\g_edu_bbheight_dim][#2]{#3 - 2\fboxsep - 2\fboxrule}%
      \g_edu_bbstyle_tl%
      \fontsize{\g_edu_bbfontsize_dim}{\g__edu_bbbaselineskip_dim}\selectfont%
      \setpar%
      \IfBooleanT {#1} {
        \begin{center}
      }
}{
      \mbox{}  % Damit Tafel auch ohne Inhalt angezeigt wird.
      \IfBooleanT {#1} {
        \end{center}
      }
    \end{minipage}%
  \end{lrbox}
  \fbox{\usebox{\bbbox}}
  \hspace{-3\fboxrule}%
  \hspace{-1.9pt} % Removes strange space between minipages.
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {bbpart*} {\bbpart*}
\cs_new_eq:cN {endbbpart*} \endbbpart

\end{MacroCode}
\end{environment}
\end{environment}
\end{macro*}


\begin{environment}{bbhalf}[1]{[<vertical alignment>]}
\begin{environment}{bbhalf*}[1]{[<vertical alignment>]}
Analog zu oben, jedoch mit fester Breite von einem Viertel der Seitenbreite.
Entspricht einer Klapptafel.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {bbhalf} { s O{t} } {
  \IfBooleanTF {#1} {
    \begin{bbpart*}[#2]{0.25\linewidth}%
  }{
    \begin{bbpart}[#2]{0.25\linewidth}%
  }
}{%
  \IfBooleanTF {#1} {
    \end{bbpart*}
  }{
    \end{bbpart}
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {bbhalf*} {\bbhalf*}
\cs_new_eq:cN {endbbhalf*} \endbbhalf

\end{MacroCode}
\end{environment}
\end{environment}


\begin{environment}{bbfull}[1]{[<vertical alignment>]}
\begin{environment}{bbfull*}[1]{[<vertical alignment>]}
Analog zu oben, jedoch mit fester Breite von der Hälfte der Seitenbreite.
Entspricht der zentralen, großen Tafelfläche.
\begin{MacroCode}{class}
\DeclareDocumentEnvironment {bbfull} { s O{t} } {
  \IfBooleanTF {#1} {
    \begin{bbpart*}[#2]{0.5\linewidth}%
  }{
    \begin{bbpart}[#2]{0.5\linewidth}%
  }
}{%
  \IfBooleanTF {#1} {
    \end{bbpart*}
  }{
    \end{bbpart}
  }
}

% Hack, because xparse doesn't generate starred environments:
\cs_new:cpn {bbfull*} {\bbfull*}
\cs_new_eq:cN {endbbfull*} \endbbfull

\end{MacroCode}
\end{environment}
\end{environment}

\begin{macro}{bbsection}[1]{<name>}
\begin{macro}{bbsection*}[1]{<name>}
\begin{macro}{bbsubsection}[1]{<name>}
\begin{macro}{bbsubsection*}[1]{<name>}
\begin{macro}{bbsubsubsection}[1]{<name>}
\begin{macro}{bbsubsubsection*}[1]{<name>}
Macro für zentrierte Überschriften der obersten Gliederungsebene auf Tafelbildern.
\begin{MacroCode}{class}
\DeclareDocumentCommand \bbsection { s m } {%
  \group_begin:
  \IfBooleanT {#1} {
    \begin{center}
  }
    {\g_edu_bbsectionstyle_tl #2}
  \IfBooleanT {#1} {
    \end{center}
  }
  \group_end:
}

\DeclareDocumentCommand \bbsubsection { s m } {%
  \group_begin:
  \IfBooleanT {#1} {
    \begin{center}
  }
    {\g_edu_bbsubsectionstyle_tl #2}
  \IfBooleanT {#1} {
    \end{center}
  }
  \group_end:
}

\DeclareDocumentCommand \bbsubsubsection { s m } {%
  \group_begin:
  \IfBooleanT {#1} {
    \begin{center}
  }
    {\g_edu_bbsubsubsectionstyle_tl #2}
  \IfBooleanT {#1} {
    \end{center}
  }
  \group_end:
}

\end{MacroCode}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}
\end{macro}


\subsection{Klassenarbeit}

\subsubsection{Titel}

\begin{macro}{\edu_examtitlegraphicoverlay:nn}[2]{<filename>}{<height>}
This function creates a graphic overlay using a graphics file (\texttt{<filename>}) for the exam title (\cs{makeexamtitle}). The height of the graphic needs to be specified via \texttt{<height>}.
\begin{MacroCode}{class}
\cs_new:Npn \edu_examtitlegraphicoverlay:nn #1 #2 {
  \tikz {
	    \node[inner~sep=0pt, outer~sep=0pt, anchor=north~east] (n) at (0, 0) {\strut};
	  \begin{pgfinterruptboundingbox}
	    \node[anchor=north~east, inner~sep=0pt, outer~sep=0pt] at (0, 0) {\includegraphics[height=#2]{#1}};
		\end{pgfinterruptboundingbox}
	}
}

\end{MacroCode}
\end{macro}


\begin{macro}{\edu_mariovictory_shifted:nn}[2]{<text>}{<scale>}
This function creates a graphic overlay of the Mario victory graphic. The \texttt{<text>} is typeset to Mario's right. Mario is very large by default (about 27 centimeters) and should be scaled using the \texttt{<scale>} factor.
\begin{MacroCode}{class}
\cs_new:Npn \edu_mariovictory_shifted:nn #1 #2 {
	\tikz[scale=#2] {
	  \node[inner~sep=0pt,outer~sep=0pt,anchor=north~east] (n) at (0, 0){\strut};
	  
	  \setlength{\baselineskip}{2.5ex}
	  
	  \begin{pgfinterruptboundingbox}
			\begin{scope}[xshift=-35cm, yshift=-27cm]
	    \draw (19, 13) node[anchor=west, align=left, font=\bfseries\ttfamily, scale=1.2, inner~sep=0pt] {#1};
				\edu_mariovictory_pixel:
		  \end{scope}
		\end{pgfinterruptboundingbox}
	}
}

\end{MacroCode}
\end{macro}


\begin{macro}{\makeexamtitle}[3]{[<text>]}{[<filename>]}{[<height>]}
This function typesets the exam title. It is derived from \cs{maketitle*}. By default, the Mario victory graphic is placed at the title. With the first optional argument, the \texttt{<text>} typeset to Mario's right can be modified. Alternatively, you can choose your own graphic with the the second optional argument \texttt{<filename>} (which makes \texttt{<text>} obsolete). The height of the graphic can be specified using the argument \texttt{<height>}.
\begin{MacroCode}{class}
\DeclareDocumentCommand \makeexamtitle {s O{Viel\\ Erfolg!} O{mario-victory} O{\g_edu_examtitlegraphicsheight_dim}} {
	
	\setlength{\parfillskip}{0em}
  \par
  \vspace{0.75ex}
  \parskipreduce
  \group_begin:
    \g_edu_titlestyle_tl%
    \color{\g_edu_titlefg_tl}%
    \noindent\g_edu_title_tl%
  \group_end:
  \hfill%
  \group_begin:
    \tl_if_empty:nF {#3} {
	    \tl_if_eq:nnTF {#3} {mario-victory} {
	      \edu_mariovictory_shifted:nn {#2}{\fp_use:N \g_edu_examtitlegraphicsscale_fp}
	    }{
	      \edu_examtitlegraphicoverlay:nn{#3}{#4}
	    }
	  }
  \group_end:
  \tl_if_empty:NTF \g_edu_group_tl {
    \hspace*{1cm}
  }{
    \hspace*{0.75cm}
    \group_begin:
      \setlength{\fboxsep}{0.25em}
      \g_edu_groupstyle_tl%
      \colorbox{\g_edu_groupbg_tl}{%
        \textcolor{\g_edu_groupfg_tl}{\g_edu_group_tl}%
      }%
    \group_end:
  }
  \par
  \setlength{\parfillskip}{1em plus 1fil}
  
  \tl_if_empty:NTF \g_edu_subtitle_tl {
    \addvspace{0.5\baselineskip}
  }{
    \parskipreduce
    \group_begin:
      \g_edu_subtitlestyle_tl
      \color{\g_edu_titlefg_tl}\noindent\g_edu_subtitle_tl\par
    \group_end:
  }
  \group_begin:
    \tl_set:Nn \l__edu_tempi_tl {}
    \tl_set:Nn \l__edu_tempii_tl {}
    
    \tl_if_empty:NF \g_edu_examtitlefieldilabel_tl {
    
      \tl_put_right:Nn \l__edu_tempi_tl {
        \rule{\g_edu_examtitlefieldiwidth_dim}{0.4pt}
	      \hspace*{\g_edu_examtitlefieldsep_dim} \=
	    }
	    
      \tl_put_right:Nn \l__edu_tempii_tl {
        \g_edu_examtitlefieldilabel_tl \> 
	    }
    }
    
    \tl_if_empty:NF \g_edu_examtitlefieldiilabel_tl {
    
      \tl_put_right:Nn \l__edu_tempi_tl {
        \rule{\g_edu_examtitlefieldiiwidth_dim}{0.4pt}
	      \hspace*{\g_edu_examtitlefieldsep_dim} \=
	    }
	    
      \tl_put_right:Nn \l__edu_tempii_tl {
        \g_edu_examtitlefieldiilabel_tl \> 
	    }
    }
    
    \tl_if_empty:NF \g_edu_examtitlefieldiiilabel_tl {
    
      \tl_put_right:Nn \l__edu_tempi_tl {
        \rule{\g_edu_examtitlefieldiiiwidth_dim}{0.4pt}
	      \hspace*{\g_edu_examtitlefieldsep_dim} \=
	    }
	    
      \tl_put_right:Nn \l__edu_tempii_tl {
        \g_edu_examtitlefieldiiilabel_tl \> 
	    }
    }
    
	  \setlength{\topsep}{-\parskip}
	  \setlength{\partopsep}{0pt}
	  \vspace{0.5cm}
	  \small\sffamily
	  \begin{tabbing}
	    \l__edu_tempi_tl \\[-0.5ex]
	    \l__edu_tempii_tl
	  \end{tabbing}
  \group_end:
  
  \addvspace{0.25\baselineskip}
	
  \bool_if:NT \g_edu_transparency_bool {
    \KOMAoption{fontsize}{\dim_use:N \g_edu_transparencyfontsize_dim}%
    \RaggedRight
    \tolerance=10000
  }
}

\end{MacroCode}
\end{macro}




\subsubsection{Ergebnisse}

\begin{macro}{\edu_exampointstable:nnn}[3]{<exercise numbers clist>}{<exercise points clist>}{<total points>}
This command creates a tabular listing the exercises (\texttt{<exercise numbers clist>}) with the associated points (\texttt{<exercise points clist>}) and the \texttt{<total points>}. There is also a row to note the achieved number of points.

The columntype of the exercises is \texttt{>{\centering}X} or \texttt{C{1em}}, depending on the option \opt{exampointstabletype}.
\begin{MacroCode}{class}
\cs_new:Npn \edu_exampointstable:nnn #1 #2 #3 {
  \tl_set:Nn \l_tmpi_tl {}
  \tl_set:Nn \l_tmpii_tl {}
  
  \clist_map_inline:nn {#1} {
    \tl_put_right:Nn \l_tmpi_tl {##1 & }
  }
  
  \clist_map_inline:nn {#2} {
    \tl_put_right:Nn \l_tmpii_tl {##1 & }
  }
  
  \renewcommand{\arraystretch}{1.2}
	\group_begin:
	  \sffamily
	  \tl_if_eq:VnT \g_edu_exampointstabletype_tl {X} {
	    \begin{tabularx}{\linewidth}{|l||*{\clist_count:n {#1}}{>{\centering}X|}|C{0.75cm}|}
	      \hline
		    \multicolumn{\int_eval:n {\clist_count:n {#1}+2}}{|l|}{\textbf{\g_edu_exampointstablelabel_tl}} \\ \hline
		    \g_edu_exampointstableexelabel_tl & \l_tmpi_tl \g_edu_exampointstablesumlabel_tl \\ \hline\hline
		    \g_edu_exampointstablemaxlabel_tl & \l_tmpii_tl  #3 \\ \hline
		    \g_edu_exampointstableachlabel_tl & \prg_replicate:nn {\clist_count:n {#1}}{&}  \\ \hline
	  	\end{tabularx}
	  }
	  
	  \tl_if_eq:VnT \g_edu_exampointstabletype_tl {C} {
	    \begin{tabular}{|l|*{\clist_count:n {#1}}{C{1em}|}c|}
	      \hline
		    \multicolumn{\int_eval:n {\clist_count:n {#1}+2}}{|l|}{\textbf{\g_edu_exampointstablelabel_tl}} \\ \hline
		    \g_edu_exampointstableexelabel_tl & \l_tmpi_tl \g_edu_exampointstablesumlabel_tl \\ \hline
		    \g_edu_exampointstablemaxlabel_tl & \l_tmpii_tl  #3 \\ \hline
		    \g_edu_exampointstableachlabel_tl & \prg_replicate:nn {\clist_count:n {#1}}{&}  \\ \hline
	    \end{tabular}
	  }
	\group_end:
}

\end{MacroCode}
\end{macro}

\begin{macro}{\exampointstable}[3]{<exercise numbers clist>}{<exercise points clist>}{<total points>}
User command for \cs{edu_exampointstable:nnn}.
\begin{MacroCode}{class}
\NewDocumentCommand \exampointstable { m m m } {
  \edu_exampointstable:nnn {#1}{#2}{#3}
}

\end{MacroCode}
\end{macro}

\begin{macro}{\makeexamrestable}[3]{<exercise numbers clist>}{<exercise points clist>}{<total points>}
Typesets a box for entering the results of an exam (table with maximum/achieved points per exercise, total number of points (\texttt{<total points>}), mark, average mark, field for signature of parents).

The numbers of exercises and the associated maximum points are defined as a comma separated list \texttt{<exercise numbers clist>}/\texttt{<exercise points clist>}.
\begin{MacroCode}{class}
\NewDocumentCommand \makeexamrestable { s o m m m } {
  
  \setlength{\fboxsep}{10pt}
	\fbox{
	  \parbox{\linewidth-2\fboxsep-2\fboxrule}{
	    \IfNoValueF {#2} {
	      \group_begin:
	        \Large\sffamily\bfseries #2
	      \group_end:
	      \medskip
	    }
	    \par
		  \begin{minipage}{\g_edu_exampointstablewidth_tl-\fboxsep}
		    \exampointstable{#3}{#4}{#5}
		  \end{minipage}
		  \hfill
		  \begin{minipage}{\linewidth-\g_edu_exampointstablewidth_tl}
			  \Large\sffamily\bfseries \g_edu_exampointsmarklabel_tl :~\tikz[baseline=0.75ex] \draw (0,0) rectangle (1.25,0.65);
			  \hspace{0.35cm} \large \g_edu_exampointsaveragelabel_tl
			  
			  \bool_if:NT \g_edu_exampointssecondmark_bool {
				  \par
				  \normalsize
				  \medskip
				  \g_edu_exampointssecondmarklabel_tl :~ \tikz[baseline=0.75ex] \draw (0,0) rectangle (1,0.5);
			  }
			  		
			  
			  \bool_if:NT \g_edu_exampointssignature_bool {	  
			    \par
			    \mdseries\footnotesize
			    \vspace{0.75cm}
			    \rule{\linewidth}{0.4pt}\\
			    \g_edu_exampointssignaturelabel_tl
			  }
		  \end{minipage}
	  }
	}
  \setlength{\fboxsep}{3pt}
}

\end{MacroCode}
\end{macro}

\begin{macro}{\makeexamres}[1]{<total points>}
Typesets a reduced box for entering the results of an exam (acchieved points, mark, average mark, field for signature of parents).
\begin{MacroCode}{class}
\NewDocumentCommand \makeexamres { s m } {
  \setlength{\fboxsep}{10pt}
	\fbox{
	  \parbox{\linewidth-2\fboxsep-2\fboxrule}{
	    \sffamily\Large
		  \begin{minipage}{0.55\linewidth-\fboxsep}
			  \textbf{Punkte:} 
		    \hspace{1.75cm} \g_edu_exampointsoflabel_tl\ #2
		    
		    \par
		    \vspace{0.5\baselineskip}
		    \textbf{\LARGE\g_edu_exampointsmarklabel_tl :~\tikz[baseline=0.75ex] \draw (0,0) rectangle (1.5,0.75);} 
		    \hspace{0.75cm} \textbf{\g_edu_exampointsaveragelabel_tl}
		    
			  \bool_if:nT {\g_edu_exampointssecondmark_bool 
			    && \g_edu_exampointssignature_bool
			  }{
				  \par
				  \large\bfseries
				  \medskip
				  \g_edu_exampointssecondmarklabel_tl :~ \tikz[baseline=0.75ex] \draw (0,0) rectangle (1,0.5);
			  }
	    \end{minipage}
	    \begin{minipage}{0.45\linewidth-\fboxsep}
			  \bool_if:NTF \g_edu_exampointssignature_bool {	
			    \vspace{1cm}
	        \mdseries\footnotesize
	        \rule{7cm}{0.4pt}\\
		  	  \g_edu_exampointssignaturelabel_tl
		  	}{
			  	\bool_if:NT \g_edu_exampointssecondmark_bool {	
			  	  \par
				    \large\bfseries
					  \medskip
					  \g_edu_exampointssecondmarklabel_tl :~ \tikz[baseline=0.75ex] \draw (0,0) rectangle (1,0.5);
					}
		  	}
	    \end{minipage}
	  }
	}
  \setlength{\fboxsep}{3pt}	
}

\end{MacroCode}
\end{macro}




\subsection{Informatik}

\subsubsection{\textsf{listings}}

Zuerst werden Styles für abgesetzte Listings und Inline-Listings definiert:

\begin{macro*}{\g_edu_lstbelowskip}
\begin{MacroCode}{class}
\dim_new:N \g_edu_lstbelowskip
\dim_gset:Nn \g_edu_lstbelowskip {0.2\baselineskip-0.5\parskip}

\lstdefinestyle{lststyle}{%
  aboveskip=0.75\baselineskip,
  belowskip=\g_edu_lstbelowskip,
  language=Java, 
  basicstyle=\ttfamily\footnotesize, 
  keywordstyle=\color{\g_edu_lstnumberfg_tl}\bfseries, 
  stringstyle=\emph, 
  numberstyle=\color{\g_edu_lstnumberfg_tl}\ttfamily\scriptsize,
  numbers=left, 
  numbersep=8pt, 
  frame=trbl, 
  framesep=0pt,
  framexleftmargin=2pt,
  framexrightmargin=2pt,
  framerule=0.7pt,
  rulecolor=\color{\g_edu_lstrulefg_tl},
  captionpos=b, 
  tabsize=2, 
  showstringspaces=false, 
  xleftmargin=2.5em,
  xrightmargin=0cm,
  breaklines=true,
  prebreak={\,\,\Pisymbol{psy}{191}},
%  backgroundcolor=\color{wuLightGray},
  escapeinside={/@}{@/},
  lineskip=1pt
}

\lstdefinestyle{lstistyle}{%
  language=Java, 
  basicstyle=\ttfamily, 
  keywordstyle=\color{\g_edu_lstnumberfg_tl}\bfseries, 
  stringstyle=\emph, 
  breaklines=true,
  prebreak={\,\,\Pisymbol{psy}{191}}
}

\lstdefinestyle{lstresstyle}{%
  aboveskip=0.75\baselineskip,
  belowskip=\g_edu_lstbelowskip,
  basicstyle=\ttfamily\footnotesize\color{\g_edu_resultfg_tl},
  keywordstyle=\bfseries\color{\g_edu_resultfg_tl},
  numberstyle=\color{\g_edu_resultfg_tl}\ttfamily\scriptsize,
  rulecolor=\color{\g_edu_resultfg_tl}
}

\tl_if_empty:NF \g_edu_resultlistinglabel_tl {
	\lstdefinestyle{lstresstyle}{%
    aboveskip=0.25\baselineskip,
    belowskip=\g_edu_lstbelowskip,
    basicstyle=\ttfamily\footnotesize\color{\g_edu_resultfg_tl},
    keywordstyle=\bfseries\color{\g_edu_resultfg_tl},
  numberstyle=\color{\g_edu_resultfg_tl}\ttfamily\scriptsize,
    rulecolor=\color{\g_edu_resultfg_tl},
	  title=\color{\g_edu_resultfg_tl}\sffamily\g_edu_resultlistinglabel_tl,
	  captionpos=t
	}
}

\lstset{%
  style=lststyle,
  upquote=true
}

% Support for Umlaute, dollar-symbol
% Prevent ligatures
\lstset{literate=%
    {Ö}{{\"O}}1
    {Ä}{{\"A}}1
    {Ü}{{\"U}}1
    {ß}{{\ss}}1
    {ü}{{\"u}}1
    {ä}{{\"a}}1
    {ö}{{\"o}}1
    {\$}{{\$}}1
}

\tl_if_empty:NF \g_edu_lstkeywordsprocessing_bool {
	\lstset{%
	  morekeywords={abs, acos, alpha, ambient, ambientLight, append, applyMatrix, arc, Array, arrayCopy, ArrayList, asin, atan, atan2, background, beginCamera, beginRaw, beginRecord, beginShape, bezier, bezierDetail, bezierPoint, bezierTangent, bezierVertex, binary, blend, blendColor, blue, boolean, boolean, box, break, brightness, BufferedReader, byte, byte, camera, case, catch, ceil, char, char, class, color, color, colorMode, concat, constrain, continue, copy, cos, createFont, createGraphics, createImage, createInput, createOutput, createReader, createWriter, cursor, curve, curveDetail, curvePoint, curveTangent, curveTightness, curveVertex, day, default, degrees, delay, directionalLight, dist, double, draw, ellipse, ellipseMode, else, emissive, endCamera, endRaw, endRecord, endShape, exit, exp, expand, extends, false, fill, filter, final, float, float, floor, focused, for, frameCount, frameRate, frameRate, frustum, get, green, HALF_PI, HashMap, height, hex, hint, hour, hue, if, image, imageMode, implements, import, int, int, join, key, keyCode, keyPressed, keyPressed, keyReleased, keyTyped, lerp, lerpColor, lightFalloff, lights, lightSpecular, line, link, loadBytes, loadFont, loadImage, loadPixels, loadShape, loadStrings, log, long, loop, mag, map, match, matchAll, max, millis, min, minute, modelX, modelY, modelZ, month, mouseButton, mouseClicked, mouseDragged, mouseMoved, mousePressed, mousePressed, mouseReleased, mouseX, mouseY, new, nf, nfc, nfp, nfs, noCursor, noFill, noise, noiseDetail, noiseSeed, noLights, noLoop, norm, normal, noSmooth, noStroke, noTint, null, Object, online, open, ortho, param, perspective, PFont, PGraphics, PI, PImage, pixels[], pmouseX, pmouseY, point, pointLight, popMatrix, popStyle, pow, print, printArray, printCamera, println, printMatrix, printProjection, PrintWriter, private, PShape, public, pushMatrix, pushStyle, PVector, quad, QUARTER_PI, radians, random, randomSeed, rect, rectMode, red, redraw, requestImage, resetMatrix, return, reverse, rotate, rotateX, rotateY, rotateZ, round, saturation, save, saveBytes, saveFrame, saveStream, saveStrings, scale, screen, screenX, screenY, screenZ, second, selectFolder, selectInput, selectOutput, set, setup, shape, shapeMode, shearX, shearY, shininess, shorten, sin, size, smooth, sort, specular, sphere, sphereDetail, splice, split, splitTokens, spotLight, sq, sqrt, static, status, str, String, stroke, strokeCap, strokeJoin, strokeWeight, subset, super, switch, tan, text, textAlign, textAscent, textDescent, textFont, textLeading, textMode, textSize, texture, textureMode, textWidth, this, tint, translate, triangle, trim, true, try, TWO_PI, unbinary, unhex, updatePixels, vertex, void, while, width, XMLElement, year}
	}
}

\end{MacroCode}
\end{macro*}


Defining an environment for displaying listings as a result. It uses the package \pkg{xsim} to write the code into a temporary file.

\begin{environment}{reslstlisting}
\begin{MacroCode}{class}
\NewDocumentEnvironment{reslstlisting}{}{
    \XSIMfilewritestart{\jobname.tmp}
}{
    \XSIMfilewritestop
    \bool_if:NT \g_edu_showresults_bool
        {
            \lstinputlisting[style=lstresstyle]{\jobname.tmp}
        }
}
\end{MacroCode}
\end{environment}




\subsection{Andere edu-Packages}

\begin{MacroCode}{class}

\bool_if:NT \g_edu_edumath_bool {
  
  \RequirePackage[\g_edu_edumathoptions_tl]{edumath}
}

\end{MacroCode}


\subsection{Patches}

These skips have to be set at the begin of the document (as they depend on the font). After \pkg{edumath} is loaded, they are somewhere set to other values, which has to be patched here.

\begin{MacroCode}{class}

\bool_if:NT \g_edu_edumath_bool {
  \AtBeginDocument{
    \setlength{\abovedisplayskip}{1.2ex plus 0.2ex minus 0.1ex}
    \setlength{\abovedisplayshortskip}{1ex plus 0.2ex minus 0.2ex}
    \setlength{\belowdisplayskip}{1.2ex plus 0.2ex minus 0.1ex}
    \setlength{\belowdisplayshortskip}{1ex plus 0.2ex minus 0.2ex}
  }
}

\end{MacroCode}


\subsection{Sonstiges}

Various additional common commands.

\begin{macro}{\templength}
\begin{macro}{tempcounter}
Length/command/counter for temporary usage.
\begin{MacroCode}{class}
\tl_if_exist:NF \templength {
  \newlength{\templength}
}

\tl_if_exist:NF \tempcommand {
  \newcommand{\tempcommand}{}
}

\ifx\c@tempcounter\undefined
  \newcounter{tempcounter}
\fi

\end{MacroCode}
\end{macro}
\end{macro}


\begin{MacroCode}{class}
\ExplSyntaxOff

\end{MacroCode}


%  \begin{thebibliography}{mm}
%    \bibitem{cancel} \textsc{Donald Arseneau}: \emph{cancel}. \url{http://www.ctan.org/pkg/cancel}.
%    \bibitem{ulsy} \textsc{Ulrich Goldschmitt}: \emph{ulsy}. \url{http://www.ctan.org/pkg/ulsy}.
%    \bibitem{booktabs} \textsc{Simon Fear} und \textsc{Danie Els} \emph{listings}. \url{http://www.ctan.org/pkg/booktabs}.
%    \bibitem{polynom} \textsc{Carsten Heinz}: \emph{polynom}. \url{http://www.ctan.org/pkg/polynom}.
%    \bibitem{listings} \textsc{Carsten Heinz} und \textsc{Brooks Moses} \emph{listings}. \url{http://www.ctan.org/pkg/listings}.
%    \bibitem{koma} \textsc{Markus Kohm}: \emph{KOMA-Script}. \url{http://www.ctan.org/pkg/koma-script}.
%    \bibitem{pdfpages} \textsc{Andreas Matthias}: \emph{pdfpages}. \url{http://www.ctan.org/pkg/pdfpages}.
%    \bibitem{multicol} \textsc{Frank Mittelbach}: \emph{multicol}. \url{http://www.ctan.org/pkg/multicol}.
%    \bibitem{lato} \textsc{Mohamed El Morabity}: \emph{lato}. \url{http://www.ctan.org/pkg/lato}.
%    \bibitem{units} \textsc{Axel Reichert}: \emph{units}. \url{http://www.ctan.org/pkg/units}.
%    \bibitem{esvect} \textsc{Eddie Saudrais}: \emph{esvect}. \url{http://www.ctan.org/pkg/esvect}.
%    \bibitem{icomma} \textsc{Walter Schmidt}: \emph{icomma}. \url{http://www.ctan.org/pkg/icomma}.
%    \bibitem{fonts} \textsc{Walter Schmidt}: \emph{psnfss}. \url{http://www.ctan.org/pkg/pifont}.
%    \bibitem{tikz} \textsc{Till Tantau}: \emph{tikz}. \url{http://www.texample.net/tikz/}.
%    \bibitem{eurosym} \textsc{Henrik Theiling}: \emph{eurosym}. \url{http://www.ctan.org/pkg/eurosym}.
%  \end{thebibliography}







    \Finale
%    \section{Installation}
%    The easiest way to install this package is using the package
%    manager provided by your \LaTeX\ installation if such a program
%    is available. Failing that, provided you have obtained the package
%    source (\file{skrapport.tex} and \file{Makefile}) from either CTAN
%    or Github, running \texttt{make install} inside the source directory
%    works well. This will extract the documentation and code from
%    \file{skrapport.tex}, install all files into the TDS tree at
%    \texttt{TEXMFHOME} and run \texttt{mktexlsr}.
%
%    If you want to extract code and documentation without installing
%    the package, run \texttt{make all} instead. If you insist on not
%    using \texttt{make}, remember that packages distributed using
%    \pkg{skdoc} must be extracted using \texttt{pdflatex}, \emph{not}
%    \texttt{tex} or \texttt{latex}.

    \PrintChanges
    
    Index
    \PrintIndex
    \printbibliography
\end{document}
